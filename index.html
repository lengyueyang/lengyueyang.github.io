<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="医疗大数据、人工智能与中医药" />





  <link rel="alternate" href="/atom.xml" title="深度识医" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="静静思考   感悟人生">
<meta property="og:type" content="website">
<meta property="og:title" content="深度识医">
<meta property="og:url" content="http://lengyueyang.github.io/index.html">
<meta property="og:site_name" content="深度识医">
<meta property="og:description" content="静静思考   感悟人生">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深度识医">
<meta name="twitter:description" content="静静思考   感悟人生">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://lengyueyang.github.io/"/>





  <title> 深度识医 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?03623c427d40ea3a0d397622146ba575";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">深度识医</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">究天人之际    成一家之言</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'an_gSDgQ79xwY9L1qx4U','2.0.0');
</script>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/08/数据科学-数学和统计-高率论与数理统计-事件的概率/" itemprop="url">
                  数据科学-数学和统计-高率论与数理统计-事件的概率
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-08T08:00:00+08:00" content="2017-04-08">
              2017-04-08
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DATA-SCIENTIST/" itemprop="url" rel="index">
                    <span itemprop="name">DATA SCIENTIST</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/08/数据科学-数学和统计-高率论与数理统计-事件的概率/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/08/数据科学-数学和统计-高率论与数理统计-事件的概率/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            



<div id="outline-container-org6214726" class="outline-2">
<h2 id="org6214726">概述</h2>
<div class="outline-text-2" id="text-org6214726">
<p>
概率论与数理统计的学习部分用以下书籍
</p>

<ul class="org-ul">
<li>陈希儒, (2009). 概率论与数理统计. : 中国科技大学出版社.</li>
<li>陈希儒, 倪. (2009). 数理统计学教程. : 中国科技大学出版社.</li>
<li>高惠璇, (2005). 应用多元统计分析. : 北京大学出版社.</li>
</ul>
</div>
</div>

<div id="outline-container-orgbbc7e2d" class="outline-2">
<h2 id="orgbbc7e2d">事件的概率</h2>
<div class="outline-text-2" id="text-orgbbc7e2d">
<p>
<a href="http://blog.csdn.net/zhang22huan/article/details/8457037" target="_blank" rel="external">http://blog.csdn.net/zhang22huan/article/details/8457037</a>
</p>
</div>

<div id="outline-container-org4ebfbd4" class="outline-3">
<h3 id="org4ebfbd4">概率是什么</h3>
<div class="outline-text-3" id="text-org4ebfbd4">
</div><div id="outline-container-org4149a6e" class="outline-4">
<h4 id="org4149a6e">主观概率</h4>
<div class="outline-text-4" id="text-org4149a6e">
<ul class="org-ul">
<li>主观概率含义：为根据其经验和知识及利害关系的一种心态或倾向性，许多决策都包含个人判断成分，即主观概率</li>
<li>主观概率特点：不是在坚实的客观理由基础上为人们所公认；但不能从科学角度简单的全盘否定，（a）该概念有广泛的生活基础；（b）可能反映认识主体的一种倾向性，而有其社会意义；（c）在涉及利益得失的决策中，处于不同地位和掌握情报多少不同的人，对某事件可能性大小要参照这些情况及可能的后果去做衡量</li>
</ul>
</div>
</div>

<div id="outline-container-org7782a1b" class="outline-4">
<h4 id="org7782a1b">试验与事件</h4>
<div class="outline-text-4" id="text-org7782a1b">
<ul class="org-ul">
<li>试验：人为主动</li>
<li>事件：统计学中所说的事件不是已经发生了的事情，而是某种(或某些)情况下的“陈述”，也可能不发生，发生与否，需要到有关“试验”有了结果之后才能知晓。</li>
<li>事件的含义：在概率论中，“事件”一词有以下含义：1) 有一个明确的试验；2) 这个试验的全部可能结果，在试验前就是明确的；3) 有一个明确的陈述，界定了试验全部可能结果中的一个确定部分。</li>
<li>在概率论中，单一的试验结果称为“基本事件”，一个或一些基本事件并在一起，构成一个事件。</li>
</ul>
</div>
</div>

<div id="outline-container-org839fb53" class="outline-4">
<h4 id="org839fb53">古典概率</h4>
<div class="outline-text-4" id="text-org839fb53">
<ul class="org-ul">
<li>定义</li>
</ul>
<p>
设一个试验有 N 个等可能的结果，而事件 E 恰包含其中的 M 个结果，则事件 E 的概率，记
为 P(E)，定义为
</p>
\begin{equation}
P(E) = M/N
\end{equation}
<ul class="org-ul">
<li>古典概率时客观的，古典概率的计算主要基于排列组合</li>
<li>古典概率的局限性：古典概率只能用于全部试验结果为有限个，且等可能成立的情况。</li>
</ul>
</div>
</div>

<div id="outline-container-org038fa9e" class="outline-4">
<h4 id="org038fa9e">概率的统计学定义</h4>
<div class="outline-text-4" id="text-org038fa9e">
<ul class="org-ul">
<li>实用角度：通过实验去估计时间概率的方法</li>
<li>定义：通常，把事件 E 的概率定义为具有如下性质的一个数 p：当把试验重复时，E 的频率在 p 的附近摆动，且当重复次数增大时，摆动越来越小，或者说，概率就是当试验次数无限增大时频率的极限。</li>
<li>概率统计学定义的意义：1) 提供了估计概率的方法；2) 提供了一种检验理论正确与否的准则，这类问题属于假设检验的范畴。</li>
</ul>
</div>
</div>

<div id="outline-container-org3b2b73b" class="outline-4">
<h4 id="org3b2b73b">概率的公理化定义</h4>
<div class="outline-text-4" id="text-org3b2b73b">
<ul class="org-ul">
<li>1993 年前苏联大数学家柯尔莫哥洛夫实现概率论的公理化</li>
<li>柯氏公理体系：
<ul class="org-ul">
<li>概率是事件的函数</li>
<li>函数的定义域为抽象的集合，该集合的元素为基本事件</li>
<li>概率值属于[0,1]</li>
<li>由集合所有元素构成事件的概率为 1</li>
<li>事件为空集的概率为 0</li>
</ul></li>
<li>柯氏公理的意义：为一种普遍而严格的数学化概率理论奠定了基础</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgfa94728" class="outline-3">
<h3 id="orgfa94728">古典概率的计算</h3>
<div class="outline-text-3" id="text-orgfa94728">
</div><div id="outline-container-org1962974" class="outline-4">
<h4 id="org1962974">排列组合的几个简单公式</h4>
<div class="outline-text-4" id="text-org1962974">
<p>
古典概率归结为计算两个数 M 和 N，这种计算大多涉及排列组合
（1）n 个相异物件取 r(\(1 ⩽ r ⩽ n\))个的不同排列总数，为\(P_r^n = n(n-1)(n-2)...(n-r+1) = n!/(n-r)!\)
（2）n 个相异物件取 r(\(1 ⩽ r ⩽ n\)) 个的不同组合总数，为 \(C_r^n = P_r^n/r! = n(n-1)(n-2)...(n-r+1)/r! = n!/r!(n-r)!\)，通常\(C_r^n\)(或 \(C_n^r\))也记作\(\binom{n}{r}\)，即有\(\binom{n}{r} = n!/r!(n-r)!\)
（3）与二项式展开的关系：组合系数常称为二项式系数，即\((a+b)^n = \sum_{i = 0}^n\binom{n}{i}a^ib^{n-i}\)，另外一个有用的公式是\(\binom{m + n}{k} = \sum_{i = 0}^n\binom{m}{i}\binom{n}{k - i}\)
（4）n 个相异物件分成 k 堆，各堆物件数分别为 \(r_1, ⋯ , r_k\) 的分法：\(n!/(r_1!, ⋯ ,r_k!)\)
</p>
</div>
</div>

<div id="outline-container-org1461b6f" class="outline-4">
<h4 id="org1461b6f">古典概率计算举例</h4>
<div class="outline-text-4" id="text-org1461b6f">
<p>
古典概率的计算需要根据具体题目，利用捆绑法、插孔法等，这里强调一点，n 个人排成一列的排列数时 \(n!\) 个，而排成一个圆圈则时 \((n-1)!\)
</p>
</div>
</div>
</div>

<div id="outline-container-org2a3963b" class="outline-3">
<h3 id="org2a3963b">事件的运算、条件概率与独立性</h3>
<div class="outline-text-3" id="text-org2a3963b">
</div><div id="outline-container-org29fb0f2" class="outline-4">
<h4 id="org29fb0f2">事件的蕴含、包含和相等</h4>
<div class="outline-text-4" id="text-org29fb0f2">
<p>
在同一试验下的两事件 A 和 B，如果当 A 发生时 B 必发生，则称 A 蕴含 B，或者说 B 包含 A，记作\(A ⊂ B\)；若 A，B 互相蕴含，则称 A，B 两事件相等，记为 \(A = B\)
</p>
</div>
</div>

<div id="outline-container-org4a5ffcc" class="outline-4">
<h4 id="org4a5ffcc">事件的互斥和对立</h4>
<div class="outline-text-4" id="text-org4a5ffcc">
<ul class="org-ul">
<li>互斥：两事件不在同一次试验中发生，则称它们是互斥的。如果一些事件中的任意两个都互斥，则称这些事件是两两互斥的，简称互斥</li>
<li>对立：是互斥事件的一种重要情况，若 A 为一事件，则 B={A 不发生}，为 A 的对立事件，记为\(\bar{A}\)</li>
</ul>
</div>
</div>

<div id="outline-container-org8e7de0f" class="outline-4">
<h4 id="org8e7de0f">事件的和（并）</h4>
<div class="outline-text-4" id="text-org8e7de0f">
<ul class="org-ul">
<li>定义一个事件：指出它何时发生，何时不发生</li>
<li>事件的和：设有两事件 A，B，则定义事件 C={A 发生，或 B 发生}={A，B 至少一个发生}为事件 A 和事件 B 的和</li>
<li>事件和推广到多个事件的情形同上</li>
</ul>
</div>
</div>

<div id="outline-container-org8b9d867" class="outline-4">
<h4 id="org8b9d867">概率的加法定理</h4>
<div class="outline-text-4" id="text-org8b9d867">
<ul class="org-ul">
<li>若干个互斥事件之和的概率，等于各事件的概率之和，即</li>
</ul>
\begin{equation}
P(A_1 + A_2 + \dots + A_n) = P(A_1) + P(A_2) + \dots + P(A_n)
\end{equation}
<ul class="org-ul">
<li>推广：若\(\bar{A}\)表示 A 的对立事件，则\(P(\bar{A}) = 1 - P(A)\)</li>
</ul>
</div>
</div>

<div id="outline-container-orge934d7c" class="outline-4">
<h4 id="orge934d7c">事件的积（交）、事件的差</h4>
<div class="outline-text-4" id="text-orge934d7c">
<ul class="org-ul">
<li>事件的积：设有两事件 A，B，则定义事件 C={A，B 都发生}为两事件之积</li>
<li>事件的差：事件 A 和事件 B 的差 A-B = {A 发生，B 不发生}</li>
<li>事件的积和差服从结合率和分配率</li>
<li>事件的和、差和积的运算需要用逻辑思维方式验证，与纯数学运算不同，例如对与事件 A，\(A + A = A\) \(AA = A\)</li>
</ul>
</div>
</div>

<div id="outline-container-org8c97b48" class="outline-4">
<h4 id="org8c97b48">条件概率</h4>
<div class="outline-text-4" id="text-org8c97b48">
<ul class="org-ul">
<li>无条件概率定义：不加入其他条件或假定所计算出的概率</li>
<li>条件概率定义：在附加一定条件下所计算的概率。附加条件形式可归结为“已知某时间发生了”。设有两事件 A，B，而 P(B)非 0，则“在给定 B 发生的条件下 A 的条件概率” ，记为\(P(A|B)\)，定义为</li>
</ul>
\begin{equation}
P(A|B) = P(AB)/P(B)
\end{equation}
<ul class="org-ul">
<li>条件概率的计算：利用定义(<a href="#org790d170">1</a>)；直接从加入条件后改变了的情况计算</li>
</ul>
</div>
</div>

<div id="outline-container-orge33d2d2" class="outline-4">
<h4 id="orge33d2d2">事件的独立性，概率乘法定理</h4>
<div class="outline-text-4" id="text-orge33d2d2">
<ul class="org-ul">
<li>独立性定义：两件事情 A，B 若满足\(P(AB) = P(A)P(B)\)，则称 A，B 独立</li>
<li>概率乘法定理：两独立事件之积的概率等于其各自概率之积，即</li>
</ul>
\begin{equation}
P(AB) = P(A)P(B)
\end{equation}
<ul class="org-ul">
<li>多事件的独立性定义：设 \(A_1，A_2，...\)为有限或无限个事件，如果从其中任意取出有限个\(A_{i_1}, A_{i_2}, \dots , A_{i_m}\) 都成立\(P(A_{i_1}A_{i_2} \dots A_{i_m}) = P(A_{i_1})P(A_{i_2})\dots P(A_{i_m})\)</li>
</ul>
<p>
则称事件\(A_1，A_2，...\)相互独立，或简称独立
</p>
<ul class="org-ul">
<li>多个独立事件的乘法定理：若干个事件\(A_1, A_2, \dots , A_n\)之积的概率，等于各事件概率的乘积，即</li>
</ul>
\begin{equation}
P(A_1A_2\dots A_n) = P(A_1)P(A_2)\dots P(A_n)
\end{equation}
<ul class="org-ul">
<li>独立性定义推论：独立事件的任一部分也独立</li>
<li>独立性定义推论：若一系列事件相互独立，则将其中任一部分改为对立事件时，所得事件列仍为相互独立</li>
<li>两两独立：一些事件中任意两个事件都独立，则称它们两两独立</li>
<li>相互独立必推出两两独立，反之不一定对</li>
</ul>
</div>
</div>

<div id="outline-container-org456246f" class="outline-4">
<h4 id="org456246f">全概率公式与贝叶斯公式</h4>
<div class="outline-text-4" id="text-org456246f">
<ul class="org-ul">
<li>完备时间群：设\(B_1, B_2, \dots\)为有限或无限个事件，他们两辆互斥且每次试验中至少发生一个，可以用下列式子表示 \(B_iB_j = ∅\)，\(B_1 + B_2 + \dots = Ω\)，把具有这些性质的一组事件称为一个“完备事件群”</li>
<li>全概率公式：由原因推导结果，考虑一事件 A，因 Ω 是必然事件，有\(A = AΩ = AB_1 + AB_2 + \dots\)，再由条件概率的定义，有\(P(AB_i) = P(B_i)P(A|B_i)\)，带入上式，得到，</li>
</ul>
\begin{equation}
P(A) = P(B_1)P(A|B_1) + P(B_2)P(A|B_2) + \dots
\end{equation}
<ul class="org-ul">
<li>全概率公式的理解：1) 在较复杂的情况下，直接计算\(P(A)\)不容易，但 A 总伴随某个\(B_i\)出现，适当构造一组\(B_i\)，可以简化计算；2) 从另一个角度理解这个公式，把\(B_i\)看成是导致事件 A 发生的一种途径，不同的途径，P(A|B)是不通的。在这种情况下，A 的综合概率 P(A|B)应该在最小的 P(A|B<sub>i</sub>)和最大的之间。</li>
<li>贝叶斯公式：在全概率公式的假定之下，</li>
</ul>
\begin{equation}
P(B_i|A) = P(B_iA)/P(A) = P(AB_i)/P(AB) 
\newline
= P(B_i)P(A|B_i)/\sum_jP(B_j)P(A|B_j)
\end{equation}
<ul class="org-ul">
<li>贝叶斯公式的意义：1) 由结果推导原因；2) 在统计学上，依靠收集收集推断答案，真是贝叶斯公式的用武之地。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org26578b2" class="outline-3">
<h3 id="org26578b2">例题</h3>
<div class="outline-text-3" id="text-org26578b2">
<p>
题目 1  假定某种病菌在全人口的带菌率为 10%，又在检测时，带菌者呈阳、阴性反应的概率为 0.95 和 0.05，而不带菌者呈阳、阴性反应的概率则为 0.01 和 0.99。今某人独立地检测三次，发现 2 次呈阳性反应、1 次阴性反应。求“该人为带菌者”的概率是多少? 
</p>

<p>
解答：假设事件\(A_1\)为带菌，事件\(A_2\)为不带菌，事件\(B_1\)为试验测定为阳性，事件\(B_2\)为试验测定为阴性，事件\(C\)是做三次重复试验，则由题目可知，\(P(A_1) = 0.1\)，\(P(B_1|A_1) = 0.95\)，\(P(B_2|A_1) = 0.05\)\(P(B_1|A_2) = 0.01\)\(P(B_2|A_2) = 0.99\)，而且\(A_1\)和\(A_2\)，\(B_1\)和\(B_2\)都分别组成一个完备事件群，于是，根据全概率公式(<a href="#org9ddf0c3">1</a>)可知，\[P(B_1) = P(B_1A_1) + P(B_1A_2) = P(A_1)P(B_1|A_1) + P(A_2)P(B_1|A_2) = 0.1*0.95 + 0.9*0.01 = 0.104\]  \[P(C|A_1) = P(B_1B_1B_2|A_1) = \binom{3}{2}*0.95^2*(1-0.95) = 0.135375\]  \[P(C|A_2) = P(B_1B_1B_2|A_2) = \binom{3}{2}*0.01^2*(1-0.01) = 0.000297\]  于是，我们要求的值\(P(A_1|C)\)即：\[P(A_1|C) = P(A_1)P(C|A_1)/(P(A_1)P(C|A_1)+ P(A_2)P(C|A_2)) = 0.1*0.135375/(0.1*0.135375 + 0.9*0.000297) = 0.981\]
</p>

<p>
推广：假设改病人只测一次是阳性，求带菌概率，则\[P(A_1|B_1) = P(A_1)P(B_1|A_1)/(P(A_1)P(B_1|A_1)+ P(A_2)P(B_1|A_2)) = 0.1*0.0.95/(0.1*0.95 + 0.9*0.01) = 0.913\]  同样，如果病人测定两次都是阳性事件为\(D\)，则带菌概率为\[P(A_1|D) = P(A_1)P(D|A_1)/(P(A_1)P(D|A_1) + P(A_2)P(D|A_2)) = 0.1*0.95^2/(0.1*0.95^2 + 0.9*0.01^2) = 0.9990\]  若病人测定两次是一阳一阴为事件\(E\)，则带菌概率为\[P(A_1|E) = P(A_1)P(E|A_1)/(P(A_1)P(E|A_1) + P(A_2)P(E|A_2)) = 0.1*2*0.95*0.05/(0.1*2*0.95*0.01 + 0.9*2*0.01*0.99) = 0.652\]  若病人测定三次是一阳两阴为事件\(F\)，则带菌概率为\[P(A_1|F) = P(A_1)P(F|A_1)/(P(A_1)P(F|A_1) + P(A_2)P(F|A_2)) = 0.1*3*0.95*0.05^2/(0.1*3*0.95*0.01^2 + 0.9*3*0.01*0.99^2) = 0.0027\]  若病人测定三次是三阳为事件\(G\)，则带菌概率为\[P(A_1|G) = P(A_1)P(G|A_1)/(P(A_1)P(G|A_1) + P(A_2)P(G|A_2)) = 0.1*0.95^3/(0.1*0.95^3 + 0.9*0.01^3) = 0.999895\]  若病人测定三次是三阴为事件\(H\)，则带菌概率为\[P(A_1|H) = P(A_1)P(H|A_1)/(P(A_1)P(H|A_1) + P(A_2)P(H|A_2)) = 0.1*0.05^3/(0.1*0.05^3 + 0.9*0.99^3) = 0.000014\]
</p>

<p>
思考：1) 病菌在全球人口的带菌率越低，则一次检验阳性说明其带菌的概率越小，生物医学中的其他检测类似；2) 针对这道题目推广，病人只检测一次是阳性，其带菌概率为 0.913，说服力不够，如果再测一次，也为阳性，那其带菌带菌概率为 0.9990，基本可以确定其带菌，同样，阴性也是测量两次，但如果测量第二次，结果是阴性，其带菌概率为 0.652，可以进行第三次测量，若第三次是阳性，其带菌概率为 0.981，基本可以确定其带菌，若第三次为阴性，其带菌概率为 0.0027，可以认为其不带菌，综上，就本试验，测定三次可以确定病人是否带菌。
</p>
</div>
</div>
</div>

<div id="outline-container-orgf20fef1" class="outline-2">
<h2 id="orgf20fef1">参考资料</h2>
<div class="outline-text-2" id="text-orgf20fef1">
<p>
\vspace{-1.0cm}
bibliographystyle:ieeetr
bibliography:~/Emacs-lengyue/Papers/references.bib
</p>
</div>
</div>

Last Updated 2017-04-08 Sat 10:38 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/26/A simple introduction of lengyueyang's spacemacs configration[个人spacemacs配置简介]/" itemprop="url">
                  A simple introduction of lengyueyang's spacemacs configration[个人 spacemacs 配置简介]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-26T08:00:00+08:00" content="2017-03-26">
              2017-03-26
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/26/A simple introduction of lengyueyang's spacemacs configration[个人spacemacs配置简介]/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/26/A simple introduction of lengyueyang's spacemacs configration[个人spacemacs配置简介]/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org86ddd02" class="outline-2">
<h2 id="org86ddd02">Introduction: Emacs Configuration in an Org File</h2>
<div class="outline-text-2" id="text-org86ddd02">
<p>
I used spacemacs recently, org-mode is my favourite package of emacs, 
I use org-mode to GTD, write slide and documents, so I want to use org-mode to 
manager may own configuration of emacs beyond spacemacs.
</p>

<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>

<p>
After searched in google and with my research, I found the way below,
I want to manager my own emacs configuration from now (<span class="timestamp-wrapper"><span class="timestamp">[2016-11-07 Mon 21:00]</span></span>).
</p>

<p>
You could found my org config file in <a href="https://github.com/lengyueyang/spacemacs-lengyue" target="_blank" rel="external">https://github.com/lengyueyang/spacemacs-lengyue</a>
</p>
</div>

<div id="outline-container-org70e7429" class="outline-3">
<h3 id="org70e7429">Custom.el setup</h3>
<div class="outline-text-3" id="text-org70e7429">
<p>
In order to reduce the size of <code>init.el</code> in <code>.spacemacs</code> folder, create a <code>custom.el</code> file
in <code>.spaceamcs</code> folder, then add the flowing code to the end the <code>init.el</code>, and copy the
same location code to <code>custom.el</code> at the same time.
</p>

<p>
<b><i>Don't export this code, so use example</i></b>
</p>

<pre class="example">
(setq custom-file (expand-file-name "custom.el" dotspacemacs-directory))
(load custom-file 'no-error 'no-message)
</pre>
</div>
</div>

<div id="outline-container-org7b4506b" class="outline-3">
<h3 id="org7b4506b">Org-mode to customize emacs configuration</h3>
<div class="outline-text-3" id="text-org7b4506b">
<p>
Add the follow code to <code>.inti.el</code> part <code>defun dotspacemacs/user-config ()</code>
</p>

<p>
<b><i>Don't export this code, so use example</i></b>
</p>

<pre class="example">
(require 'ob-tangle)
(org-babel-load-file
  (expand-file-name "lengyueyang.org"
                    dotspacemacs-directory))
</pre>
</div>
</div>

<div id="outline-container-orgbbd2747" class="outline-3">
<h3 id="orgbbd2747">Req-package</h3>
<div class="outline-text-3" id="text-orgbbd2747">
<p>
<a href="https://github.com/edvorg/req-package" target="_blank" rel="external">req-package</a> is a wrapper on top of <a href="https://github.com/jwiegley/use-package" target="_blank" rel="external">use-package</a>, a package dependency management
tool. The documentation for <code>use-package</code> is immensely helpful for figuring out
how to describe package dependencies and settings. <code>req-package</code> adds the
<code>:require</code> keyword which allows us to define dependencies between related
packages.
</p>
</div>

<div id="outline-container-orgebb358f" class="outline-4">
<h4 id="orgebb358f">Initialize req-package</h4>
<div class="outline-text-4" id="text-orgebb358f">
<p>
With the preceding process complete, we just need to add the following
line to our init file to begin using <code>req-package</code>:
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'req-package</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org55115ae" class="outline-4">
<h4 id="org55115ae">Start loading packages in right order</h4>
<div class="outline-text-4" id="text-org55115ae">
<p>
To start loading packages in right order, we need to added following in the last
of emacs config.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">req-package-finish</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgff49852" class="outline-2">
<h2 id="orgff49852">Keybinding</h2>
<div class="outline-text-2" id="text-orgff49852">
<p>
Global keybindings of emacs but for specific customization with keybinding, like some
org related keybindings in Org-mode configuration part.
</p>
</div>

<div id="outline-container-org2694ec5" class="outline-3">
<h3 id="org2694ec5">F2 to open my init file</h3>
<div class="outline-text-3" id="text-org2694ec5">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> open-my-init-file<span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">find-file</span> <span class="string">"~/.spacemacs.d/lengyueyang.org"</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f2&amp;gt;"</span>)</span> <span class="quoted">'open-my-init-file</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oo"</span> <span class="quoted">'open-my-init-file</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org476c219" class="outline-3">
<h3 id="org476c219">F3 to open stardict</h3>
<div class="outline-text-3" id="text-org476c219">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'chinese-yasdcv</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">define-key</span> global-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f3&amp;gt;"</span>)</span> <span class="quoted">'youdao-dictionary-search-at-point+</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"ok"</span> <span class="string">"Keybindings"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oky"</span> <span class="quoted">'yasdcv-translate-at-point</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oks"</span> <span class="quoted">'youdao-dictionary-search-from-input</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oki"</span> <span class="quoted">'youdao-dictionary-search-at-point+</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7808170" class="outline-3">
<h3 id="org7808170">F8 to checkout the spelling of words</h3>
<div class="outline-text-3" id="text-org7808170">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">define-key</span> global-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f8&amp;gt;"</span>)</span> <span class="quoted">'flyspell-correct-previous-word-generic</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"okf"</span> <span class="quoted">'flyspell-correct-previous-word-generic</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7c05436" class="outline-3">
<h3 id="org7c05436">Org-iswitch</h3>
<div class="outline-text-3" id="text-org7c05436">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oa"</span> <span class="quoted">'org-agenda-list</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c b"</span>)</span> <span class="quoted">'org-iswitchb</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"okb"</span> <span class="quoted">'org-iswitchb</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orga1c7e4d" class="outline-3">
<h3 id="orga1c7e4d">Bookmark keybindings reconfiguration</h3>
<div class="outline-text-3" id="text-orga1c7e4d">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"om"</span> <span class="string">"Bookmark"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oms"</span> <span class="quoted">'bookmark-set</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"omr"</span> <span class="quoted">'bookmark-rename</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"omd"</span> <span class="quoted">'bookmark-delete</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"omj"</span> <span class="quoted">'counsel-bookmark</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org7411b62" class="outline-2">
<h2 id="org7411b62">Spacemacs better defaults</h2>
<div class="outline-text-2" id="text-org7411b62">
<p>
Include the configuration of spacemacs itself layers and better use of its defaults layers.
</p>
</div>

<div id="outline-container-org28ffe7b" class="outline-3">
<h3 id="org28ffe7b">Markdown mode</h3>
<div class="outline-text-3" id="text-org28ffe7b">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">configuration-layer/layer-usedp</span> <span class="quoted">'markdown</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> auto-mode-alist <span class="list">(<span class="keyword">cons</span> <span class="quoted">'(<span class="string">"\\.text$"</span> . gfm-mode)</span> auto-mode-alist)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> auto-mode-alist <span class="list">(<span class="keyword">cons</span> <span class="quoted">'(<span class="string">"\\.md$"</span> . gfm-mode)</span> auto-mode-alist)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> auto-mode-alist <span class="list">(<span class="keyword">cons</span> <span class="quoted">'(<span class="string">"\\.mdown$"</span> . gfm-mode)</span> auto-mode-alist)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> auto-mode-alist <span class="list">(<span class="keyword">cons</span> <span class="quoted">'(<span class="string">"\\.mdt$"</span> . gfm-mode)</span> auto-mode-alist)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> auto-mode-alist <span class="list">(<span class="keyword">cons</span> <span class="quoted">'(<span class="string">"\\.markdown$"</span> . gfm-mode)</span> auto-mode-alist)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7567dbe" class="outline-3">
<h3 id="org7567dbe">Spacemacs-layout</h3>
<div class="outline-text-3" id="text-org7567dbe">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> lengyueyang-configuration-path <span class="string">"~/.spacemacs.d/"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/load-my-layout <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">persp-load-state-from-file</span> <span class="list">(<span class="keyword">concat</span> lengyueyang-configuration-path <span class="string">"lengyueyang"</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/save-my-layout <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">persp-save-state-to-file</span> <span class="list">(<span class="keyword">concat</span> lengyueyang-configuration-path <span class="string">"lengyueyang"</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"ol"</span> <span class="string">"Layout-lengyueyang"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oll"</span> <span class="quoted">'lengyueyang/load-my-layout</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"ols"</span> <span class="quoted">'lengyueyang/save-my-layout</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;(defun lengyueyang-misc/post-init-persp-mode ()</span></span><br><span class="line"><span class="comment">;;  (setq persp-kill-foreign-buffer-action 'kill)</span></span><br><span class="line"><span class="comment">;;  (setq persp-lighter nil)</span></span><br><span class="line"><span class="comment">;;  (when (fboundp 'spacemacs|define-custom-layout)</span></span><br><span class="line"><span class="comment">;;    (spacemacs|define-custom-layout "@Cocos2D-X"</span></span><br><span class="line"><span class="comment">;;      :binding "c"</span></span><br><span class="line"><span class="comment">;;      :body</span></span><br><span class="line"><span class="comment">;;      (find-file "~/cocos2d-x/cocos/ui/UIWidget.cpp")</span></span><br><span class="line"><span class="comment">;;      (split-window-right)</span></span><br><span class="line"><span class="comment">;;      (find-file "~/cocos2d-x/cocos/cocos2d.cpp"))))</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org1ca56b4" class="outline-3">
<h3 id="org1ca56b4">Deft</h3>
<div class="outline-text-3" id="text-org1ca56b4">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f5&amp;gt;"</span>)</span> <span class="quoted">'deft</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> deft-extensions <span class="quoted">'(<span class="string">"txt"</span> <span class="string">"tex"</span> <span class="string">"org"</span> <span class="string">"mk"</span> <span class="string">"makedown"</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> deft-directory <span class="string">"~/Emacs-lengyue/Wiki-lengyue"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org9b8b1bf" class="outline-3">
<h3 id="org9b8b1bf">Elfeed</h3>
<div class="outline-text-3" id="text-org9b8b1bf">
<p>
<a href="https://github.com/lujun9972/emacs-document/blob/master/emacs-common/%E5%9C%A8Emacs%E4%B8%AD%E7%94%A8elfeed%E9%98%85%E8%AF%BB%E4%BD%A0%E7%9A%84RSS-feeds.org" target="_blank" rel="external">在 Emacs 中用 elfeed 阅读你的 RSS-feeds</a>
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">use-package</span> elfeed-org</span><br><span class="line">  <span class="keyword">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line">  <span class="list">(<span class="keyword">elfeed-org</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> rmh-elfeed-org-files <span class="list">(<span class="keyword">list</span> <span class="string">"~/Emacs-lengyue/Wiki-lengyue/Elfeed.org"</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0ef7b89" class="outline-3">
<h3 id="org0ef7b89">Gnus</h3>
<div class="outline-text-3" id="text-org0ef7b89">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; Get email, and store in nnml</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> gnus-secondary-select-methods</span><br><span class="line">      <span class="quoted">'(</span><br><span class="line">        (nntp <span class="string">"gmane"</span></span><br><span class="line">              (nntp-address <span class="string">"news.gmane.org"</span>))</span><br><span class="line">        (nntp <span class="string">"news.eternal-september.org"</span>)</span><br><span class="line">        (nntp <span class="string">"nntp.aioe.org"</span>)</span><br><span class="line">        (nntp <span class="string">"news.gwene.org"</span>)</span><br><span class="line">        )</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> gnus-secondary-select-methods</span><br><span class="line">      <span class="quoted">'(</span><br><span class="line">        (nnimap <span class="string">"gmail"</span></span><br><span class="line">                (nnimap-address</span><br><span class="line">                 <span class="string">"imap.gmail.com"</span>)</span><br><span class="line">                (nnimap-server-port <span class="number">993</span>)</span><br><span class="line">                (nnimap-stream ssl))</span><br><span class="line">        )</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; Send email via Gmail:</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> message-send-mail-function <span class="quoted">'smtpmail-send-it</span></span><br><span class="line">      smtpmail-default-smtp-server <span class="string">"smtp.gmail.com"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; Archive outgoing email in Sent folder on imap.gmail.com:</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> gnus-message-archive-method <span class="quoted">'(nnimap <span class="string">"imap.gmail.com"</span>)</span></span><br><span class="line">      gnus-message-archive-group <span class="string">"[Gmail]/Sent Mail"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; set return email address based on incoming email address</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> gnus-posting-styles</span><br><span class="line">      <span class="quoted">'(((header <span class="string">"to"</span> <span class="string">"address@outlook.com"</span>)</span><br><span class="line">         (address <span class="string">"address@outlook.com"</span>))</span><br><span class="line">        ((header <span class="string">"to"</span> <span class="string">"address@gmail.com"</span>)</span><br><span class="line">         (address <span class="string">"address@gmail.com"</span>)))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; store email in ~/gmail directory</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> nnml-directory <span class="string">"~/Documents/Gnus"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> message-directory <span class="string">"~/Documents/Gnus"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgae01afd" class="outline-3">
<h3 id="orgae01afd">Mu4e</h3>
<div class="outline-text-3" id="text-orgae01afd">
<ul class="org-ul">
<li><a href="https://github.com/larstvei/dot-emacs" target="_blank" rel="external">larstvei/dot-emacs: My Emacs configurations written in Org mode</a></li>
<li><a href="http://wenshanren.org/?p=111" target="_blank" rel="external">mu4e: an E-mail Client for Emacs | 肉山博客 (Wenshan's Blog)</a></li>
<li><a href="http://coldnew.github.io/blog/2016/01-02_mu4e/" target="_blank" rel="external">在 emacs 下使用 mu4e 收發郵件 | coldnew's blog</a></li>
<li><a href="http://blog.csdn.net/csfreebird/article/details/52973188" target="_blank" rel="external">spacemacs email layer - 博客频道 - CSDN.NET</a></li>
<li><a href="https://github.com/howardabrams/dot-files/blob/master/emacs-mail.org" target="_blank" rel="external">dot-files/emacs-mail.org at master · howardabrams/dot-files</a></li>
<li><a href="https://guso.ml/search?q=offlinemap+%E5%A4%9A%E5%B8%90%E6%88%B7&amp;prmd=ivns&amp;ei=pVc8WPPzNsv0vgTT2pn4Cw&amp;start=10&amp;sa=N" target="_blank" rel="external">offlinemap 多帐户 - Google 搜索</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/mu4e" target="_blank" rel="external">spacemacs/layers/+email/mu4e at master · syl20bnr/spacemacs</a></li>
<li><a href="http://www.djcbsoftware.nl/code/mu/mu4e/index.html" target="_blank" rel="external">Mu4e 0.9.16 user manual: Top</a></li>
<li><a href="https://github.com/lujun9972/emacs-document/blob/master/org-mode/%E7%94%A8org-mime%E5%9C%A8org-mode%E4%B8%AD%E5%8F%91%E9%80%81html%E9%82%AE%E4%BB%B6.org" target="_blank" rel="external">emacs-document/用 org-mime 在 org-mode 中发送 html 邮件.org at master · lujun9972/emacs-document</a></li>
<li><a href="https://emacs.lujianmei.com/03-For-an-editor/init-mu4e.html" target="_blank" rel="external">Mu4e 邮件管理 · 谁说 Emacs 不好玩？</a></li>
<li><a href="http://www.bagualu.net/wordpress/archives/6555" target="_blank" rel="external">emacs 中的 email 客户端 mu4e | 猎数博客</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/gnus#org-mime-in-org-layer" target="_blank" rel="external">spacemacs/layers/+email/gnus at master · syl20bnr/spacemacs</a></li>
</ul>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/mu4e"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'mu4e</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-account-alist</span><br><span class="line">      <span class="quoted">'((<span class="string">"Gmail"</span></span><br><span class="line">         ;; Under each account, set the account-specific variables you want.</span><br><span class="line">         (mu4e-sent-messages-behavior delete)</span><br><span class="line">         (mu4e-sent-folder <span class="string">"/Gmail/[Gmail].Sent Mail"</span>)</span><br><span class="line">         (mu4e-drafts-folder <span class="string">"/Gmail/[Gmail].Drafts"</span>)</span><br><span class="line">         (user-mail-address <span class="string">"maoxiaoweihl@gmail.com"</span>)</span><br><span class="line">         (user-full-name <span class="string">"Mao Xiaowei"</span>))</span><br><span class="line">        (<span class="string">"Foxmail"</span></span><br><span class="line">         (mu4e-sent-messages-behavior sent)</span><br><span class="line">         (mu4e-sent-folder <span class="string">"/Foxmail/Sent Messages"</span>)</span><br><span class="line">         (mu4e-drafts-folder <span class="string">"/Foxmail/Drafts"</span>)</span><br><span class="line">         (user-mail-address <span class="string">"maoxiaowei1988@foxmail.com"</span>)</span><br><span class="line">         (user-full-name <span class="string">"Mao Xiaowei"</span>))</span><br><span class="line">        ;; (<span class="string">"Lengyue-163"</span></span><br><span class="line">        ;;  (mu4e-sent-messages-behavior sent)</span><br><span class="line">        ;;  (mu4e-sent-folder <span class="string">"/Lengyue-163/Sent Items"</span>)</span><br><span class="line">        ;;  (mu4e-drafts-folder <span class="string">"/Lengyue-163/Drafts"</span>)</span><br><span class="line">        ;;  (user-mail-address <span class="string">"zanghuahong@163.com"</span>)</span><br><span class="line">        ;;  (user-full-name <span class="string">"Mao Xiaowei"</span>))</span><br><span class="line">       )</span></span><br><span class="line">)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">mu4e/mail-account-reset</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Set up some common mu4e variables</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-maildir <span class="string">"~/Documents/Mu4e"</span></span><br><span class="line">      mu4e-trash-folder <span class="string">"/Gmail/Trash"</span></span><br><span class="line">      mu4e-refile-folder <span class="string">"/Gmail/Archive"</span></span><br><span class="line">      <span class="comment">;; mu4e-get-mail-command "mbsync -a"</span></span><br><span class="line">      mu4e-update-interval <span class="literal">nil</span></span><br><span class="line">      mu4e-compose-signature-auto-include <span class="literal">nil</span></span><br><span class="line">      mu4e-view-show-images <span class="literal">t</span></span><br><span class="line">      mu4e-view-show-addresses <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Mail directory shortcuts</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-maildir-shortcuts</span><br><span class="line">      <span class="quoted">'(</span><br><span class="line">        (<span class="string">"/Foxmail/INBOX"</span> . ?f)</span><br><span class="line">        (<span class="string">"/Foxmail/Drafts"</span> . ?d)</span><br><span class="line">        (<span class="string">"/Foxmail/Sent Messages"</span> . ?s)</span><br><span class="line">        (<span class="string">"/Gmail/INBOX"</span> . ?g)</span><br><span class="line">        ;; (<span class="string">"/Gmail/[Gmail].All Mail"</span> . ?a)</span><br><span class="line">        (<span class="string">"/Gmail/[Gmail].Drafts"</span> . ?r)</span><br><span class="line">        (<span class="string">"/Gmail/[Gmail].Sent Mail"</span> . ?e)</span><br><span class="line">        ;;(<span class="string">"/Gmail/[Gmail].Trash"</span> . ?<span class="literal">t</span>)</span><br><span class="line">        ;; (<span class="string">"/Lengyue-163/INBOX"</span> . ?i)</span><br><span class="line">        )</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Bookmarks</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-bookmarks</span><br><span class="line">      <span class="quoted">`((<span class="string">"flag:unread AND NOT flag:trashed"</span> <span class="string">"Unread messages"</span> ?u)</span><br><span class="line">        (<span class="string">"date:today..now"</span> <span class="string">"Today's messages"</span> ?<span class="literal">t</span>)</span><br><span class="line">        (<span class="string">"date:7d..now"</span> <span class="string">"Last 7 days"</span> ?w)</span><br><span class="line">        (<span class="string">"mime:image/*"</span> <span class="string">"Messages with images"</span> ?p)</span><br><span class="line">        (,(mapconcat 'identity</span><br><span class="line">                     (mapcar</span><br><span class="line">                      (lambda (maildir)</span><br><span class="line">                        (concat <span class="string">"maildir:"</span> (car maildir)))</span><br><span class="line">                      mu4e-maildir-shortcuts) <span class="string">" OR "</span>)</span><br><span class="line">         <span class="string">"All inboxes"</span> ?i))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">mu4e-alert-set-default-style</span> <span class="quoted">'libnotify</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">alert-add-rule</span> <span class="keyword">:category</span> <span class="string">"mu4e-alert"</span> <span class="keyword">:style</span> <span class="quoted">'fringe</span> <span class="keyword">:predicate</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">(<span class="keyword">_</span>)</span> <span class="list">(<span class="keyword">string-match-p</span> <span class="string">"^mu4e-"</span> <span class="list">(<span class="keyword">symbol-name</span> major-mode)</span>)</span>)</span> <span class="keyword">:continue</span> <span class="literal">t</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">mu4e-alert-enable-notifications</span>)</span></span><br><span class="line"><span class="comment">;; (setq mu4e-alert-email-notification-types '(count))</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-alert-email-notification-types <span class="quoted">'(subjects)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; (setq mu4e-enable-notifications t)</span></span><br><span class="line"><span class="comment">;; (with-eval-after-load 'mu4e-alert</span></span><br><span class="line">  <span class="comment">;; Enable Desktop notifications</span></span><br><span class="line">  <span class="comment">;; (mu4e-alert-set-default-style 'notifications)) ; For linux</span></span><br><span class="line">  <span class="comment">;; (mu4e-alert-set-default-style 'libnotify))  ; Alternative for linux</span></span><br><span class="line">  <span class="comment">;; (mu4e-alert-set-default-style 'notifier))   ; For Mac OSX (through the</span></span><br><span class="line">                                        <span class="comment">; terminal notifier app)</span></span><br><span class="line"><span class="comment">;; (mu4e-alert-set-default-style 'growl))      ; Alternative for Mac OSX</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; (setq mu4e-enable-mode-line t)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-get-mail-command <span class="string">"offlineimap"</span>)</span></span><br><span class="line"><span class="comment">;; Fetch mail in 60 sec interval</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-update-interval <span class="number">1200</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'mu4e-contrib</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-html2text-command <span class="quoted">'mu4e-shr2text</span>)</span></span><br><span class="line"><span class="comment">;; try to emulate some of the eww key-bindings</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'mu4e-view-mode-hook</span></span><br><span class="line">          <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">            <span class="list">(<span class="keyword">local-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;tab&amp;gt;"</span>)</span> <span class="quoted">'shr-next-link</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">local-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;backtab&amp;gt;"</span>)</span> <span class="quoted">'shr-previous-link</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; something about ourselves</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'smtpmail</span>)</span>  </span><br><span class="line"><span class="list">(<span class="keyword">setq</span> user-mail-address <span class="string">"maoxiaowei1988@foxmail.com"</span>  </span><br><span class="line">      user-full-name <span class="string">"Xiaowei, Mao"</span></span><br><span class="line">      smtpmail-stream-type <span class="quoted">'starttls</span></span><br><span class="line">      starttls-use-gnutls <span class="literal">t</span></span><br><span class="line">      mu4e-compose-signature  </span><br><span class="line">      <span class="list">(<span class="keyword">concat</span>  </span><br><span class="line">       <span class="string">"Xiaowei Mao\n"</span>  </span><br><span class="line">       <span class="string">"Email: maoxiaoweihl@gmail.com\n"</span>  </span><br><span class="line">       <span class="string">"Email: maoxiaowei1988@foxmail.com\n"</span>  </span><br><span class="line">       <span class="string">"Blog: http://lengyueyang.github.io\n"</span>  </span><br><span class="line">       <span class="string">"\n"</span>)</span>  </span><br><span class="line">      mu4e-compose-signature-auto-include <span class="literal">t</span>  </span><br><span class="line">      )</span>  </span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> send-mail-function            <span class="quoted">'smtpmail-send-it</span></span><br><span class="line">      message-send-mail-function    <span class="quoted">'smtpmail-send-it</span></span><br><span class="line">      smtpmail-auth-credentials     <span class="list">(<span class="keyword">expand-file-name</span> <span class="string">"~/.authinfo"</span>)</span></span><br><span class="line">      smtpmail-stream-type          <span class="quoted">'tls</span></span><br><span class="line">      smtpmail-smtp-server          <span class="string">"smtp.qq.com"</span></span><br><span class="line">      smtpmail-smtp-service         <span class="number">465</span></span><br><span class="line">      smtpmail-smtp-user <span class="string">"maoxiaowei1988@qq.com"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> message-kill-buffer-on-exit <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; save attachment to my desktop (this can also be a function)  </span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-attachment-dir <span class="string">"/home/lengyue/Documents/Mu4e/Attachment"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3267841" class="outline-3">
<h3 id="org3267841">Magit</h3>
<div class="outline-text-3" id="text-org3267841">
</div><div id="outline-container-orgf6d983f" class="outline-4">
<h4 id="orgf6d983f">Magit auto complete</h4>
<div class="outline-text-4" id="text-orgf6d983f">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> my/dabbrev-friend-buffer <span class="list">(<span class="keyword">other-buffer</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">cond</span> <span class="list">( <span class="comment">;; ignore very large files</span></span><br><span class="line">         <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (buffer-size other-buffer) (* 1024 1024))</span></span><br><span class="line">         <span class="literal">nil</span>)</span></span><br><span class="line">        <span class="list">( <span class="comment">;; doing a magit commit - use the magit status buffer</span></span><br><span class="line">         <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">boundp</span> git-commit-mode)</span> git-commit-mode)</span></span><br><span class="line">         <span class="list">(<span class="keyword">with-current-buffer</span> other-buffer</span><br><span class="line">           <span class="list">(<span class="keyword">eq</span> major-mode <span class="quoted">'magit-status-mode</span>)</span>)</span>)</span></span><br><span class="line">        <span class="list">( <span class="comment">;; in projectile project - use projectile buffers</span></span><br><span class="line">         <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">buffer-file-name</span> other-buffer)</span></span><br><span class="line">              <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">file-remote-p</span> <span class="list">(<span class="keyword">buffer-file-name</span> other-buffer)</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">projectile-project-p</span>)</span>)</span></span><br><span class="line">         <span class="list">(<span class="keyword">string=</span> <span class="list">(<span class="keyword">projectile-project-name</span>)</span></span><br><span class="line">                  <span class="list">(<span class="keyword">with-current-buffer</span> other-buffer</span><br><span class="line">                    <span class="list">(<span class="keyword">projectile-project-name</span>)</span>)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">t</span> <span class="comment">;; fallback - same mod</span></span><br><span class="line">         <span class="list">(<span class="keyword">dabbrev--same-major-mode-p</span> other-buffer)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'text-mode-hook</span> <span class="quoted">'company-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'text-mode-hook</span></span><br><span class="line">          <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">            <span class="list">(<span class="keyword">set</span> <span class="list">(<span class="keyword">make-local-variable</span> <span class="quoted">'company-backends</span>)</span> <span class="quoted">'(company-files company-en-words company-dabbrev)</span>)</span>)</span></span><br><span class="line">          )</span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org6a3675e" class="outline-2">
<h2 id="org6a3675e">Basic setup</h2>
<div class="outline-text-2" id="text-org6a3675e">
<p>
Some basic customizaton
</p>

<p>
In emacs, we can use <code>M-x</code> to execute interactive commands, I
implement some of them to make my emacs more easy to use.
</p>
</div>

<div id="outline-container-orgb8dcb1b" class="outline-3">
<h3 id="orgb8dcb1b">Personal information setup</h3>
<div class="outline-text-3" id="text-orgb8dcb1b">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> user-full-name <span class="string">"lengyuyang"</span></span><br><span class="line">      user-mail-address <span class="string">"maoxiaoweihl@gmail.com"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org68d7fc9" class="outline-3">
<h3 id="org68d7fc9">Don't ask me when kill process buffer</h3>
<div class="outline-text-3" id="text-org68d7fc9">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> kill-buffer-query-functions</span><br><span class="line">      <span class="list">(<span class="keyword">remq</span> <span class="quoted">'process-kill-buffer-query-function</span></span><br><span class="line">            kill-buffer-query-functions)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0fd4acc" class="outline-3">
<h3 id="org0fd4acc">Set the chinese font alignment</h3>
<div class="outline-text-3" id="text-org0fd4acc">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; (spacemacs//set-monospaced-font "Inconsolata" "Source Han Sans CN" 16 20)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs//set-monospaced-font</span> <span class="string">"Fira Mono"</span> <span class="string">"Source Han Sans CN"</span> <span class="number">16</span> <span class="number">20</span>)</span></span><br><span class="line"><span class="comment">;; (spacemacs//set-monospaced-font "Fira Mono" "Wenquanyi Micro Hei" 16 20)</span></span><br><span class="line"><span class="comment">;; (spacemacs//set-monospaced-font "DejaVu Sans Mono" "Source Han Sans CN" 16 20)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org456fb25" class="outline-3">
<h3 id="org456fb25">Add auto format paste code</h3>
<div class="outline-text-3" id="text-org456fb25">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">dolist</span> <span class="list">(<span class="keyword">command</span> <span class="quoted">'(yank yank-pop)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">eval</span></span><br><span class="line">   <span class="quoted">`(defadvice ,command (after indent-region activate)</span><br><span class="line">      (and (not current-prefix-arg)</span><br><span class="line">           (member major-mode</span><br><span class="line">                   '(emacs-lisp-mode</span><br><span class="line">                     lisp-mode</span><br><span class="line">                     clojure-mode</span><br><span class="line">                     scheme-mode</span><br><span class="line">                     haskell-mode</span><br><span class="line">                     ruby-mode</span><br><span class="line">                     rspec-mode</span><br><span class="line">                     python-mode</span><br><span class="line">                     c-mode</span><br><span class="line">                     c++-mode</span><br><span class="line">                     objc-mode</span><br><span class="line">                     latex-mode</span><br><span class="line">                     js-mode</span><br><span class="line">                     plain-tex-mode))</span><br><span class="line">           (let ((mark-even-if-inactive transient-mark-mode))</span><br><span class="line">             (indent-region (region-beginning) (region-end) <span class="literal">nil</span>))))</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orge5c700e" class="outline-3">
<h3 id="orge5c700e">Simple better defaults</h3>
<div class="outline-text-3" id="text-orge5c700e">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">global-prettify-symbols-mode</span> <span class="number">1</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq-default</span> fill-column <span class="number">80</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">defadvice</span> find-file <span class="list">(<span class="keyword">before</span> make-directory-maybe</span><br><span class="line">                             <span class="list">(<span class="keyword">filename</span> <span class="keyword">&amp;amp</span><span class="comment">;optional wildcards) activate)</span></span><br><span class="line">  <span class="string">"Create parent directory if not exists while visiting file."</span></span><br><span class="line">  <span class="list">(<span class="keyword">unless</span> <span class="list">(<span class="keyword">file-exists-p</span> filename)</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">dir</span> <span class="list">(<span class="keyword">file-name-directory</span> filename)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">when</span> dir</span><br><span class="line">        <span class="list">(<span class="keyword">unless</span> <span class="list">(<span class="keyword">file-exists-p</span> dir)</span></span><br><span class="line">          <span class="list">(<span class="keyword">make-directory</span> dir <span class="literal">t</span>)</span>)</span>)</span>)</span>)</span>)</span></span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org91516cc" class="outline-3">
<h3 id="org91516cc">Large file handle</h3>
<div class="outline-text-3" id="text-org91516cc">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> large-file-warning-threshold <span class="number">300000000</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> spacemacs/check-large-file <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (buffer-size) 500000)</span></span><br><span class="line">    <span class="list">(<span class="keyword">progn</span> <span class="list">(<span class="keyword">fundamental-mode</span>)</span></span><br><span class="line">           <span class="list">(<span class="keyword">hl-line-mode</span> <span class="number">-1</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">executable-find</span> <span class="string">"wc"</span>)</span></span><br><span class="line">           <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (string-to-number (shell-command-to-string (format "wc -l %s" (buffer-file-name))))</span></span><br><span class="line">              <span class="number">5000</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">linum-mode</span> <span class="number">-1</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'find-file-hook</span> <span class="quoted">'spacemacs/check-large-file</span>)</span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org40726b7" class="outline-3">
<h3 id="org40726b7">Buffers&#xa0;&#xa0;&#xa0;<span class="tag"><span class="buffer">buffer</span></span></h3>
<div class="outline-text-3" id="text-org40726b7">
</div><div id="outline-container-org533d64f" class="outline-4">
<h4 id="org533d64f">Indent whole buffer</h4>
<div class="outline-text-4" id="text-org533d64f">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> indent-whole-buffer <span class="list">()</span></span><br><span class="line">  <span class="string">"Indent whole buffer."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">save-excursion</span></span><br><span class="line">    <span class="list">(<span class="keyword">indent-region</span> <span class="list">(<span class="keyword">point-min</span>)</span> <span class="list">(<span class="keyword">point-max</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7aaac22" class="outline-4">
<h4 id="org7aaac22">Quick folding source block</h4>
<div class="outline-text-4" id="text-org7aaac22">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> quick-folding-source <span class="list">()</span></span><br><span class="line">  <span class="string">"Use emacs buildin easy to folding code."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">set-selective-display</span></span><br><span class="line">   <span class="list">(<span class="keyword">if</span> selective-display <span class="literal">nil</span> <span class="number">1</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org7bae820" class="outline-3">
<h3 id="org7bae820">Edit (Insert/Remove)</h3>
<div class="outline-text-3" id="text-org7bae820">
</div><div id="outline-container-org166b62e" class="outline-4">
<h4 id="org166b62e">Insert U200B char</h4>
<div class="outline-text-4" id="text-org166b62e">
<p>
<code>&lt;U200B&gt;</code> character is a <code>zero width space character</code> which is nice to
use under org-mode.
</p>

<p>
For more info, please see: <a href="https://lists.gnu.org/archive/html/emacs-orgmode/2012-09/msg00155.html" target="_blank" rel="external">suggestion for org-emphasis-regexp-components: *U*nited *N*ations</a>
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> insert-U200B-char <span class="list">()</span></span><br><span class="line">  <span class="string">"Insert &amp;lt;U200B&amp;gt; char, this character is nice use in org-mode."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">insert</span> <span class="string">"\ufeff"</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0e9ed37" class="outline-4">
<h4 id="org0e9ed37">Insert empty line after current line</h4>
<div class="outline-text-4" id="text-org0e9ed37">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> insert-empty-line <span class="list">()</span></span><br><span class="line">  <span class="string">"Insert an empty line after current line and position cursor on newline."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">move-end-of-line</span> <span class="literal">nil</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">open-line</span> <span class="number">1</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">next-line</span> <span class="number">1</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org8d34d5f" class="outline-3">
<h3 id="org8d34d5f">File Handle</h3>
<div class="outline-text-3" id="text-org8d34d5f">
</div><div id="outline-container-orgaca78a3" class="outline-4">
<h4 id="orgaca78a3">Reopen file as root</h4>
<div class="outline-text-4" id="text-orgaca78a3">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> file-reopen-as-root <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">when</span> buffer-file-name</span><br><span class="line">    <span class="list">(<span class="keyword">find-alternate-file</span></span><br><span class="line">     <span class="list">(<span class="keyword">concat</span> <span class="string">"/sudo:root@localhost:"</span></span><br><span class="line">             buffer-file-name)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org9c0eb19" class="outline-4">
<h4 id="org9c0eb19">Delete current buffer file</h4>
<div class="outline-text-4" id="text-org9c0eb19">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> delete-current-buffer-file <span class="list">()</span></span><br><span class="line">  <span class="string">"Removes file connected to current buffer and kills buffer."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">filename</span> <span class="list">(<span class="keyword">buffer-file-name</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">buffer</span> <span class="list">(<span class="keyword">current-buffer</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">name</span> <span class="list">(<span class="keyword">buffer-name</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">and</span> filename <span class="list">(<span class="keyword">file-exists-p</span> filename)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">ido-kill-buffer</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">yes-or-no-p</span> <span class="string">"Are you sure you want to remove this file? "</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">delete-file</span> filename)</span></span><br><span class="line">        <span class="list">(<span class="keyword">kill-buffer</span> buffer)</span></span><br><span class="line">        <span class="list">(<span class="keyword">message</span> <span class="string">"File '%s' successfully removed"</span> filename)</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org93097f0" class="outline-4">
<h4 id="org93097f0">Rename current Buffer and file</h4>
<div class="outline-text-4" id="text-org93097f0">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> rename-current-buffer-file <span class="list">()</span></span><br><span class="line">  <span class="string">"Renames current buffer and file it is visiting."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">name</span> <span class="list">(<span class="keyword">buffer-name</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">filename</span> <span class="list">(<span class="keyword">buffer-file-name</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">and</span> filename <span class="list">(<span class="keyword">file-exists-p</span> filename)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">error</span> <span class="string">"Buffer '%s' is not visiting a file!"</span> name)</span></span><br><span class="line">      <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">new-name</span> <span class="list">(<span class="keyword">read-file-name</span> <span class="string">"New name: "</span> filename)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">get-buffer</span> new-name)</span></span><br><span class="line">            <span class="list">(<span class="keyword">error</span> <span class="string">"A buffer named '%s' already exists!"</span> new-name)</span></span><br><span class="line">          <span class="list">(<span class="keyword">rename-file</span> filename new-name <span class="number">1</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">rename-buffer</span> new-name)</span></span><br><span class="line">          <span class="list">(<span class="keyword">set-visited-file-name</span> new-name)</span></span><br><span class="line">          <span class="list">(<span class="keyword">set-buffer-modified-p</span> <span class="literal">nil</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">message</span> <span class="string">"File '%s' successfully renamed to '%s'"</span></span><br><span class="line">                   name <span class="list">(<span class="keyword">file-name-nondirectory</span> new-name)</span>)</span>)</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgc5a1132" class="outline-4">
<h4 id="orgc5a1132">Add executable attribute to file</h4>
<div class="outline-text-4" id="text-orgc5a1132">
<p>
Actually this command is the same as <code>chmod +x</code> but it doesn't use any shell
command, it use emacs's logior function to change file attribute.
</p>

<p>
I only make <code>owener</code> can has executable permission, not change it for gourp or
others user.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> set-file-executable<span class="list">()</span></span><br><span class="line">  <span class="string">"Add executable permissions on current file."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">buffer-file-name</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">set-file-modes</span> buffer-file-name</span><br><span class="line">                    <span class="list">(<span class="keyword">logior</span> <span class="list">(<span class="keyword">file-modes</span> buffer-file-name)</span> <span class="number">#o100</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">message</span> <span class="list">(<span class="keyword">concat</span> <span class="string">"Made "</span> buffer-file-name <span class="string">" executable"</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3ee28a1" class="outline-4">
<h4 id="org3ee28a1">Clone current file to new one</h4>
<div class="outline-text-4" id="text-org3ee28a1">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> clone-file-and-open <span class="list">(<span class="keyword">filename</span>)</span></span><br><span class="line">  <span class="string">"Clone the current buffer writing it into FILENAME and open it"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span> <span class="string">"FClone to file: "</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">save-restriction</span></span><br><span class="line">    <span class="list">(<span class="keyword">widen</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">write-region</span> <span class="list">(<span class="keyword">point-min</span>)</span> <span class="list">(<span class="keyword">point-max</span>)</span> filename <span class="literal">nil</span> <span class="literal">nil</span> <span class="literal">nil</span> <span class="quoted">'confirm</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">find-file</span> filename)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org6c3c292" class="outline-3">
<h3 id="org6c3c292">Keeping files in sync</h3>
<div class="outline-text-3" id="text-org6c3c292">
<p>
By default, Emacs will not update the contents of open buffers when a file
changes on disk. This is inconvenient when switching branches in Git - as you’d
risk editing stale buffers.
</p>

<p>
This problem can be solved by:
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">global-auto-revert-mode</span> <span class="number">1</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> global-auto-revert-non-file-buffers <span class="literal">t</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> auto-revert-verbose <span class="literal">nil</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> revert-without-query <span class="quoted">'(<span class="string">".*"</span>)</span>)</span> <span class="comment">;; disable revert query</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org581910f" class="outline-3">
<h3 id="org581910f">Snippet handle by yasnippet</h3>
<div class="outline-text-3" id="text-org581910f">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">req-package</span> yasnippet</span><br><span class="line">  <span class="keyword">:init</span> <span class="list">(<span class="keyword">yas-global-mode</span> <span class="number">1</span>)</span></span><br><span class="line">  <span class="keyword">:mode</span> <span class="list">(<span class="string">"emacs.+/snippets/"</span> . snippet-mode)</span></span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line">  <span class="list">(<span class="keyword">progn</span></span><br><span class="line">    <span class="list">(<span class="keyword">setq</span> yas/prompt-functions <span class="quoted">'(yas-dropdown-prompt</span><br><span class="line">                                 yas-completing-prompt</span><br><span class="line">                                 yas-ido-prompt)</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="list">(<span class="keyword">setq</span> yas/snippet-dirs <span class="list">(<span class="keyword">concat</span> user-emacs-directory <span class="string">"snippets"</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>

<div id="outline-container-org9fcf0b9" class="outline-4">
<h4 id="org9fcf0b9">Implement org-mode's easy-template like function</h4>
<div class="outline-text-4" id="text-org9fcf0b9">
<p>
I really like org-mode's <code>easy-template</code> function, so I implement one called
<code>major-mode-expand</code> which will let you use easy-template like function in any
major-mode.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">eval-after-load</span> <span class="quoted">'yasnippet</span></span><br><span class="line">  <span class="quoted">'(progn</span><br><span class="line">     (defadvice yas-expand (around major-mode-expand activate)</span><br><span class="line">       <span class="string">"Try to complete a structure template before point like org-mode does.</span><br><span class="line">  This looks for strings like \"&amp;lt;e\" on an otherwise empty line and</span><br><span class="line">  expands them.</span><br><span class="line">  Before use this function, you must setup `major-mode-name'-expand-alist variable.</span><br><span class="line"></span><br><span class="line">  Take emacs-lisp-mode as example, if you wand to use &amp;lt;r to expand your snippet `require'</span><br><span class="line">  in yasnippet, you muse setup the emacs-lisp-mode-expand-alist variable.</span><br><span class="line"></span><br><span class="line">   (setq emacs-lisp-expand-alist '((\"r\" . \"require\")))"</span></span><br><span class="line">       (let* ((l (buffer-substring (point-at-bol) (point)))</span><br><span class="line">              (expand-symbol (intern (concat (symbol-name major-mode) <span class="string">"-expand-alist"</span>)))</span><br><span class="line">              (expand-alist (if (boundp expand-symbol) (symbol-value expand-symbol) <span class="literal">nil</span>))</span><br><span class="line">              a)</span><br><span class="line">         (when (and (looking-at <span class="string">"[ \t]*$"</span>)</span><br><span class="line">                    (string-match <span class="string">"^[ \t]*&amp;lt;\\([a-zA-Z]+\\)$"</span> l)</span><br><span class="line">                    (setq a (assoc (match-string <span class="number">1</span> l) expand-alist)))</span><br><span class="line">           (backward-delete-char (<span class="number">1</span>+ (length (car-safe a))))</span><br><span class="line">           (if (symbolp (cdr-safe a))</span><br><span class="line">               (funcall (cdr-safe a))</span><br><span class="line">             (insert (cdr-safe a)))</span><br><span class="line">           <span class="literal">t</span>)</span><br><span class="line">         ad-do-it))</span><br><span class="line">     )</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
Take emacs-lisp-mode as example, if I want to use <code>&lt;r</code> and press <code>TAB</code>
then yasnippet will expand the command, just add following code:
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> emacs-lisp-mode-expand-alist <span class="quoted">'((<span class="string">"r"</span> . <span class="string">"require"</span>))</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
For c-mode, just do the same but change the relative
<b>major-mode-expand-alist</b> like following
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> c-mode-expand-alist <span class="quoted">'((<span class="string">"i"</span> . <span class="string">"include"</span>))</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org07142d2" class="outline-3">
<h3 id="org07142d2">Debug</h3>
<div class="outline-text-3" id="text-org07142d2">
</div><div id="outline-container-orgcee68a7" class="outline-4">
<h4 id="orgcee68a7">Eval emacs buffer until error</h4>
<div class="outline-text-4" id="text-orgcee68a7">
<p>
A really nice command help me to find error on elisp buffer.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> eval-buffer-until-error <span class="list">()</span></span><br><span class="line">  <span class="string">"Evaluate emacs buffer until error occured."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">while</span> <span class="literal">t</span> <span class="list">(<span class="keyword">eval</span> <span class="list">(<span class="keyword">read</span> <span class="list">(<span class="keyword">current-buffer</span>)</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbeed6e1" class="outline-2">
<h2 id="orgbeed6e1">Org-mode configuration</h2>
<div class="outline-text-2" id="text-orgbeed6e1">
<p>
This part is the customization to org-mode.
</p>
</div>

<div id="outline-container-org5d0ad9a" class="outline-3">
<h3 id="org5d0ad9a">Better defaults to org</h3>
<div class="outline-text-3" id="text-org5d0ad9a">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"> <span class="comment">;; (add-to-list 'auto-mode-alist '("\\.\\(org\\|org_archive\\|txt\\)$" . org-mode))</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-habit</span>)</span></span><br><span class="line"></span><br><span class="line"> <span class="list">(<span class="keyword">setq</span> org-startup-indented <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"> <span class="list">(<span class="keyword">defun</span> org-mode-my-init <span class="list">()</span></span><br><span class="line">   <span class="list">(<span class="keyword">define-key</span> org-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;#215;"</span>)</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"*"</span>)</span>)</span></span><br><span class="line">   <span class="comment">;;(define-key org-mode-map (kbd "&amp;#65293;") (kbd "-"))</span></span><br><span class="line">   <span class="list">(<span class="keyword">define-key</span> org-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;#65288;"</span>)</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"("</span>)</span>)</span></span><br><span class="line">   <span class="list">(<span class="keyword">define-key</span> org-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;#65289;"</span>)</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">")"</span>)</span>)</span></span><br><span class="line">   )</span></span><br><span class="line"> <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">'org-mode-my-init</span>)</span></span><br><span class="line"></span><br><span class="line"> <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">'smartparens-strict-mode</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-startup-with-inline-images <span class="literal">nil</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-image-actual-width <span class="quoted">(<span class="keyword">quote</span> (<span class="number">600</span>))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-format-latex-options <span class="list">(<span class="keyword">plist-put</span> org-format-latex-options <span class="keyword">:scale</span> <span class="number">2.0</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"ou"</span> <span class="string">"Org-latex-preview"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"ouu"</span> <span class="quoted">'org-toggle-latex-fragment</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"ouo"</span> <span class="quoted">'org-preview-latex-fragment</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3432653" class="outline-3">
<h3 id="org3432653">Org-mode auto complete</h3>
<div class="outline-text-3" id="text-org3432653">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">load</span> <span class="string">"~/.spacemacs.d/package/emacscompanywords/company-words-discn"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">'company-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span></span><br><span class="line">          <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">            <span class="list">(<span class="keyword">set</span> <span class="list">(<span class="keyword">make-local-variable</span> <span class="quoted">'company-backends</span>)</span> <span class="quoted">'(company-files company-en-words company-dabbrev)</span>)</span>)</span></span><br><span class="line">          )</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org5ccebb4" class="outline-3">
<h3 id="org5ccebb4">Org-agenda font size</h3>
<div class="outline-text-3" id="text-org5ccebb4">
<p>
Changed the org-agenda font size with the below link methods
<a href="https://emacs-china.org/t/agenda-view/1392" target="_blank" rel="external">https://emacs-china.org/t/agenda-view/1392</a>
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">custom-set-faces</span></span><br><span class="line"> <span class="quoted">'(org-agenda-done ((<span class="literal">t</span> (:foreground <span class="string">"#86dc2f"</span> :height <span class="number">1.0</span>))))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">custom-set-faces</span></span><br><span class="line"> <span class="quoted">'(org-scheduled-today ((<span class="literal">t</span> (:foreground <span class="string">"#bc6ec5"</span> :height <span class="number">1.0</span>))))</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org4c1c3ea" class="outline-3">
<h3 id="org4c1c3ea">Extend org-mode's easy templates</h3>
<div class="outline-text-3" id="text-org4c1c3ea">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">eval-after-load</span> <span class="quoted">'org</span></span><br><span class="line">  <span class="quoted">'(progn</span><br><span class="line">    (add-to-list 'org-structure-template-alist</span><br><span class="line">                 '(<span class="string">"el"</span> <span class="string">"#+BEGIN_SRC emacs-lisp\n\n?\n\n #+END_SRC"</span>))</span><br><span class="line">    (add-to-list 'org-structure-template-alist</span><br><span class="line">                 '(<span class="string">"sh"</span> <span class="string">"#+BEGIN_SRC sh\n\n?\n\n #+END_SRC"</span>))</span><br><span class="line">    (add-to-list 'org-structure-template-alist</span><br><span class="line">                 '(<span class="string">"pl"</span> <span class="string">"#+BEGIN_SRC plantuml :file \n\n?\n\n #+END_SRC"</span>))</span><br><span class="line">    (add-to-list 'org-structure-template-alist</span><br><span class="line">                 '(<span class="string">"ipa"</span> <span class="string">"#+BEGIN_SRC ipython :session :exports both :results output \n\n?\n\n #+END_SRC"</span>))</span><br><span class="line">    (add-to-list 'org-structure-template-alist</span><br><span class="line">                 '(<span class="string">"ipb"</span> <span class="string">"#+BEGIN_SRC ipython :session :exports both :file \n\n?\n\n#+END_SRC"</span>))</span><br><span class="line">    ;; (add-to-list 'org-structure-template-alist</span><br><span class="line">    ;;              '(<span class="string">"p"</span> <span class="string">"#+BEGIN_SRC plantuml :file uml.png \n\n?\n\n#+END_SRC"</span>))</span><br><span class="line">    ;; (add-to-list 'org-structure-template-alist</span><br><span class="line">    ;;              '(<span class="string">"p"</span> <span class="string">"#+BEGIN_SRC plantuml :file uml.png \n\n?\n\n#+END_SRC"</span>))</span><br><span class="line">    )</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgd337a8c" class="outline-3">
<h3 id="orgd337a8c">Org columns and properties</h3>
<div class="outline-text-3" id="text-orgd337a8c">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">eval-after-load</span> <span class="quoted">'org</span></span><br><span class="line">  <span class="quoted">'(progn</span><br><span class="line">     (setq org-columns-default-format <span class="string">"%50ITEM(Task) %CATEGORY %SCHEDULED %5Effort %5CLOCKSUM %PRIORITY"</span>)</span><br><span class="line">     (setq org-global-properties (quote ((<span class="string">"Effort_ALL"</span> . <span class="string">"0:15 0:30 0:45 1:00 2:00 3:00 4:00 5:00 6:00 0:00"</span>)</span><br><span class="line">                                         (<span class="string">"STYLE_ALL"</span> . <span class="string">"habit"</span>))))</span><br><span class="line">     )</span></span><br><span class="line">  )</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7ce04af" class="outline-3">
<h3 id="org7ce04af">Org-ispell</h3>
<div class="outline-text-3" id="text-org7ce04af">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/org-ispell <span class="list">()</span></span><br><span class="line">  <span class="string">"Configure `ispell-skip-region-alist' for `org-mode'."</span></span><br><span class="line">  <span class="list">(<span class="keyword">make-local-variable</span> <span class="quoted">'ispell-skip-region-alist</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'ispell-skip-region-alist</span> <span class="quoted">'(org-property-drawer-re)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'ispell-skip-region-alist</span> <span class="quoted">'(<span class="string">"~"</span> <span class="string">"~"</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'ispell-skip-region-alist</span> <span class="quoted">'(<span class="string">"="</span> <span class="string">"="</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'ispell-skip-region-alist</span> <span class="quoted">'(<span class="string">"^#\\+BEGIN_SRC"</span> . <span class="string">"^#\\+END_SRC"</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">#'lengyueyang/org-ispell</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org1a6eaff" class="outline-3">
<h3 id="org1a6eaff">Org bullets customization</h3>
<div class="outline-text-3" id="text-org1a6eaff">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/post-init-org-bullets <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> org-bullets-bullet-list <span class="quoted">'(<span class="string">"&amp;#9776;"</span> <span class="string">"&amp;#9783;"</span> <span class="string">"&amp;#8919;"</span> <span class="string">"&amp;#8640;"</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">#'lengyueyang/post-init-org-bullets</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgcec4974" class="outline-3">
<h3 id="orgcec4974">Org-notify</h3>
<div class="outline-text-3" id="text-orgcec4974">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-notify</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">org-notify-start</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">org-notify-add</span> <span class="quoted">'appt</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"-1s"</span> <span class="keyword">:period</span> <span class="string">"20s"</span> <span class="keyword">:duration</span> <span class="number">10</span></span><br><span class="line">                        <span class="keyword">:actions</span> (-message -ding))</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"15m"</span> <span class="keyword">:period</span> <span class="string">"2m"</span> <span class="keyword">:duration</span> <span class="number">100</span></span><br><span class="line">                        <span class="keyword">:actions</span> -notify)</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"2h"</span> <span class="keyword">:period</span> <span class="string">"10m"</span> <span class="keyword">:actions</span> -message)</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"3d"</span> <span class="keyword">:period</span> <span class="string">"12h"</span> <span class="keyword">:actions</span> -message)</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"7d"</span> <span class="keyword">:period</span> <span class="string">"24h"</span> <span class="keyword">:actions</span> -message)</span></span><br><span class="line">                <span class="quoted">'(<span class="keyword">:time</span> <span class="string">"30d"</span> <span class="keyword">:actions</span> -email)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgc59fc1d" class="outline-3">
<h3 id="orgc59fc1d">Org-pomodoro</h3>
<div class="outline-text-3" id="text-orgc59fc1d">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; [[https://www.reddit.com/r/emacs/comments/5ayjjl/pomodoro_in_emacs/][Pomodoro in Emacs : emacs]]</span></span><br><span class="line"><span class="list">(<span class="keyword">use-package</span> org-pomodoro</span><br><span class="line">  <span class="keyword">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="keyword">:commands</span> <span class="list">(<span class="keyword">org-pomodoro</span>)</span></span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> alert-user-configuration <span class="quoted">(<span class="keyword">quote</span> ((((:category . <span class="string">"org-pomodoro"</span>)) libnotify <span class="literal">nil</span>)))</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> org-pomodoro-length <span class="number">25</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> org-pomodoro-short-break-length <span class="number">5</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> org-pomodoro-long-break-length <span class="number">30</span>)</span></span><br><span class="line">)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgf834b13" class="outline-3">
<h3 id="orgf834b13">Org-agenda and capture</h3>
<div class="outline-text-3" id="text-orgf834b13">
</div><div id="outline-container-org547e69b" class="outline-4">
<h4 id="org547e69b">Org-agenda</h4>
<div class="outline-text-4" id="text-org547e69b">
<p>
The first agenda configuration, which is not complete. 
</p>

<p>
A complete agenda and capture configuration 
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">eval-after-load</span> <span class="quoted">'org</span></span><br><span class="line">  <span class="quoted">'(progn</span><br><span class="line">     (setq org-agenda-files (quote (<span class="string">"~/Emacs-lengyue/GTD-lengyue"</span></span><br><span class="line">                                    <span class="string">"~/Emacs-lengyue/Wiki-lengyue"</span>)))</span><br><span class="line"></span><br><span class="line">     (setq org-todo-keywords</span><br><span class="line">           (quote ((sequence <span class="string">"TODO(t)"</span> <span class="string">"STARTED(s)"</span> <span class="string">"|"</span> <span class="string">"CANCELLED(c@/!)"</span> <span class="string">"DONE(d!/!)"</span>)</span><br><span class="line">                   (sequence <span class="string">"SOMEDAY(S)"</span> <span class="string">"|"</span> <span class="string">"WAITING(w@/!)"</span>  <span class="string">"MEETING(m)"</span> <span class="string">"PHONE(p)"</span>)</span><br><span class="line">                   (sequence <span class="string">"REPORT(r)"</span> <span class="string">"BUG(b)"</span> <span class="string">"KNOWNCAUSE(k)"</span> <span class="string">"|"</span> <span class="string">"FIXED(f)"</span>)</span><br><span class="line">                   )))</span><br><span class="line"></span><br><span class="line">     (setq org-todo-keyword-faces</span><br><span class="line">           (quote (</span><br><span class="line">                   (<span class="string">"STARTED"</span> :foreground <span class="string">"magenta"</span> :weight bold)</span><br><span class="line">     ;;               (<span class="string">"NEXT"</span> :foreground <span class="string">"blue"</span> :weight bold)</span><br><span class="line">     ;;               (<span class="string">"DONE"</span> :foreground <span class="string">"forest green"</span> :weight bold)</span><br><span class="line">                   (<span class="string">"WAITING"</span> :foreground <span class="string">"red"</span> :weight bold)</span><br><span class="line">     ;;               (<span class="string">"HOLD"</span> :foreground <span class="string">"magenta"</span> :weight bold)</span><br><span class="line">     ;;               (<span class="string">"CANCELLED"</span> :foreground <span class="string">"forest green"</span> :weight bold)</span><br><span class="line">     ;;               (<span class="string">"MEETING"</span> :foreground <span class="string">"forest green"</span> :weight bold)</span><br><span class="line">                   ;;               (<span class="string">"PHONE"</span> :foreground <span class="string">"forest green"</span> :weight bold)</span><br><span class="line">                   )))</span><br><span class="line"></span><br><span class="line">     (setq org-refile-targets</span><br><span class="line">           '((<span class="string">"~/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org"</span> :maxlevel . <span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">     (setq org-log-into-drawer <span class="literal">t</span>)</span><br><span class="line">     (setq org-agenda-custom-commands</span><br><span class="line">        '(</span><br><span class="line">          (<span class="string">"b"</span> <span class="string">"Blog idea"</span> tags-todo <span class="string">"BLOG"</span>)</span><br><span class="line">          (<span class="string">"s"</span> <span class="string">"Someday"</span> todo <span class="string">"SOMEDAY"</span>)</span><br><span class="line">          (<span class="string">"S"</span> <span class="string">"Started"</span> todo <span class="string">"STARTED"</span>)</span><br><span class="line">          (<span class="string">"w"</span> <span class="string">"Waiting"</span> todo <span class="string">"WAITING"</span>)</span><br><span class="line">          (<span class="string">"d"</span> . <span class="string">" &amp;#20219;&amp;#21153;&amp;#23433;&amp;#25490; "</span>)</span><br><span class="line">          (<span class="string">"da"</span> <span class="string">" &amp;#37325;&amp;#35201;&amp;#19988;&amp;#32039;&amp;#24613;&amp;#30340;&amp;#20219;&amp;#21153; "</span> tags-todo <span class="string">"+PRIORITY=\"A\""</span>)</span><br><span class="line">          (<span class="string">"db"</span> <span class="string">" &amp;#37325;&amp;#35201;&amp;#19988;&amp;#19981;&amp;#32039;&amp;#24613;&amp;#30340;&amp;#20219;&amp;#21153; "</span> tags-todo <span class="string">"+PRIORITY=\"B\""</span>)</span><br><span class="line">          (<span class="string">"dc"</span> <span class="string">" &amp;#19981;&amp;#37325;&amp;#35201;&amp;#19988;&amp;#32039;&amp;#24613;&amp;#30340;&amp;#20219;&amp;#21153; "</span> tags-todo <span class="string">"+PRIORITY=\"C\""</span>)</span><br><span class="line">          (<span class="string">"p"</span> . <span class="string">" &amp;#39033;&amp;#30446;&amp;#23433;&amp;#25490; "</span>)</span><br><span class="line">          (<span class="string">"W"</span> <span class="string">"Weekly Review"</span> tags-todo <span class="string">"PROJECT"</span>)</span><br><span class="line">            ))</span><br><span class="line">     )</span></span><br><span class="line">  )</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-summary-todo <span class="list">(<span class="keyword">n-done</span> n-not-done)</span></span><br><span class="line">  <span class="string">"Switch entry to DONE when all subentries are done, to TODO otherwise."</span></span><br><span class="line">  <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="keyword">org-log-done</span> org-log-states)</span>  <span class="comment">; turn off logging</span></span><br><span class="line">    <span class="list">(<span class="keyword">org-todo</span> <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">=</span> n-not-done <span class="number">0</span>)</span> <span class="string">"DONE"</span> <span class="string">"TODO"</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span><span class="quoted">'org-after-todo-statistics-hook</span> <span class="quoted">'org-summary-todo</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;   ;;used by org-clock-sum-today-by-tags</span></span><br><span class="line"><span class="comment">;; (defun filter-by-tags ()</span></span><br><span class="line"><span class="comment">;;     (let ((head-tags (org-get-tags-at)))</span></span><br><span class="line"><span class="comment">;;       (member current-tag head-tags)))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; (defun org-clock-sum-today-by-tags (timerange &amp;amp;optional tstart tend noinsert)</span></span><br><span class="line"><span class="comment">;;     (interactive "P")</span></span><br><span class="line"><span class="comment">;;     (let* ((timerange-numeric-value (prefix-numeric-value timerange))</span></span><br><span class="line"><span class="comment">;;            (files (org-add-archive-files (org-agenda-files)))</span></span><br><span class="line"><span class="comment">;;            (include-tags'("PROG" "EMACS" "DREAM" "WRITING" "MEETING" "BLOG" "LIFE" "PROJECT"))</span></span><br><span class="line"><span class="comment">;;            (tags-time-alist (mapcar (lambda (tag) `(,tag . 0)) include-tags))</span></span><br><span class="line"><span class="comment">;;            (output-string "")</span></span><br><span class="line"><span class="comment">;;            (tstart (or tstart</span></span><br><span class="line"><span class="comment">;;                        (and timerange (equal timerange-numeric-value 4) (- (org-time-today) 86400))</span></span><br><span class="line"><span class="comment">;;                        (and timerange (equal timerange-numeric-value 16) (org-read-date nil nil nil "Start Date/Time:"))</span></span><br><span class="line"><span class="comment">;;                        (org-time-today)))</span></span><br><span class="line"><span class="comment">;;            (tend (or tend</span></span><br><span class="line"><span class="comment">;;                      (and timerange (equal timerange-numeric-value 16) (org-read-date nil nil nil "End Date/Time:"))</span></span><br><span class="line"><span class="comment">;;                      (+ tstart 86400)))</span></span><br><span class="line"><span class="comment">;;            h m file item prompt donesomething)</span></span><br><span class="line"><span class="comment">;;       (while (setq file (pop files))</span></span><br><span class="line"><span class="comment">;;         (setq org-agenda-buffer (if (file-exists-p file)</span></span><br><span class="line"><span class="comment">;;                                     (org-get-agenda-file-buffer file)</span></span><br><span class="line"><span class="comment">;;                                   (error "No such file %s" file)))</span></span><br><span class="line"><span class="comment">;;         (with-current-buffer org-agenda-buffer</span></span><br><span class="line"><span class="comment">;;           (dolist (current-tag include-tags)</span></span><br><span class="line"><span class="comment">;;             (org-clock-sum tstart tend'filter-by-tags)</span></span><br><span class="line"><span class="comment">;;             (setcdr (assoc current-tag tags-time-alist)</span></span><br><span class="line"><span class="comment">;;                     (+ org-clock-file-total-minutes (cdr (assoc current-tag tags-time-alist)))))))</span></span><br><span class="line"><span class="comment">;;       (while (setq item (pop tags-time-alist))</span></span><br><span class="line"><span class="comment">;;         (unless (equal (cdr item) 0)</span></span><br><span class="line"><span class="comment">;;           (setq donesomething t)</span></span><br><span class="line"><span class="comment">;;           (setq h (/ (cdr item) 60)</span></span><br><span class="line"><span class="comment">;;                 m (- (cdr item) (* 60 h)))</span></span><br><span class="line"><span class="comment">;;           (setq output-string (concat output-string (format "[-%s-] %.2d:%.2d\n" (car item) h m)))))</span></span><br><span class="line"><span class="comment">;;       (unless donesomething</span></span><br><span class="line"><span class="comment">;;         (setq output-string (concat output-string "[-Nothing-] Done nothing!!!\n")))</span></span><br><span class="line"><span class="comment">;;       (unless noinsert</span></span><br><span class="line"><span class="comment">;;         (insert output-string))</span></span><br><span class="line"><span class="comment">;;       output-string))</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3bc5f9d" class="outline-4">
<h4 id="org3bc5f9d">Org-capture</h4>
<div class="outline-text-4" id="text-org3bc5f9d">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">define-key</span> global-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f9&amp;gt;"</span>)</span> <span class="quoted">'org-capture</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oc"</span> <span class="quoted">'org-capture</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-capture-templates</span><br><span class="line">      <span class="quoted">'((<span class="string">"b"</span> <span class="string">"Blog Ideas"</span> entry (file+headline <span class="string">"~/Emacs-lengyue/Wiki-lengyue/Notes.org"</span> <span class="string">"Blog Ideas"</span>)</span><br><span class="line">         <span class="string">"* TODO %?\n%i%U"</span></span><br><span class="line">         :empty-lines <span class="number">1</span>)</span><br><span class="line">        (<span class="string">"s"</span> <span class="string">"Someday/Maybe"</span> entry (file+headline <span class="string">"~/Emacs-lengyue/Wiki-lengyue/Notes.org"</span> <span class="string">"Someday/Maybe"</span>)</span><br><span class="line">         <span class="string">"* SOMEDAY %?\n%i%U"</span></span><br><span class="line">         :empty-lines <span class="number">1</span>)</span><br><span class="line">        (<span class="string">"m"</span> <span class="string">"Myself Tasks"</span> entry (file+headline <span class="string">"~/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org"</span> <span class="string">"Myself Tasks"</span>)</span><br><span class="line">         <span class="string">"* TODO %?\n%i%U"</span></span><br><span class="line">         :empty-lines <span class="number">1</span>)</span><br><span class="line">        (<span class="string">"r"</span> <span class="string">"Work Related Tasks"</span> entry (file+headline <span class="string">"~/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org"</span> <span class="string">"Work Related Tasks"</span>)</span><br><span class="line">         <span class="string">"* TODO %?\n%i%U"</span></span><br><span class="line">         :empty-lines <span class="number">1</span>)</span><br><span class="line">        (<span class="string">"w"</span> <span class="string">"Web site"</span> entry (file <span class="string">"~/Emacs-lengyue/Wiki-lengyue/Bookmark.org"</span>)</span><br><span class="line">         <span class="string">"* %c :website:\n%?\n%U %:initial"</span></span><br><span class="line">         :empty-lines <span class="number">1</span>)</span><br><span class="line">        )</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org751bd28" class="outline-3">
<h3 id="org751bd28">Add bookmark to orgmode</h3>
<div class="outline-text-3" id="text-org751bd28">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/org-protocol-capture-html"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">server-start</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-protocol</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-protocol-capture-html</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgd1129f3" class="outline-3">
<h3 id="orgd1129f3">Org-babel customizaton</h3>
<div class="outline-text-3" id="text-orgd1129f3">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-confirm-babel-evaluate <span class="literal">nil</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-plantuml-jar-path</span><br><span class="line">      <span class="list">(<span class="keyword">expand-file-name</span> <span class="string">"/opt/plantuml/plantuml.jar"</span>)</span>)</span></span><br><span class="line"><span class="comment">;; (setq org-ditta-jar-path</span></span><br><span class="line"><span class="comment">;;  (expand-file-name "/usr/share/java/ditaa/ditaa-0_9.jar"))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">eval-after-load</span> <span class="quoted">'org</span></span><br><span class="line">  <span class="quoted">'(progn</span><br><span class="line">     (defun lengyueyang/org-insert-src-block (src-code-type)</span><br><span class="line">       <span class="string">"Insert a `SRC-CODE-TYPE' type source code block in org-mode."</span></span><br><span class="line">       (interactive</span><br><span class="line">        (let ((src-code-types</span><br><span class="line">               '(<span class="string">"emacs-lisp"</span> <span class="string">"python"</span> <span class="string">"C"</span> <span class="string">"sh"</span> <span class="string">"java"</span> <span class="string">"js"</span> <span class="string">"clojure"</span> <span class="string">"C++"</span> <span class="string">"css"</span></span><br><span class="line">                 <span class="string">"calc"</span> <span class="string">"asymptote"</span> <span class="string">"dot"</span> <span class="string">"gnuplot"</span> <span class="string">"ledger"</span> <span class="string">"lilypond"</span> <span class="string">"mscgen"</span></span><br><span class="line">                 <span class="string">"octave"</span> <span class="string">"oz"</span> <span class="string">"plantuml"</span> <span class="string">"R"</span> <span class="string">"sass"</span> <span class="string">"screen"</span> <span class="string">"sql"</span> <span class="string">"awk"</span> <span class="string">"ditaa"</span></span><br><span class="line">                 <span class="string">"haskell"</span> <span class="string">"latex"</span> <span class="string">"lisp"</span> <span class="string">"matlab"</span> <span class="string">"ocaml"</span> <span class="string">"org"</span> <span class="string">"perl"</span> <span class="string">"ruby"</span></span><br><span class="line">                 <span class="string">"scheme"</span> <span class="string">"sqlite"</span> <span class="string">"ipython"</span>)))</span><br><span class="line">          (list (ido-completing-read <span class="string">"Source code type: "</span> src-code-types))))</span><br><span class="line">       (progn</span><br><span class="line">         (newline-and-indent)</span><br><span class="line">         (insert (format <span class="string">"#+BEGIN_SRC %s\n"</span> src-code-type))</span><br><span class="line">         (newline-and-indent)</span><br><span class="line">         (insert <span class="string">"#+END_SRC\n"</span>)</span><br><span class="line">         (previous-line <span class="number">2</span>)</span><br><span class="line">         (org-edit-src-code)))</span><br><span class="line"></span><br><span class="line">     (add-hook 'org-mode-hook '(lambda ()</span><br><span class="line">                                 ;; keybinding for editing source code blocks</span><br><span class="line">                                 ;; keybinding for inserting code blocks</span><br><span class="line">                                 (local-set-key (kbd <span class="string">"C-c i s"</span>)</span><br><span class="line">                                                'lengyueyang/org-insert-src-block)</span><br><span class="line">                                 ))</span><br><span class="line"></span><br><span class="line">     (org-babel-do-load-languages</span><br><span class="line">      'org-babel-load-languages</span><br><span class="line">      '((perl . <span class="literal">t</span>)</span><br><span class="line">        (ruby . <span class="literal">t</span>)</span><br><span class="line">        (sh . <span class="literal">t</span>)</span><br><span class="line">        (js . <span class="literal">t</span>)</span><br><span class="line">        (python . <span class="literal">t</span>)</span><br><span class="line">        (ipython . <span class="literal">t</span>)</span><br><span class="line">        (emacs-lisp . <span class="literal">t</span>)</span><br><span class="line">        (plantuml . <span class="literal">t</span>)</span><br><span class="line">        (R . <span class="literal">t</span>)</span><br><span class="line">        (dot . <span class="literal">t</span>)</span><br><span class="line">        (gnuplot . <span class="literal">t</span>)</span><br><span class="line">        (latex . <span class="literal">t</span>)</span><br><span class="line">        (C . <span class="literal">t</span>)</span><br><span class="line">        (octave . <span class="literal">t</span>)</span><br><span class="line">        (ditaa . <span class="literal">t</span>)))</span><br><span class="line">     )</span></span><br><span class="line">  )</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">;; Resume clocking task when emacs is restarted</span></span><br><span class="line"><span class="list">(<span class="keyword">org-clock-persistence-insinuate</span>)</span></span><br><span class="line"><span class="comment">;; Save the running clock and all clock history when exiting Emacs, load it on startup</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-clock-persist <span class="literal">t</span>)</span></span><br><span class="line"><span class="comment">;; Do not prompt to resume an active clock</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-clock-persist-query-resume <span class="literal">nil</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org5c96de7" class="outline-3">
<h3 id="org5c96de7">Ob-ipython and Jupter notebook</h3>
<div class="outline-text-3" id="text-org5c96de7">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'ob-ipython</span>)</span></span><br><span class="line"><span class="comment">;; (setq org-babel-python-command "/usr/bin/ipython --pylab --pdb --nosep")</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> python-shell-prompt-detect-failure-warning <span class="literal">nil</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-babel-after-execute-hook</span> <span class="quoted">'org-display-inline-images</span> <span class="quoted">'append</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org93a6e25" class="outline-3">
<h3 id="org93a6e25">Setup link abbreviations</h3>
<div class="outline-text-3" id="text-org93a6e25">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/org/Link-abbreviations.html" target="_blank" rel="external">Link abbreviations</a>
</p>

<p>
An abbreviated link looks like
</p>

<pre class="example">
[[linkword:tag][description]]
</pre>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-link-abbrev-alist</span><br><span class="line">      <span class="quoted">'((<span class="string">"google"</span> . <span class="string">"http://www.google.com/search?q="</span>)</span><br><span class="line">        (<span class="string">"google-map"</span> . <span class="string">"http://maps.google.com/maps?q=%s"</span>)</span><br><span class="line">        )</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgbd2c6ff" class="outline-3">
<h3 id="orgbd2c6ff">Org-subtask and org-checklist</h3>
<div class="outline-text-3" id="text-orgbd2c6ff">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/org-subtask-reset"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-subtask-reset</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/org-checklist"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-checklist</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgeb2dbe0" class="outline-3">
<h3 id="orgeb2dbe0">Org-archive-all-tasks</h3>
<div class="outline-text-3" id="text-orgeb2dbe0">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang//org-archive-tasks <span class="list">(<span class="keyword">prefix</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">org-map-entries</span></span><br><span class="line">   <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">     <span class="list">(<span class="keyword">org-archive-subtree</span>)</span></span><br><span class="line">     <span class="list">(<span class="keyword">setq</span> org-map-continue-from <span class="list">(<span class="keyword">outline-previous-heading</span>)</span>)</span>)</span></span><br><span class="line">   <span class="list">(<span class="keyword">format</span> <span class="string">"/%s"</span> prefix)</span> <span class="quoted">'file</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/org-archive-all-tasks <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">lengyueyang//org-archive-tasks</span> <span class="string">"DONE"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">lengyueyang//org-archive-tasks</span> <span class="string">"CANCELLED"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">lengyueyang//org-archive-tasks</span> <span class="string">"FIXED"</span>)</span></span><br><span class="line">  )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; org-archive-subtree-hierarchical.el</span></span><br><span class="line"><span class="comment">;; modified from https://lists.gnu.org/archive/html/emacs-orgmode/2014-08/msg00109.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; In orgmode</span></span><br><span class="line"><span class="comment">;; * A</span></span><br><span class="line"><span class="comment">;; ** AA</span></span><br><span class="line"><span class="comment">;; *** AAA</span></span><br><span class="line"><span class="comment">;; ** AB</span></span><br><span class="line"><span class="comment">;; *** ABA</span></span><br><span class="line"><span class="comment">;; Archiving AA will remove the subtree from the original file and create</span></span><br><span class="line"><span class="comment">;; it like that in archive target:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; * AA</span></span><br><span class="line"><span class="comment">;; ** AAA</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; And this give you</span></span><br><span class="line"><span class="comment">;; * A</span></span><br><span class="line"><span class="comment">;; ** AA</span></span><br><span class="line"><span class="comment">;; *** AAA</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'org-archive</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-archive-subtree-hierarchical--line-content-as-string <span class="list">()</span></span><br><span class="line">  <span class="string">"Returns the content of the current line as a string"</span></span><br><span class="line">  <span class="list">(<span class="keyword">save-excursion</span></span><br><span class="line">    <span class="list">(<span class="keyword">beginning-of-line</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">buffer-substring-no-properties</span></span><br><span class="line">     <span class="list">(<span class="keyword">line-beginning-position</span>)</span> <span class="list">(<span class="keyword">line-end-position</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-archive-subtree-hierarchical--org-child-list <span class="list">()</span></span><br><span class="line">  <span class="string">"This function returns all children of a heading as a list. "</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">save-excursion</span></span><br><span class="line">    <span class="comment">;; this only works with org-version &amp;gt; 8.0, since in previous</span></span><br><span class="line">    <span class="comment">;; org-mode versions the function (org-outline-level) returns</span></span><br><span class="line">    <span class="comment">;; gargabe when the point is not on a heading.</span></span><br><span class="line">    <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">=</span> <span class="list">(<span class="keyword">org-outline-level</span>)</span> <span class="number">0</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">outline-next-visible-heading</span> <span class="number">1</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">org-goto-first-child</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">child-list</span> <span class="list">(<span class="keyword">list</span> <span class="list">(<span class="keyword">org-archive-subtree-hierarchical--line-content-as-string</span>)</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">org-goto-sibling</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">setq</span> child-list <span class="list">(<span class="keyword">cons</span> <span class="list">(<span class="keyword">org-archive-subtree-hierarchical--line-content-as-string</span>)</span> child-list)</span>)</span>)</span></span><br><span class="line">      child-list)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-archive-subtree-hierarchical--org-struct-subtree <span class="list">()</span></span><br><span class="line">  <span class="string">"This function returns the tree structure in which a subtree</span><br><span class="line">belongs as a list."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">archive-tree</span> <span class="literal">nil</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">save-excursion</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">org-up-heading-safe</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">heading</span></span><br><span class="line">               <span class="list">(<span class="keyword">buffer-substring-no-properties</span></span><br><span class="line">                <span class="list">(<span class="keyword">line-beginning-position</span>)</span> <span class="list">(<span class="keyword">line-end-position</span>)</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">eq</span> archive-tree <span class="literal">nil</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">setq</span> archive-tree <span class="list">(<span class="keyword">list</span> heading)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">setq</span> archive-tree <span class="list">(<span class="keyword">cons</span> heading archive-tree)</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line">    archive-tree)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-archive-subtree-hierarchical <span class="list">()</span></span><br><span class="line">  <span class="string">"This function archives a subtree hierarchical"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">org-tree</span> <span class="list">(<span class="keyword">org-archive-subtree-hierarchical--org-struct-subtree</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">this-buffer</span> <span class="list">(<span class="keyword">current-buffer</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">file</span> <span class="list">(<span class="keyword">abbreviate-file-name</span></span><br><span class="line">               <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">buffer-file-name</span> <span class="list">(<span class="keyword">buffer-base-buffer</span>)</span>)</span></span><br><span class="line">                   <span class="list">(<span class="keyword">error</span> <span class="string">"No file associated to buffer"</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">save-excursion</span></span><br><span class="line">      <span class="list">(<span class="keyword">setq</span> location <span class="list">(<span class="keyword">org-get-local-archive-location</span>)</span></span><br><span class="line">            afile <span class="list">(<span class="keyword">org-extract-archive-file</span> location)</span></span><br><span class="line">            heading <span class="list">(<span class="keyword">org-extract-archive-heading</span> location)</span></span><br><span class="line">            infile-p <span class="list">(<span class="keyword">equal</span> file <span class="list">(<span class="keyword">abbreviate-file-name</span> <span class="list">(<span class="keyword">or</span> afile <span class="string">""</span>)</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">unless</span> afile</span><br><span class="line">        <span class="list">(<span class="keyword">error</span> <span class="string">"Invalid `org-archive-location'"</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (length afile) 0)</span></span><br><span class="line">          <span class="list">(<span class="keyword">setq</span> newfile-p <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">file-exists-p</span> afile)</span>)</span></span><br><span class="line">                visiting <span class="list">(<span class="keyword">find-buffer-visiting</span> afile)</span></span><br><span class="line">                buffer <span class="list">(<span class="keyword">or</span> visiting <span class="list">(<span class="keyword">find-file-noselect</span> afile)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">setq</span> buffer <span class="list">(<span class="keyword">current-buffer</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">unless</span> buffer</span><br><span class="line">        <span class="list">(<span class="keyword">error</span> <span class="string">"Cannot access file \"%s\""</span> afile)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">org-cut-subtree</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">set-buffer</span> buffer)</span></span><br><span class="line">      <span class="list">(<span class="keyword">org-mode</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">equal</span> org-tree <span class="literal">nil</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">child-list</span> <span class="list">(<span class="keyword">org-archive-subtree-hierarchical--org-child-list</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">member</span> <span class="list">(<span class="keyword">car</span> org-tree)</span> child-list)</span></span><br><span class="line">              <span class="list">(<span class="keyword">progn</span></span><br><span class="line">                <span class="list">(<span class="keyword">search-forward</span> <span class="list">(<span class="keyword">car</span> org-tree)</span> <span class="literal">nil</span> <span class="literal">t</span>)</span></span><br><span class="line">                <span class="list">(<span class="keyword">setq</span> org-tree <span class="list">(<span class="keyword">cdr</span> org-tree)</span>)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">progn</span></span><br><span class="line">              <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-max</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">newline</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">org-insert-struct</span> org-tree)</span></span><br><span class="line">              <span class="list">(<span class="keyword">setq</span> org-tree <span class="literal">nil</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">newline</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">org-yank</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">eq</span> this-buffer buffer)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">save-buffer</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">message</span> <span class="string">"Subtree archived %s"</span></span><br><span class="line">               <span class="list">(<span class="keyword">concat</span> <span class="string">"in file: "</span> <span class="list">(<span class="keyword">abbreviate-file-name</span> afile)</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-insert-struct <span class="list">(<span class="keyword">struct</span>)</span></span><br><span class="line">  <span class="string">"TODO"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">when</span> struct</span><br><span class="line">    <span class="list">(<span class="keyword">insert</span> <span class="list">(<span class="keyword">car</span> struct)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">newline</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">org-insert-struct</span> <span class="list">(<span class="keyword">cdr</span> struct)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> org-archive-subtree <span class="list">()</span></span><br><span class="line">  <span class="list">(<span class="keyword">org-archive-subtree-hierarchical</span>)</span></span><br><span class="line">)</span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgb6d16bc" class="outline-3">
<h3 id="orgb6d16bc">Org-ref customize</h3>
<div class="outline-text-3" id="text-orgb6d16bc">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> reftex-default-bibliography <span class="quoted">'(<span class="string">"~/Emacs-lengyue/Papers/references.bib"</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-ref-default-bibliography <span class="quoted">'(<span class="string">"~/Emacs-lengyue/Papers/references.bib"</span>)</span></span><br><span class="line">      org-ref-pdf-directory <span class="string">"~/Emacs-lengyue/Papers/"</span></span><br><span class="line">      org-ref-bibliography-notes <span class="string">"~/Emacs-lengyue/Papers/notes.org"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-ref-completion-library <span class="quoted">'org-ref-ivy-cite</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org432c531" class="outline-2">
<h2 id="org432c531">Programming Languages</h2>
<div class="outline-text-2" id="text-org432c531">
<p>
This part is the customization to programming languages.
</p>
</div>

<div id="outline-container-orge518e04" class="outline-3">
<h3 id="orge518e04">Yasnippet</h3>
<div class="outline-text-3" id="text-orge518e04">
<p>
Yasnippet allows you to type an abbreviation and then expand it into a template. We can look at yasnippet’s documentation on github.
</p>

<p>
Yasnippet by default checks for snippets in two places: a path relative to yasnippet.el (these are the default snippets that come with the package). If I want to make my own, I can put then in .spacemacs.d/snippets and it should find them there as well.
</p>

<p>
I downloads some snippets from web like <a href="https://github.com/AndreaCrotti/yasnippet-snippets" target="_blank" rel="external">yasnippet-snippets</a> and <a href="https://github.com/howardabrams/dot-files" target="_blank" rel="external">dot-file</a> then I defined some snippets of mine.
</p>

<p>
You can use the tab key to expand a snippet once you’ve typed in the “key”. It’s pretty smart in that if tab fails for yasnippet, it then checks for whatever tab was originally bound to.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> yas-snippet-dirs</span><br><span class="line">      <span class="quoted">'(<span class="string">"~/.spacemacs.d/snippets/lengyueyang-snippets"</span></span><br><span class="line">        <span class="string">"~/.spacemacs.d/snippets/dot-files-snippets/"</span></span><br><span class="line">        <span class="string">"~/.spacemacs.d/snippets/yasnippet-snippets/"</span></span><br><span class="line">        <span class="string">"~/.spacemacs.d/snippets/lengyueyang-snippets/"</span></span><br><span class="line">        )</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">yas-global-mode</span> <span class="number">1</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c y i"</span>)</span> <span class="quoted">'yas-insert-snippet</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c y n"</span>)</span> <span class="quoted">'yas-new-snippet</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c y t"</span>)</span> <span class="quoted">'yas-expand-from-trigger-key</span>)</span></span><br><span class="line"><span class="comment">;;(global-set-key (kbd "C-c i e") 'spacemacs/auto-yasnippet-expand)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"oy"</span> <span class="string">"Yasnippet"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oyi"</span> <span class="quoted">'yas-insert-snippet</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oyn"</span> <span class="quoted">'yas-new-snippet</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oyt"</span> <span class="quoted">'yas-expand-from-trigger-key</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orga5af4e7" class="outline-3">
<h3 id="orga5af4e7">Add support for editorconfig</h3>
<div class="outline-text-3" id="text-orga5af4e7">
<p>
<a href="http://editorconfig.org/" target="_blank" rel="external">EditorConfig</a> helps developers define and maintain consistent coding
styles between different editors and IDEs. The EditorConfig project
consists of a file format for defining coding styles and a collection
of text editor plugins that enable editors to read the file format and
adhere to defined styles. EditorConfig files are easily readable and
they work nicely with version control systems.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">use-package</span> editorconfig</span><br><span class="line">  <span class="keyword">:ensure</span> <span class="literal">t</span></span><br><span class="line">  <span class="keyword">:init</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'prog-mode-hook</span> <span class="list">(<span class="keyword">editorconfig-mode</span> <span class="number">1</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'text-mode-hook</span> <span class="list">(<span class="keyword">editorconfig-mode</span> <span class="number">1</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgc905d5b" class="outline-3">
<h3 id="orgc905d5b">Ess and R</h3>
<div class="outline-text-3" id="text-orgc905d5b">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'smartparens-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'company-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'smartparens-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org1a0e499" class="outline-3">
<h3 id="org1a0e499">Python</h3>
<div class="outline-text-3" id="text-org1a0e499">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'python-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> python-fill-column <span class="number">80</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-python-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-python-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orge5ca974" class="outline-3">
<h3 id="orge5ca974">JS-2 mode</h3>
<div class="outline-text-3" id="text-orge5ca974">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">use-package</span> nodejs-repl</span><br><span class="line">  <span class="keyword">:init</span></span><br><span class="line">  <span class="keyword">:defer</span> <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/nodejs-repl-eval"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">use-package</span> nodejs-repl-eval</span><br><span class="line">  <span class="keyword">:commands</span> <span class="list">(<span class="keyword">nodejs-repl-eval-buffer</span> nodejs-repl-eval-dwim nodejs-repl-eval-function)</span></span><br><span class="line">  <span class="keyword">:init</span></span><br><span class="line">  <span class="list">(<span class="keyword">progn</span></span><br><span class="line">    <span class="list">(<span class="keyword">spacemacs/declare-prefix-for-mode</span> <span class="quoted">'js2-mode</span></span><br><span class="line">                                       <span class="string">"mo"</span> <span class="string">"Nodejs-repl"</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">spacemacs/set-leader-keys-for-major-mode</span> <span class="quoted">'js2-mode</span></span><br><span class="line">      <span class="string">"oo"</span> <span class="quoted">'nodejs-repl</span></span><br><span class="line">      <span class="string">"ob"</span> <span class="quoted">'nodejs-repl-eval-buffer</span></span><br><span class="line">      <span class="string">"of"</span> <span class="quoted">'nodejs-repl-eval-function</span></span><br><span class="line">      <span class="string">"od"</span> <span class="quoted">'nodejs-repl-eval-dwim</span>)</span>)</span></span><br><span class="line">  <span class="keyword">:defer</span> <span class="literal">t</span></span><br><span class="line">  )</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org4a4885d" class="outline-3">
<h3 id="org4a4885d">Elisp enhanced</h3>
<div class="outline-text-3" id="text-org4a4885d">
</div><div id="outline-container-org6ef72b2" class="outline-4">
<h4 id="org6ef72b2">Emacs Lisp 自动配对问题</h4>
<div class="outline-text-4" id="text-org6ef72b2">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">sp-local-pair</span> <span class="quoted">'(emacs-lisp-mode lisp-interaction-mode)</span> <span class="string">"'"</span> <span class="literal">nil</span> <span class="keyword">:actions</span> <span class="literal">nil</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb75d81f" class="outline-2">
<h2 id="orgb75d81f">External package besides spacemacs</h2>
<div class="outline-text-2" id="text-orgb75d81f">
</div><div id="outline-container-org2c70e89" class="outline-3">
<h3 id="org2c70e89">Use emmet-mode to add Zen Coding support</h3>
<div class="outline-text-3" id="text-org2c70e89">
<p>
<a href="https://github.com/smihica/emmet-mode" target="_blank" rel="external">emmet-mode</a> is a fork of <a href="https://github.com/rooney/zencoding" target="_blank" rel="external">zencoding-mode</a> which add minor mode providing support
for Zen Coding by producing HTML from CSS-like selectors.
</p>

<p>
GitHub: <a href="https://github.com/smihica/emmet-mode" target="_blank" rel="external">https://github.com/smihica/emmet-mode</a>
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">req-package</span> emmet-mode</span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line">  <span class="list">(<span class="keyword">progn</span></span><br><span class="line">    <span class="comment">;; Following mode support emmet-mode</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'html-mode-hook</span> <span class="quoted">'emmet-mode</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'sgml-mode-hook</span> <span class="quoted">'emmet-mode</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'nxml-mode-hook</span> <span class="quoted">'emmet-mode</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'css-mode-hook</span>  <span class="quoted">'emmet-mode</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">;; Move cursor between quotes after expand</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'emmt-mode-hook</span></span><br><span class="line">              <span class="quoted">'(lambda()</span><br><span class="line">                 (setq emmet-move-cursor-between-quotes <span class="literal">t</span>))</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">;; Make tab can also expand emmt instead of use yasnippet directly</span></span><br><span class="line">    <span class="list">(<span class="keyword">define-key</span> emmt-mode-keymap <span class="list">(<span class="keyword">kbd</span> <span class="string">"TAB"</span>)</span> <span class="quoted">'emmt-expand-yas</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">define-key</span> emmt-mode-keymap <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;tab&amp;gt;"</span>)</span> <span class="quoted">'emmt-expand-yas</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orga566ce4" class="outline-3">
<h3 id="orga566ce4">Hungry-delete</h3>
<div class="outline-text-3" id="text-orga566ce4">
<p>
<a href="https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-hungry-delete.el" target="_blank" rel="external">https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-hungry-delete.el</a>
</p>

<p>
<a href="https://github.com/nflath/hungry-delete" target="_blank" rel="external">hungry-delete</a> borrows hungry deletion from <code>cc-mode</code>, which will causes deletion
to delete all whitespace in the direction you are deleting.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">use-package</span> hungry-delete</span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line">  <span class="list">(<span class="keyword">progn</span></span><br><span class="line">    <span class="list">(<span class="keyword">setq</span> hungry-delete-chars-to-skip <span class="string">" \t\r\f\v"</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">;; Mon Nov 21 08:45:42 EST 2016 - kmodi</span></span><br><span class="line">    <span class="comment">;; Override the default definitions of `hungry-delete-skip-ws-forward' and</span></span><br><span class="line">    <span class="comment">;; `hungry-delete-skip-ws-backward'; do not delete back-slashes at EOL.</span></span><br><span class="line">    <span class="list">(<span class="keyword">defun</span> hungry-delete-skip-ws-forward <span class="list">()</span></span><br><span class="line">      <span class="string">"Skip over any whitespace following point.</span><br><span class="line">This function skips over horizontal and vertical whitespace."</span></span><br><span class="line">      <span class="list">(<span class="keyword">skip-chars-forward</span> hungry-delete-chars-to-skip)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">get-text-property</span> <span class="list">(<span class="keyword">point</span>)</span> <span class="quoted">'read-only</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">backward-char</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="list">(<span class="keyword">defun</span> hungry-delete-skip-ws-backward <span class="list">()</span></span><br><span class="line">      <span class="string">"Skip over any whitespace preceding point.</span><br><span class="line">This function skips over horizontal and vertical whitespace."</span></span><br><span class="line">      <span class="list">(<span class="keyword">skip-chars-backward</span> hungry-delete-chars-to-skip)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">get-text-property</span> <span class="list">(<span class="keyword">point</span>)</span> <span class="quoted">'read-only</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">forward-char</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="list">(<span class="keyword">defun</span> modi/turn-off-hungry-delete-mode <span class="list">()</span></span><br><span class="line">      <span class="string">"Turn off hungry delete mode."</span></span><br><span class="line">      <span class="list">(<span class="keyword">hungry-delete-mode</span> <span class="number">-1</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">;; Enable `hungry-delete-mode' everywhere ..</span></span><br><span class="line">    <span class="list">(<span class="keyword">global-hungry-delete-mode</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">;; Except ..</span></span><br><span class="line">    <span class="comment">;; `hungry-delete-mode'-loaded backspace does not work in `wdired-mode',</span></span><br><span class="line">    <span class="comment">;; i.e. when editing file names in the *Dired* buffer.</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'wdired-mode-hook</span> <span class="quoted">#'modi/turn-off-hungry-delete-mode</span>)</span></span><br><span class="line">    <span class="comment">;; and in python-mode-hook</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'python-mode-hook</span> <span class="quoted">#'modi/turn-off-hungry-delete-mode</span>)</span></span><br><span class="line">    <span class="comment">;; and in minibuffer</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'minibuffer-setup-hook</span> <span class="quoted">#'modi/turn-off-hungry-delete-mode</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org2dfffdf" class="outline-3">
<h3 id="org2dfffdf">Pangu-spacing</h3>
<div class="outline-text-3" id="text-org2dfffdf">
<p>
<code>pangu-spcing</code> is an minor-mode to auto add space between Chinese and English characters. Note that these white-space characters are not really added to the contents, it just like to do so.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">req-package</span> pangu-spacing</span><br><span class="line">  <span class="keyword">:init</span></span><br><span class="line">  <span class="list">(<span class="keyword">progn</span></span><br><span class="line">    <span class="comment">;; start pangu-spacing globally</span></span><br><span class="line">    <span class="list">(<span class="keyword">global-pangu-spacing-mode</span> <span class="number">1</span>)</span></span><br><span class="line">    <span class="comment">;; Always insert `real' space in org-mode.</span></span><br><span class="line">    <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span></span><br><span class="line">              <span class="quoted">'(lambda ()</span><br><span class="line">                 (set (make-local-variable 'pangu-spacing-real-insert-separtor) <span class="literal">t</span>))</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org6029595" class="outline-3">
<h3 id="org6029595">Bold-admin</h3>
<div class="outline-text-3" id="text-org6029595">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; (add-to-load-path "~/.spacemacs.d/package/blog-admin")</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'blog-admin</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;  (setq blog-admin-backend-type 'org-page)</span></span><br><span class="line"><span class="comment">;;  (setq blog-admin-backend-path "~/Emacs-lengyue/Blog-lengyue/source")</span></span><br><span class="line"><span class="comment">;;  (setq blog-admin-backend-new-post-in-drafts t)</span></span><br><span class="line"><span class="comment">;;  (setq blog-admin-backend-new-post-with-same-name-dir t)</span></span><br><span class="line"><span class="comment">;;  (setq blog-admin-backend-org-page-drafts "_drafts")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;  (setq op/repository-directory "~/Emacs-lengyue/Blog-lengyue/source")</span></span><br><span class="line"><span class="comment">;;  (setq op/site-domain "http://lengyueyang.github.io") </span></span><br><span class="line"><span class="comment">;;  (setq op/personal-disqus-shortname "lengyueyang")</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> blog-admin-backend-type <span class="quoted">'hexo</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> blog-admin-backend-path <span class="string">"~/Emacs-lengyue/Blog-lengyue/"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> blog-admin-backend-new-post-in-drafts <span class="literal">t</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> blog-admin-backend-new-post-with-same-name-dir <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"ob"</span> <span class="quoted">'blog-admin-start</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgb759ab3" class="outline-3">
<h3 id="orgb759ab3">Hexo configuration</h3>
<div class="outline-text-3" id="text-orgb759ab3">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span><span class="quoted">'cl</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> hexo-dir <span class="string">"~/Emacs-lengyue/Blog-lengyue"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hexo-publish <span class="list">(<span class="keyword">commit-msg</span>)</span></span><br><span class="line">  <span class="string">"git add . &amp;amp; git commit &amp;amp; git push &amp;amp; hexo d"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span> <span class="string">"sInput commit message:"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">async-shell-command</span> <span class="list">(<span class="keyword">format</span> <span class="string">"cd %s ;git add . ;git commit -m \"%s\" ;git push ;hexo clean; hexo g; hexo d -g"</span></span><br><span class="line">                               hexo-dir</span><br><span class="line">                               commit-msg)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hexo-org-add-read-more <span class="list">()</span></span><br><span class="line">  <span class="string">"add &amp;lt;!--more--&amp;gt;"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">insert</span> <span class="string">"#+BEGIN_HTML\n&amp;lt;!--more--&amp;gt;\n#+END_HTML"</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hexo-org-new-open-post <span class="list">(<span class="keyword">post-name</span>)</span></span><br><span class="line">  <span class="string">"create a hexo org post"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span> <span class="string">"sInput post name:"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">find-file</span> <span class="list">(<span class="keyword">format</span> <span class="string">"%s/source/_posts/%s.org"</span> hexo-dir post-name)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">insert</span> <span class="list">(<span class="keyword">format</span> <span class="string">"#+TITLE: %s</span><br><span class="line">#+DATE: %s</span><br><span class="line">#+LAYOUT: post</span><br><span class="line">#+TAGS:</span><br><span class="line">#+CATEGORIES:</span><br><span class="line">"</span>  post-name <span class="list">(<span class="keyword">format-time-string</span> <span class="string">"&amp;lt;%Y-%m-%d %a %H:%M&amp;gt;"</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hexo-org-source <span class="list">()</span></span><br><span class="line">  <span class="string">"use dired open hexo source dir"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">ido-find-file-in-dir</span> <span class="list">(<span class="keyword">format</span> <span class="string">"%s/source/"</span> hexo-dir)</span>)</span></span><br><span class="line">  )</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hexo-move-article <span class="list">()</span></span><br><span class="line">  <span class="string">"Move current file between _post and _draft;</span><br><span class="line">You can run this function in dired or a hexo article."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">string-match</span> <span class="string">"/\\(_posts/\\|_drafts/\\)$"</span> default-directory)</span></span><br><span class="line">      <span class="list">(<span class="keyword">let*</span> <span class="list">(<span class="list">(<span class="keyword">parent-dir</span> <span class="list">(<span class="keyword">file-truename</span> <span class="list">(<span class="keyword">concat</span> default-directory <span class="string">"../"</span>)</span>)</span>)</span></span><br><span class="line">             <span class="list">(<span class="keyword">dest-dir</span> <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">string-match</span> <span class="string">"_drafts/$"</span> default-directory)</span> <span class="string">"_posts/"</span> <span class="string">"_drafts/"</span>)</span>)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">cond</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">eq</span> major-mode <span class="quoted">'markdown-mode</span>)</span> <span class="list">(<span class="keyword">eq</span> major-mode <span class="quoted">'org-mode</span>)</span>)</span></span><br><span class="line">               <span class="list">(<span class="keyword">let*</span> <span class="list">(<span class="list">(<span class="keyword">cur-file</span> <span class="list">(<span class="keyword">buffer-file-name</span>)</span>)</span></span><br><span class="line">                      <span class="list">(<span class="keyword">new-file</span> <span class="list">(<span class="keyword">concat</span> parent-dir dest-dir <span class="list">(<span class="keyword">buffer-name</span>)</span>)</span>)</span>)</span></span><br><span class="line">                 <span class="list">(<span class="keyword">save-buffer</span>)</span></span><br><span class="line">                 <span class="list">(<span class="keyword">kill-buffer</span>)</span></span><br><span class="line">                 <span class="list">(<span class="keyword">rename-file</span> cur-file new-file)</span></span><br><span class="line">                 <span class="list">(<span class="keyword">find-file</span> new-file)</span></span><br><span class="line">                 <span class="list">(<span class="keyword">message</span> <span class="list">(<span class="keyword">format</span> <span class="string">"Now in %s"</span> dest-dir)</span>)</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="list">(<span class="keyword">eq</span> major-mode <span class="quoted">'dired-mode</span>)</span></span><br><span class="line">               <span class="list">(<span class="keyword">dired-rename-file</span> <span class="list">(<span class="keyword">dired-get-filename</span> <span class="literal">nil</span>)</span></span><br><span class="line">                                  <span class="list">(<span class="keyword">concat</span> parent-dir dest-dir <span class="list">(<span class="keyword">dired-get-filename</span> <span class="literal">t</span>)</span>)</span></span><br><span class="line">                                  <span class="literal">nil</span>)</span></span><br><span class="line">               <span class="list">(<span class="keyword">message</span> <span class="list">(<span class="keyword">format</span> <span class="string">"The article has been moved to %s"</span> dest-dir)</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">message</span> <span class="string">"You have to run this in a hexo article buffer or dired"</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org2025330" class="outline-3">
<h3 id="org2025330">Use emms to play music</h3>
<div class="outline-text-3" id="text-org2025330">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="comment">;; https://github.com/tumashu/emacs-helper/blob/master/eh-emms.el</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">use-package</span> emms</span><br><span class="line">  <span class="keyword">:config</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">use-package</span> emms-setup</span><br><span class="line">    <span class="keyword">:ensure</span> <span class="literal">nil</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">use-package</span> emms-info-libtag</span><br><span class="line">    <span class="keyword">:ensure</span> <span class="literal">nil</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">use-package</span> dired</span><br><span class="line">    <span class="keyword">:ensure</span> <span class="literal">nil</span>)</span></span><br><span class="line">  <span class="comment">;; (use-package chinese-pyim)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">emms-devel</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-default-players</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">fboundp</span> <span class="quoted">'emms-cache</span>)</span> <span class="list">(<span class="keyword">emms-cache</span> <span class="number">1</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">emms-history-load</span>)</span></span><br><span class="line">  <span class="comment">;; EMMS &amp;#30446;&amp;#24405;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-source-file-default-directory <span class="string">"~/Music/Lengyueyang-music"</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">unless</span> <span class="list">(<span class="keyword">file-directory-p</span> emms-source-file-default-directory)</span></span><br><span class="line">    <span class="list">(<span class="keyword">make-directory</span> <span class="list">(<span class="keyword">file-name-as-directory</span> emms-source-file-default-directory)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-directory <span class="string">"~/Music/.emms/"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-history-file <span class="string">"~/Music/.emms/history"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-cache-file <span class="string">"~/Music/.emms/cache"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-stream-bookmarks-file <span class="string">"~/Music/.emms/streams"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-score-file <span class="string">"~/Music/.emms/scores"</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#23450; EMMS &amp;#20027;&amp;#27169;&amp;#24335;&amp;#20026; Playlist &amp;#27169;&amp;#24335;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-playlist-default-major-mode <span class="quoted">'emms-playlist-mode</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#20462;&amp;#22797;&amp;#25773;&amp;#25918;&amp;#23436;&amp;#21518;&amp;#30340; BUG</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-player-next-function <span class="quoted">'emms-next</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#23450;&amp;#38899;&amp;#36712;&amp;#21021;&amp;#22987;&amp;#21270;&amp;#20449;&amp;#24687;</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'emms-track-initialize-functions</span> <span class="quoted">'emms-info-initialize-track</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#20851;&amp;#38381; EMMS &amp;#20449;&amp;#24687;&amp;#24322;&amp;#27493;&amp;#27169;&amp;#24335;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-info-asynchronously <span class="literal">nil</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#23450; EMMS &amp;#21551;&amp;#21160;&amp;#21015;&amp;#34920;&amp;#24490;&amp;#29615;&amp;#25773;&amp;#25918;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-repeat-playlist <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#25490;&amp;#24207;&amp;#26041;&amp;#27861;: &amp;#33402;&amp;#26415;&amp;#23478; -&amp;gt; &amp;#19987;&amp;#36753; -&amp;gt; &amp;#24207;&amp;#21495;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-playlist-sort-function</span><br><span class="line">        <span class="quoted">'emms-playlist-sort-by-natural-order</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#20351;&amp;#29992; Gnu find &amp;#26597;&amp;#25214;&amp;#25991;&amp;#20214;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-source-file-directory-tree-function</span><br><span class="line">        <span class="quoted">'emms-source-file-directory-tree-find</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#22312; minibuffer &amp;#20013;&amp;#26174;&amp;#31034;&amp;#25773;&amp;#25918;&amp;#20449;&amp;#24687;(emms-show)</span></span><br><span class="line">  <span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'emms-player-started-hook</span> <span class="quoted">'emms-show</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-show-format <span class="string">"&amp;#27491;&amp;#22312;&amp;#25773;&amp;#25918;: [%s]"</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;;&amp;#35774;&amp;#32622; Mode-line &amp;#30340;&amp;#26174;&amp;#31034;&amp;#26041;&amp;#24335;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-mode-line-format <span class="string">"%s"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-playing-time-display-format <span class="string">"%s ]"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> global-mode-string</span><br><span class="line">        <span class="quoted">'(<span class="string">" "</span> emms-mode-line-string <span class="string">" "</span> emms-playing-time-string <span class="string">" "</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-mode-line-mode-line-function</span><br><span class="line">        <span class="quoted">'eh-emms-mode-line-playlist-current</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-mode-line-playlist-current <span class="list">()</span></span><br><span class="line">    <span class="string">"Format the currently playing."</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">track</span> <span class="list">(<span class="keyword">emms-playlist-current-selected-track</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">eq</span> <span class="quoted">'file</span> <span class="list">(<span class="keyword">emms-track-type</span> track)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-artist</span>)</span></span><br><span class="line">                   <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-title</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">art</span>  <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-artist</span>)</span>)</span></span><br><span class="line">                    <span class="list">(<span class="keyword">tit</span>  <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-title</span>)</span>)</span>)</span></span><br><span class="line">                <span class="list">(<span class="keyword">format</span> <span class="string">"[ %s -- %s"</span> art tit)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">format</span> <span class="string">"[ %s"</span></span><br><span class="line">                    <span class="list">(<span class="keyword">file-relative-name</span> <span class="list">(<span class="keyword">emms-track-name</span> track)</span></span><br><span class="line">                                        emms-source-file-default-directory)</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#26174;&amp;#31034;&amp;#27468;&amp;#35789;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-lyrics</span> <span class="number">1</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-lyrics-display-on-modeline <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; Function used to format track</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-track-description-function</span><br><span class="line">        #<span class="quoted">'(lambda (track)</span><br><span class="line">            (concat <span class="string">" "</span> (eh-emms-make-track-description track)))</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#32622; Playlist &amp;#30340;&amp;#26174;&amp;#31034;&amp;#26041;&amp;#24335;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-last-played-format-alist</span><br><span class="line">        <span class="quoted">'(((emms-last-played-seconds-today) . <span class="string">"%H:%M"</span>)</span><br><span class="line">          (<span class="number">604800</span>                           . <span class="string">"%H:%M"</span>)</span><br><span class="line">          ((emms-last-played-seconds-month) . <span class="string">"%d"</span>)</span><br><span class="line">          ((emms-last-played-seconds-year)  . <span class="string">"%m-%d"</span>)</span><br><span class="line">          (<span class="literal">t</span>                                . <span class="string">"%Y"</span>))</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-make-track-description <span class="list">(<span class="keyword">track</span>)</span></span><br><span class="line">    <span class="string">"Return a description of the current track."</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">track-type</span> <span class="list">(<span class="keyword">emms-track-type</span> track)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">play-count</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'play-count</span>)</span> <span class="number">0</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">last-played</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'last-played</span>)</span> <span class="quoted">'(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">name</span> <span class="list">(<span class="keyword">emms-track-name</span> track)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">pmin</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-playing-time-min</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">psec</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-playing-time-sec</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">ptot</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-playing-time</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">title</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-title</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">artist</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-artist</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">album</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-album</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">eq</span> <span class="quoted">'file</span> track-type)</span></span><br><span class="line">          <span class="list">(<span class="keyword">format</span> <span class="string">"%5s %3s |-&amp;gt; %-s"</span></span><br><span class="line">                  <span class="list">(<span class="keyword">emms-last-played-format-date</span> last-played)</span></span><br><span class="line">                  play-count</span><br><span class="line">                  <span class="list">(<span class="keyword">cond</span> <span class="list">(<span class="list">(<span class="keyword">and</span> pmin psec)</span> <span class="list">(<span class="keyword">format</span> <span class="string">"%s %s -- %s [%02d:%02d]"</span> artist album title pmin psec)</span>)</span></span><br><span class="line">                        <span class="list">(<span class="keyword">ptot</span> <span class="list">(<span class="keyword">format</span>  <span class="string">"%s %s -- %s [%02d:%02d]"</span> artist album title <span class="list">(<span class="keyword">/</span> ptot <span class="number">60</span>)</span> <span class="list">(% ptot <span class="number">60</span>)</span>)</span>)</span></span><br><span class="line">                        <span class="list">(<span class="keyword">t</span> <span class="list">(<span class="keyword">format</span> <span class="string">"%s %s -- %s"</span> artist album  title)</span>)</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; Function used to get music tags, for example IDv2.3!</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-info-functions <span class="quoted">'(eh-emms-info-libtag eh-emms-info-add-pinyin-alias)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-info-libtag <span class="list">(<span class="keyword">track</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">eq</span> <span class="quoted">'file</span> <span class="list">(<span class="keyword">emms-track-type</span> track)</span>)</span></span><br><span class="line">               <span class="list">(<span class="keyword">string-match</span></span><br><span class="line">                <span class="string">"\\.\\([Mm][Pp]3\\|[oO][gG][gG]\\|[fF][lL][aA][cC]\\|[sS][pP][xX]\\)\\'"</span></span><br><span class="line">                <span class="list">(<span class="keyword">emms-track-name</span> track)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">info-list</span></span><br><span class="line">             <span class="list">(<span class="keyword">split-string</span> <span class="list">(<span class="keyword">file-relative-name</span></span><br><span class="line">                            <span class="list">(<span class="keyword">emms-track-name</span> track)</span></span><br><span class="line">                            emms-source-file-default-directory)</span> <span class="string">"/"</span> <span class="literal">t</span>)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-artist</span> <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (length info-list) 1) (nth 0 info-list) "&amp;#26410;&amp;#30693;&amp;#33402;&amp;#26415;&amp;#23478;"))</span></span><br><span class="line">        <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-album</span>  <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (length info-list) 2) (nth 1 info-list) "&amp;#26434;&amp;#39033;"))</span></span><br><span class="line">        <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-title</span> <span class="list">(<span class="keyword">car</span> <span class="list">(<span class="keyword">reverse</span> info-list)</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">with-temp-buffer</span></span><br><span class="line">        <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">string=</span> <span class="string">"0"</span></span><br><span class="line">                       <span class="list">(<span class="keyword">format</span> <span class="string">"%s"</span> <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">coding-system-for-read</span> <span class="quoted">'utf-8</span>)</span>)</span></span><br><span class="line">                                      <span class="list">(<span class="keyword">call-process</span> emms-info-libtag-program-name</span><br><span class="line">                                                    <span class="literal">nil</span> <span class="quoted">'(t nil)</span> <span class="literal">nil</span></span><br><span class="line">                                                    <span class="list">(<span class="keyword">emms-track-name</span> track)</span>)</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">          <span class="comment">;; Crush the trailing whitespace</span></span><br><span class="line">          <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">re-search-forward</span> <span class="string">"[[:space:]]+$"</span> <span class="literal">nil</span> <span class="literal">t</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">replace-match</span> <span class="string">""</span> <span class="literal">nil</span> <span class="literal">nil</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">looking-at</span> <span class="string">"^\\([^=\n]+\\)=\\(.*\\)$"</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">name</span> <span class="list">(<span class="keyword">intern-soft</span> <span class="list">(<span class="keyword">match-string</span> <span class="number">1</span>)</span>)</span>)</span></span><br><span class="line">                  <span class="list">(<span class="keyword">value</span> <span class="list">(<span class="keyword">match-string</span> <span class="number">2</span>)</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">&amp;gt</span><span class="comment">; (length value)</span></span><br><span class="line">                       <span class="number">0</span>)</span></span><br><span class="line">                <span class="list">(<span class="keyword">emms-track-set</span> track</span><br><span class="line">                                name</span><br><span class="line">                                <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">eq</span> name <span class="quoted">'info-playing-time</span>)</span></span><br><span class="line">                                    <span class="list">(<span class="keyword">string-to-number</span> value)</span></span><br><span class="line">                                  value)</span>)</span>)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">forward-line</span> <span class="number">1</span>)</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-info-add-pinyin-alias <span class="list">(<span class="keyword">track</span>)</span></span><br><span class="line">    <span class="string">"Add pinyin alias to the track"</span></span><br><span class="line">    <span class="list">(<span class="keyword">when</span> <span class="list">(<span class="keyword">and</span> <span class="list">(<span class="keyword">featurep</span> <span class="quoted">'chinese-pyim</span>)</span></span><br><span class="line">               <span class="list">(<span class="keyword">eq</span> <span class="quoted">'file</span> <span class="list">(<span class="keyword">emms-track-type</span> track)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-artist-alias</span> <span class="list">(<span class="keyword">pyim-hanzi2pinyin</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-artist</span>)</span> <span class="literal">t</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-album-alias</span> <span class="list">(<span class="keyword">pyim-hanzi2pinyin</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-album</span>)</span> <span class="literal">t</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">emms-track-set</span> track <span class="quoted">'info-title-alias</span> <span class="list">(<span class="keyword">pyim-hanzi2pinyin</span> <span class="list">(<span class="keyword">emms-track-get</span> track <span class="quoted">'info-title</span>)</span> <span class="literal">t</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#32622; EMMS &amp;#27983;&amp;#35272;&amp;#22120;, &amp;#40664;&amp;#35748;&amp;#26174;&amp;#31034;&amp;#26041;&amp;#24335;&amp;#20026;: &amp;#26174;&amp;#31034;&amp;#25152;&amp;#26377;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-browser-set-filter</span> <span class="list">(<span class="keyword">assoc</span> <span class="string">"EVERYTHING"</span> emms-browser-filters)</span>)</span></span><br><span class="line">  <span class="comment">;; filter: &amp;#26174;&amp;#31034;&amp;#25152;&amp;#26377;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-browser-make-filter</span> <span class="string">"EVERYTHING"</span> <span class="quoted">'ignore</span>)</span></span><br><span class="line">  <span class="comment">;; filter: &amp;#21482;&amp;#26174;&amp;#31034;&amp;#25991;&amp;#20214;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-browser-make-filter</span> <span class="string">"ALL-FILES"</span> <span class="list">(<span class="keyword">emms-browser-filter-only-type</span> <span class="quoted">'file</span>)</span>)</span></span><br><span class="line">  <span class="comment">;; filter: &amp;#26368;&amp;#36817;&amp;#19968;&amp;#20010;&amp;#26143;&amp;#26399;&amp;#25773;&amp;#25918;&amp;#30340;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-browser-make-filter</span> <span class="string">"LAST-WEEK"</span> <span class="list">(<span class="keyword">emms-browser-filter-only-recent</span> <span class="number">7</span>)</span>)</span></span><br><span class="line">  <span class="comment">;; filter: &amp;#26368;&amp;#36817;&amp;#19968;&amp;#20010;&amp;#26376;&amp;#37117;&amp;#27809;&amp;#26377;&amp;#25773;&amp;#25918;&amp;#30340;</span></span><br><span class="line">  <span class="list">(<span class="keyword">emms-browser-make-filter</span> <span class="string">"LAST-MONTH-NOT-PLAYED"</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">(<span class="keyword">track</span>)</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">funcall</span> <span class="list">(<span class="keyword">emms-browser-filter-only-recent</span> <span class="number">30</span>)</span> track)</span>)</span>)</span>)</span></span><br><span class="line">  <span class="comment">;; EMMS &amp;#27983;&amp;#35272;&amp;#22120;, &amp;#21024;&amp;#38500;&amp;#25991;&amp;#20214;&amp;#19981;&amp;#25552;&amp;#37266;</span></span><br><span class="line">  <span class="list">(<span class="keyword">put</span> <span class="quoted">'emms-browser-delete-files</span> <span class="quoted">'disabled</span> <span class="literal">nil</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#35774;&amp;#32622; emms buffer &amp;#26174;&amp;#31034;&amp;#26684;&amp;#24335;</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-browser-info-artist-format <span class="string">"* %n"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-browser-info-album-format  <span class="string">"  - %n"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-browser-info-title-format  <span class="string">"    &amp;#9834;. %n"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> emms-browser-playlist-info-title-format <span class="string">"%n"</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#33258;&amp;#23450;&amp;#20041; emms-browser-add-tracks, &amp;#31105;&amp;#27490;&amp;#22312; playlist &amp;#25991;&amp;#20214;&amp;#20013;&amp;#28155;&amp;#21152;</span></span><br><span class="line">  <span class="comment">;; artist &amp;#34892; &amp;#21644; album &amp;#34892;&amp;#65292;&amp;#21516;&amp;#26102;&amp;#20351; emacs-browser-playlist-*-*-format</span></span><br><span class="line">  <span class="comment">;; &amp;#20013; "%i"&amp;#20301;&amp;#32622;&amp;#31526;&amp;#22833;&amp;#25928;</span></span><br><span class="line">  <span class="comment">;;</span></span><br><span class="line">  <span class="comment">;; &amp;#27880;: emms-browser-playlist-info-artist-format</span></span><br><span class="line">  <span class="comment">;;     emms-browser-playlist-info-album-format</span></span><br><span class="line">  <span class="comment">;;     &amp;#20004;&amp;#20010;&amp;#21464;&amp;#37327;&amp;#35774;&amp;#32622;&amp;#22312;&amp;#36825;&amp;#37324;&amp;#19981;&amp;#36215;&amp;#20316;&amp;#29992;</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-add-tracks <span class="list">()</span></span><br><span class="line">    <span class="string">"Add all tracks at point.</span><br><span class="line">Return the previous point-max before adding."</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">first-new-track</span> <span class="list">(<span class="keyword">with-current-emms-playlist</span> <span class="list">(<span class="keyword">point-max</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">bdata</span> <span class="list">(<span class="keyword">emms-browser-bdata-at-point</span>)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">eh-emms-browser-playlist-insert-bdata</span> bdata)</span></span><br><span class="line">      <span class="list">(<span class="keyword">run-hook-with-args</span> <span class="quoted">'emms-browser-tracks-added-hook</span></span><br><span class="line">                          first-new-track)</span></span><br><span class="line">      first-new-track)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-playlist-insert-bdata <span class="list">(<span class="keyword">bdata</span>)</span></span><br><span class="line">    <span class="string">"Add all tracks in BDATA to the playlist."</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">type</span> <span class="list">(<span class="keyword">emms-browser-bdata-type</span> bdata)</span>)</span>)</span></span><br><span class="line">      <span class="comment">;; recurse or add tracks</span></span><br><span class="line">      <span class="list">(<span class="keyword">dolist</span> <span class="list">(<span class="keyword">item</span> <span class="list">(<span class="keyword">emms-browser-bdata-data</span> bdata)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">eq</span> type <span class="quoted">'info-title</span>)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">eh-emms-browser-playlist-insert-bdata</span> item)</span></span><br><span class="line">          <span class="list">(<span class="keyword">emms-browser-playlist-insert-track</span> bdata)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-make-name <span class="list">(<span class="keyword">entry</span> type)</span></span><br><span class="line">    <span class="string">"Override `emms-browser-make-name'. Return a name for ENTRY, used for making a bdata object."</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">key</span> <span class="list">(<span class="keyword">car</span> entry)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">track</span> <span class="list">(<span class="keyword">cadr</span> entry)</span>)</span></span><br><span class="line">          artist title)</span> <span class="comment">;; only the first track</span></span><br><span class="line">      <span class="list">(<span class="keyword">cond</span></span><br><span class="line">       <span class="list">(<span class="list">(<span class="keyword">eq</span> type <span class="quoted">'info-title</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">eh-emms-make-track-description</span> track)</span>)</span></span><br><span class="line">       <span class="list">(<span class="keyword">t</span> key)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">advice-add</span> <span class="quoted">'emms-browser-make-name</span> <span class="keyword">:override</span> <span class="quoted">#'eh-emms-browser-make-name</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; &amp;#24555;&amp;#25463;&amp;#20989;&amp;#25968;</span></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-toggle-playing <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">if</span> emms-player-playing-p</span><br><span class="line">        <span class="list">(<span class="keyword">emms-pause</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">emms-start</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-search <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">call-interactively</span> <span class="quoted">'isearch-forward</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">null</span> emms-playlist-buffer)</span></span><br><span class="line">            <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">buffer-live-p</span> emms-playlist-buffer)</span>)</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">playlist</span> <span class="list">(<span class="keyword">concat</span></span><br><span class="line">                         <span class="list">(<span class="keyword">file-name-as-directory</span> emms-source-file-default-directory)</span></span><br><span class="line">                         <span class="string">"default.playlist"</span>)</span>)</span>)</span></span><br><span class="line">          <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">not</span> <span class="list">(<span class="keyword">file-readable-p</span> playlist)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">eh-emms-add-directory-tree</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">emms-add-playlist</span> playlist)</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">emms-playlist-mode-go</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-add-directory-tree <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">emms-add-directory-tree</span></span><br><span class="line">     <span class="list">(<span class="keyword">ido-read-directory-name</span></span><br><span class="line">      <span class="string">"Add directory tree:"</span></span><br><span class="line">      emms-source-file-default-directory)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-add-file <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">file</span> <span class="list">(<span class="keyword">ido-read-file-name</span></span><br><span class="line">                 <span class="string">"Add directory tree:"</span></span><br><span class="line">                 emms-source-file-default-directory)</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">cond</span></span><br><span class="line">       <span class="list">(<span class="list">(<span class="keyword">string-match</span> <span class="string">"\\.\\(m3u\\|pls\\)\\'"</span> file)</span></span><br><span class="line">        <span class="list">(<span class="keyword">emms-add-playlist</span> file)</span>)</span></span><br><span class="line">       <span class="list">(<span class="keyword">t</span> <span class="list">(<span class="keyword">emms-add-file</span> file)</span>)</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-search-by-names <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">emms-browser-search</span> <span class="quoted">'(info-artist info-artist-alias info-title info-title-alias info-album info-album-alias)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-search-by-artist <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">emms-browser-search</span> <span class="quoted">'(info-artist info-artist-alias)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">defun</span> eh-emms-browser-search-by-title <span class="list">()</span></span><br><span class="line">    <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">emms-browser-search</span> <span class="quoted">'(info-title info-title-alias)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">'emms-info-functions</span> <span class="quoted">'emms-info-cueinfo</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">evil-add-hjkl-bindings</span> emms-playlist-mode-map <span class="quoted">'emacs</span>)</span></span><br><span class="line">  <span class="comment">;; Global keybinding for emms</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-unset-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e"</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e e"</span>)</span> <span class="quoted">'eh-emms</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e d"</span>)</span> <span class="quoted">'eh-emms-add-directory-tree</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e f"</span>)</span> <span class="quoted">'eh-emms-add-file</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e SPC"</span>)</span> <span class="quoted">'eh-emms-toggle-playing</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e q"</span>)</span> <span class="quoted">'emms-stop</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e n"</span>)</span> <span class="quoted">'emms-next</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e p"</span>)</span> <span class="quoted">'emms-previous</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e o"</span>)</span> <span class="quoted">'emms-show</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e h"</span>)</span> <span class="quoted">'emms-shuffle</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e H"</span>)</span> <span class="quoted">'emms-sort</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e r"</span>)</span>   <span class="quoted">'emms-toggle-repeat-track</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e R"</span>)</span>   <span class="quoted">'emms-toggle-repeat-playlist</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e s u"</span>)</span> <span class="quoted">'emms-score-up-playing</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e s d"</span>)</span> <span class="quoted">'emms-score-down-playing</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">global-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-c e s o"</span>)</span> <span class="quoted">'emms-score-show-playing</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; browser mode map</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"SPC"</span>)</span> <span class="quoted">'emms-browser-next-non-track</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;return&amp;gt;"</span>)</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">                                                       <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">                                                       <span class="list">(<span class="keyword">eh-emms-browser-add-tracks</span>)</span></span><br><span class="line">                                                       <span class="list">(<span class="keyword">message</span> <span class="string">"Add current track to playlist"</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-SPC"</span>)</span> <span class="quoted">'emms-browser-next-non-track</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;tab&amp;gt;"</span>)</span> <span class="quoted">'emms-browser-toggle-subitems</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"o"</span>)</span> <span class="quoted">'emms-playlist-mode-go</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"w"</span>)</span> <span class="quoted">'emms-browser-show-LAST-WEEK</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"a"</span>)</span> <span class="quoted">'emms-browser-show-EVERYTHING</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"m"</span>)</span> <span class="quoted">'emms-browser-show-LAST-MONTH-NOT-PLAYED</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"s s"</span>)</span> <span class="quoted">'eh-emms-browser-search-by-names</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"s a"</span>)</span> <span class="quoted">'eh-emms-browser-search-by-artist</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-browser-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"s t"</span>)</span> <span class="quoted">'eh-emms-browser-search-by-title</span>)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">;; playlist-mode-map</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"o"</span>)</span> <span class="quoted">'emms-browser-show-LAST-WEEK</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"SPC"</span>)</span> <span class="quoted">'emms-pause</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"/"</span>)</span> <span class="quoted">'eh-emms-search</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"+"</span>)</span> <span class="quoted">'emms-volume-raise</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"-"</span>)</span> <span class="quoted">'emms-volume-lower</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-&amp;lt;right&amp;gt;"</span>)</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">interactive</span>)</span> <span class="list">(<span class="keyword">emms-seek</span> <span class="number">+10</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-&amp;lt;left&amp;gt;"</span>)</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">interactive</span>)</span> <span class="list">(<span class="keyword">emms-seek</span> <span class="number">-10</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-&amp;lt;right&amp;gt;"</span>)</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">interactive</span>)</span> <span class="list">(<span class="keyword">emms-seek</span> <span class="number">+60</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"C-&amp;lt;left&amp;gt;"</span>)</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">interactive</span>)</span> <span class="list">(<span class="keyword">emms-seek</span> <span class="number">-60</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S u"</span>)</span> <span class="quoted">'emms-score-up-file-on-line</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S d"</span>)</span> <span class="quoted">'emms-score-down-file-on-line</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S o"</span>)</span> <span class="quoted">'emms-score-show-file-on-line</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S l"</span>)</span> <span class="quoted">'emms-score-less-tolerant</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S m"</span>)</span> <span class="quoted">'emms-score-more-tolerant</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S t"</span>)</span> <span class="quoted">'emms-score-set-tolerance</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">define-key</span> emms-playlist-mode-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"S s"</span>)</span> <span class="quoted">'emms-score-show-playing</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; https://www.gnu.org/software/emms/manual/#Introduction</span></span><br><span class="line"><span class="comment">;; (require 'emms-setup)</span></span><br><span class="line"><span class="comment">;; (emms-all)</span></span><br><span class="line"><span class="comment">;; (emms-default-players)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; (setq emms-directory "~/Music/.emms")</span></span><br><span class="line"><span class="comment">;; (setq emms-cache-file "~/Music/.emms/cache")</span></span><br><span class="line"><span class="comment">;; (setq emms-score-file "~/Music/.emms/scores")</span></span><br><span class="line"><span class="comment">;; (setq emms-history-file "~/Music/.emms/history")</span></span><br><span class="line"><span class="comment">;; (setq emms-source-file-default-directory "~/Music/")</span></span><br><span class="line"><span class="comment">;; (emms-history-load)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/declare-prefix</span> <span class="string">"oe"</span> <span class="string">"Emms-Music"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oee"</span> <span class="quoted">'emms</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oea"</span> <span class="quoted">'emms-add-directory-tree</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oef"</span> <span class="quoted">'emms-play-file</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oes"</span> <span class="quoted">'emms-stop</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oen"</span> <span class="quoted">'emms-next</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oep"</span> <span class="quoted">'emms-previous</span>)</span></span></span></span></span></span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org991e0d8" class="outline-2">
<h2 id="org991e0d8">Other customization</h2>
<div class="outline-text-2" id="text-org991e0d8">
<p>
This part is some customization not belong to the anterior part.
</p>
</div>

<div id="outline-container-org7cff8a5" class="outline-3">
<h3 id="org7cff8a5">Column indicator</h3>
<div class="outline-text-3" id="text-org7cff8a5">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'fill-column-indicator</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> fci-rule-column <span class="number">80</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'prog-mode-hook</span> <span class="quoted">'fci-mode</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'git-commit-mode-hook</span> <span class="quoted">'fci-mode</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org30367a1" class="outline-3">
<h3 id="org30367a1">Disable auto paste from clipboard</h3>
<div class="outline-text-3" id="text-org30367a1">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'spacemacs-buffer-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line"><span class="list">(<span class="keyword">set</span> <span class="list">(<span class="keyword">make-local-variable</span> <span class="quoted">'mouse-1-click-follows-link</span>)</span> <span class="literal">nil</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgbb41619" class="outline-3">
<h3 id="orgbb41619">Truncate lines automatically</h3>
<div class="outline-text-3" id="text-orgbb41619">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'magit-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'python-mode-hook</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span> <span class="list">(<span class="keyword">setq</span> truncate-lines <span class="literal">nil</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgd8258c2" class="outline-3">
<h3 id="orgd8258c2">Hotspots</h3>
<div class="outline-text-3" id="text-orgd8258c2">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/hotspots <span class="list">()</span></span><br><span class="line">  <span class="string">"helm interface to my hotspots, which includes my locations,</span><br><span class="line">org-files and bookmarks"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">helm</span> <span class="keyword">:buffer</span> <span class="string">"*helm: utities*"</span></span><br><span class="line">        <span class="keyword">:sources</span> <span class="quoted">`(,(lengyueyang//hotspots-sources))</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang//hotspots-sources <span class="list">()</span></span><br><span class="line">  <span class="string">"Construct the helm sources for my hotspots"</span></span><br><span class="line">  <span class="quoted">`((name . <span class="string">"lengyueyang's center"</span>)</span><br><span class="line">    (candidates . (</span><br><span class="line">                   (<span class="string">"Agenda List"</span> . (lambda () (org-agenda <span class="string">""</span> <span class="string">"a"</span>)))</span><br><span class="line">                   (<span class="string">"Agenda Menu"</span> . (lambda () (org-agenda)))</span><br><span class="line">                   (<span class="string">"Blog"</span> . (lambda() (blog-admin-start)))</span><br><span class="line">                   (<span class="string">"Elfeed"</span> . (lambda () (elfeed)))</span><br><span class="line">                   ;; (<span class="string">"Agenda Next TODO"</span> . (lambda () (org-agenda <span class="string">""</span> <span class="string">"t"</span>)))</span><br><span class="line">                   (<span class="string">"Open Github"</span> . (lambda() (browse-url <span class="string">"https://github.com/lengyueyang"</span>)))</span><br><span class="line">                   (<span class="string">"Open Blog"</span> . (lambda() (browse-url <span class="string">"http://lengyueyang.github.io"</span>)))))</span><br><span class="line">    (candidate-number-limit)</span><br><span class="line">    (action . ((<span class="string">"Open"</span> . (lambda (x) (funcall x))))))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">define-key</span> global-map <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;f1&amp;gt;"</span>)</span> <span class="quoted">'lengyueyang/hotspots</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">spacemacs/set-leader-keys</span> <span class="string">"oh"</span> <span class="quoted">'lengyueyang/hotspots</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgcda2473" class="outline-3">
<h3 id="orgcda2473">Count chinese word</h3>
<div class="outline-text-3" id="text-orgcda2473">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defvar</span> wc-regexp-chinese-char-and-punc</span><br><span class="line">  <span class="list">(<span class="keyword">rx</span> <span class="list">(<span class="keyword">category</span> chinese)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">defvar</span> wc-regexp-chinese-punc</span><br><span class="line">  <span class="string">"[&amp;#12290;&amp;#65292;&amp;#65281;&amp;#65311;&amp;#65307;&amp;#65306;&amp;#12300;&amp;#12301;&amp;#12302;&amp;#12303;&amp;#65288;&amp;#65289;&amp;#12289;&amp;#12304;&amp;#12305;&amp;#12298;&amp;#12299;&amp;#12296;&amp;#12297;&amp;#8251;&amp;#8212;]"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">defvar</span> wc-regexp-english-word</span><br><span class="line">  <span class="string">"[a-zA-Z0-9-]+"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">defun</span> lengyueyang/word-count-for-chinese <span class="list">()</span></span><br><span class="line">  <span class="string">"&amp;#12300;&amp;#36611;&amp;#31934;&amp;#30906;&amp;#22320;&amp;#12301;&amp;#32113;&amp;#35336;&amp;#20013; / &amp;#26085; / &amp;#33521;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#12290;</span><br><span class="line">- &amp;#25991;&amp;#31456;&amp;#20013;&amp;#30340;&amp;#35387;&amp;#35299;&amp;#19981;&amp;#31639;&amp;#22312;&amp;#23383;&amp;#25976;&amp;#20839;&amp;#12290;</span><br><span class="line">- &amp;#24179;&amp;#20551;&amp;#21517;&amp;#33287;&amp;#29255;&amp;#20551;&amp;#21517;&amp;#20134;&amp;#21253;&amp;#21547;&amp;#22312;&amp;#12300;&amp;#20013;&amp;#26085;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#12301;&amp;#20839;&amp;#65292;&amp;#27599;&amp;#20491;&amp;#24179; / &amp;#29255;&amp;#20551;&amp;#21517;&amp;#37117;&amp;#31639;&amp;#21934;&amp;#29544;&amp;#19968;&amp;#20491;&amp;#23383;&amp;#65288;&amp;#20294;&amp;#29255;&amp;#20551;</span><br><span class="line">  &amp;#21517;&amp;#19981;&amp;#21547;&amp;#36899;&amp;#38899;&amp;#12300;&amp;#12540;&amp;#12301;&amp;#65289;&amp;#12290;</span><br><span class="line">- &amp;#33521;&amp;#25991;&amp;#21482;&amp;#35336;&amp;#31639;&amp;#12300;&amp;#21934;&amp;#23383;&amp;#25976;&amp;#12301;&amp;#65292;&amp;#19981;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#12290;</span><br><span class="line">- &amp;#38867;&amp;#25991;&amp;#19981;&amp;#21253;&amp;#21547;&amp;#22312;&amp;#20839;&amp;#12290;</span><br><span class="line">&amp;#8251;&amp;#35336;&amp;#31639;&amp;#27161;&amp;#28310;&amp;#22826;&amp;#22810;&amp;#31278;&amp;#20102;&amp;#65292;&amp;#20363;&amp;#22914;&amp;#33521;&amp;#25991;&amp;#27161;&amp;#40670;&amp;#26159;&amp;#21542;&amp;#31639;&amp;#20837;&amp;#12289;&amp;#20197;&amp;#21450;&amp;#21487;&amp;#33021;&amp;#26377;&amp;#19981;&amp;#22826;&amp;#24120;&amp;#29992;&amp;#30340;&amp;#27161;&amp;#40670;&amp;#31526;&amp;#34399;&amp;#27794;&amp;#31639;&amp;#20837;&amp;#31561;</span><br><span class="line">&amp;#12290;&amp;#19988;&amp;#20013;&amp;#26085;&amp;#25991;&amp;#27161;&amp;#40670;&amp;#30340;&amp;#35336;&amp;#31639;&amp;#27161;&amp;#28310;&amp;#35201;&amp;#30475; Emacs &amp;#22914;&amp;#20309;&amp;#23450;&amp;#32681;&amp;#29305;&amp;#27530;&amp;#27161;&amp;#40670;&amp;#31526;&amp;#34399;&amp;#22914;&amp;#12532;&amp;#12449;&amp;#12521;&amp;#12531;&amp;#12479;&amp;#12531;&amp;#12539;&amp;#12450;&amp;#12523;&amp;#12459;&amp;#12531;</span><br><span class="line">&amp;#20013;&amp;#38291;&amp;#30340;&amp;#40670;&amp;#20063;&amp;#34987; Emacs &amp;#31639;&amp;#28858;&amp;#19968;&amp;#20491;&amp;#23383;&amp;#32780;&amp;#19981;&amp;#26159;&amp;#27161;&amp;#40670;&amp;#31526;&amp;#34399;&amp;#12290;"</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">let*</span> <span class="list">(<span class="list">(<span class="keyword">v-buffer-string</span></span><br><span class="line">          <span class="list">(<span class="keyword">progn</span></span><br><span class="line">            <span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">eq</span> major-mode <span class="quoted">'org-mode</span>)</span> <span class="comment">; &amp;#21435;&amp;#25481; org &amp;#25991;&amp;#20214;&amp;#30340; OPTIONS&amp;#65288;&amp;#20197; #+ &amp;#38283;&amp;#38957;&amp;#65289;</span></span><br><span class="line">                <span class="list">(<span class="keyword">setq</span> v-buffer-string <span class="list">(<span class="keyword">replace-regexp-in-string</span> <span class="string">"^#\\+.+"</span> <span class="string">""</span></span><br><span class="line">                                                                <span class="list">(<span class="keyword">buffer-substring-no-properties</span> <span class="list">(<span class="keyword">point-min</span>)</span> <span class="list">(<span class="keyword">point-max</span>)</span>)</span>)</span>)</span></span><br><span class="line">              <span class="list">(<span class="keyword">setq</span> v-buffer-string <span class="list">(<span class="keyword">buffer-substring-no-properties</span> <span class="list">(<span class="keyword">point-min</span>)</span> <span class="list">(<span class="keyword">point-max</span>)</span>)</span>)</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">replace-regexp-in-string</span> <span class="list">(<span class="keyword">format</span> <span class="string">"^ *%s *.+"</span> comment-start)</span> <span class="string">""</span> v-buffer-string)</span>)</span>)</span></span><br><span class="line">                                        <span class="comment">; &amp;#25226;&amp;#35387;&amp;#35299;&amp;#34892;&amp;#21034;&amp;#25481;&amp;#65288;&amp;#19981;&amp;#25226;&amp;#35387;&amp;#35299;&amp;#31639;&amp;#36914;&amp;#23383;&amp;#25976;&amp;#65289;&amp;#12290;</span></span><br><span class="line">         <span class="list">(<span class="keyword">chinese-char-and-punc</span> <span class="number">0</span>)</span></span><br><span class="line">         <span class="list">(<span class="keyword">chinese-punc</span> <span class="number">0</span>)</span></span><br><span class="line">         <span class="list">(<span class="keyword">english-word</span> <span class="number">0</span>)</span></span><br><span class="line">         <span class="list">(<span class="keyword">chinese-char</span> <span class="number">0</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">with-temp-buffer</span></span><br><span class="line">      <span class="list">(<span class="keyword">insert</span> v-buffer-string)</span></span><br><span class="line">      <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">      <span class="comment">;; &amp;#20013;&amp;#25991;&amp;#65288;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#12289;&amp;#29255;&amp;#20551;&amp;#21517;&amp;#65289;</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">re-search-forward</span> wc-regexp-chinese-char-and-punc <span class="literal">nil</span> <span class="keyword">:no-error</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">setq</span> chinese-char-and-punc <span class="list">(<span class="number">1</span>+ chinese-char-and-punc)</span>)</span>)</span></span><br><span class="line">      <span class="comment">;; &amp;#20013;&amp;#25991;&amp;#27161;&amp;#40670;&amp;#31526;&amp;#34399;</span></span><br><span class="line">      <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">re-search-forward</span> wc-regexp-chinese-punc <span class="literal">nil</span> <span class="keyword">:no-error</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">setq</span> chinese-punc <span class="list">(<span class="number">1</span>+ chinese-punc)</span>)</span>)</span></span><br><span class="line">      <span class="comment">;; &amp;#33521;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#65288;&amp;#19981;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#65289;</span></span><br><span class="line">      <span class="list">(<span class="keyword">goto-char</span> <span class="list">(<span class="keyword">point-min</span>)</span>)</span></span><br><span class="line">      <span class="list">(<span class="keyword">while</span> <span class="list">(<span class="keyword">re-search-forward</span> wc-regexp-english-word <span class="literal">nil</span> <span class="keyword">:no-error</span>)</span></span><br><span class="line">        <span class="list">(<span class="keyword">setq</span> english-word <span class="list">(<span class="number">1</span>+ english-word)</span>)</span>)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">setq</span> chinese-char <span class="list">(<span class="keyword">-</span> chinese-char-and-punc chinese-punc)</span>)</span></span><br><span class="line">    <span class="list">(<span class="keyword">message</span></span><br><span class="line">     <span class="list">(<span class="keyword">format</span> <span class="string">" &amp;#20013;&amp;#26085;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#65288;&amp;#19981;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#65289;&amp;#65306;%s</span><br><span class="line"> &amp;#20013;&amp;#26085;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#65288;&amp;#21253;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#65289;&amp;#65306;%s</span><br><span class="line"> &amp;#33521;&amp;#25991;&amp;#23383;&amp;#25976;&amp;#65288;&amp;#19981;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#65289;&amp;#65306;%s</span><br><span class="line">=======================</span><br><span class="line"> &amp;#20013;&amp;#33521;&amp;#25991;&amp;#21512;&amp;#35336;&amp;#65288;&amp;#19981;&amp;#21547;&amp;#27161;&amp;#40670;&amp;#65289;&amp;#65306;%s"</span></span><br><span class="line">             chinese-char chinese-char-and-punc english-word</span><br><span class="line">             <span class="list">(<span class="keyword">+</span> chinese-char english-word)</span>)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgdaddf4c" class="outline-3">
<h3 id="orgdaddf4c">Display Calendar numbers in calendar-mode</h3>
<div class="outline-text-3" id="text-orgdaddf4c">
<p>
Define a function to display week numbers in <code>calender-mode</code>. The snippet
is from <a href="http://www.emacswiki.org/emacs/CalendarWeekNumbers" target="_blank" rel="external">EmacsWiki</a>.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> calendar-show-week <span class="list">(<span class="keyword">arg</span>)</span></span><br><span class="line">  <span class="string">"Displaying week number in calendar-mode."</span></span><br><span class="line">  <span class="list">(<span class="keyword">interactive</span> <span class="string">"P"</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">copy-face</span> font-lock-constant-face <span class="quoted">'calendar-iso-week-face</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">set-face-attribute</span></span><br><span class="line">   <span class="quoted">'calendar-iso-week-face</span> <span class="literal">nil</span> <span class="keyword">:height</span> <span class="number">0.7</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">setq</span> calendar-intermonth-text</span><br><span class="line">        <span class="list">(<span class="keyword">and</span> arg</span><br><span class="line">             <span class="quoted">'(propertize</span><br><span class="line">               (format</span><br><span class="line">                <span class="string">"%2d"</span></span><br><span class="line">                (car (calendar-iso-from-absolute</span><br><span class="line">                      (calendar-absolute-from-gregorian</span><br><span class="line">                       (list month day year)))))</span><br><span class="line">               'font-lock-face 'calendar-iso-week-face)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
Evaluate the <code>calendar-show-week</code> function.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">calendar-show-week</span> <span class="literal">t</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
Set Monday as the first day of the week, and set my location.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> calendar-week-start-day <span class="number">1</span></span><br><span class="line">      calendar-latitude <span class="number">39.92</span></span><br><span class="line">      calendar-longitude <span class="number">116.46</span></span><br><span class="line">      calendar-location-name <span class="string">"Beijing, China"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org88d41b0" class="outline-3">
<h3 id="org88d41b0">End of configuration</h3>
<div class="outline-text-3" id="text-org88d41b0">
<p>
Oh YA!! We finish loading emacs configuration :)
</p>

<p>
However, since we use <code>req-package</code> for loading and installing packages, be sure
to execute following line to send <code>req-package</code> on its merry way.
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">req-package-finish</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd17807e" class="outline-2">
<h2 id="orgd17807e">Reference</h2>
<div class="outline-text-2" id="text-orgd17807e">
<p>
Following link is refrence for my emac config.
</p>

<p>
<code>[1]</code> <a href="https://github.com/r0man/.emacs.d/blob/master/init.el.org" target="_blank" rel="external">https://github.com/r0man/.emacs.d/blob/master/init.el.org</a>
</p>

<p>
<code>[2]</code> <a href="https://github.com/bodil/emacs.d" target="_blank" rel="external">https://github.com/bodil/emacs.d</a>
</p>

<p>
<code>[3]</code> <a href="https://github.com/mgalgs/.emacs.d" target="_blank" rel="external">https://github.com/mgalgs/.emacs.d</a>
</p>

<p>
<code>[4]</code> <a href="https://raw.githubusercontent.com/sbisaacson/literate-emacs/master/README.org" target="_blank" rel="external">https://raw.githubusercontent.com/sbisaacson/literate-emacs/master/README.org</a>
</p>

<p>
<code>[5]</code> <a href="https://github.com/jhenahan/emacs.d/blob/master/emacs-init.org" target="_blank" rel="external">https://github.com/jhenahan/emacs.d/blob/master/emacs-init.org</a>
</p>

<p>
<code>[6]</code> <a href="https://ryuslash.org/dotfiles/emacs/init.html" target="_blank" rel="external">https://ryuslash.org/dotfiles/emacs/init.html</a>
</p>

<p>
<code>[7]</code> <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.org_.txt" target="_blank" rel="external">http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.org_.txt</a>
</p>

<p>
<code>[8]</code> <a href="https://github.com/howardabrams/dot-files" target="_blank" rel="external">https://github.com/howardabrams/dot-files</a>
</p>

<p>
<code>[9]</code> <a href="https://github.com/coldnew/coldnew-spacemacs" target="_blank" rel="external">https://github.com/coldnew/coldnew-spacemacs</a>
</p>
</div>
</div>

Last Updated 2017-04-08 Sat 10:30 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/15/房子，北京/" itemprop="url">
                  房子，北京
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-15T08:00:00+08:00" content="2017-03-15">
              2017-03-15
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LIFE/" itemprop="url" rel="index">
                    <span itemprop="name">LIFE</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/15/房子，北京/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/03/15/房子，北京/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org714c493" class="outline-2">
<h2 id="org714c493">缘起</h2>
<div class="outline-text-2" id="text-org714c493">
<p>
今天早上看了一篇同学分享的文章--<a href="http://mp.weixin.qq.com/s?__biz=MjM5OTQ0MjM4MA==&amp;mid=2651896417&amp;idx=2&amp;sn=3f956b783256b99e925c1c062b50a773&amp;chksm=bcdf78c28ba8f1d416901eae3e4cea7230f176c975007d4af61c153303ecc75a498ce7711a31&amp;mpshare=1&amp;scene=1&amp;srcid=0313S3DzfdNKeRHFAUfjBRoZ#rd" target="_blank" rel="external">《清华硕士集体逃离北京！一枚中科院科研人员的自白： 我为什么选择离开》</a>
</p>

<p>
又一次被现实刺痛，思绪满天飞，于是写下这篇博客
</p>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-orgb9dd373" class="outline-2">
<h2 id="orgb9dd373">男怕入错行</h2>
<div class="outline-text-2" id="text-orgb9dd373">
<p>
细细想来，在北京已经待了十年有余，八年的求学生涯加近两年的工作，占去了我人生黄金年龄的 1/3，对未来的规划越来越清晰，失去了很多东西，也收获了很多东西。
</p>

<p>
“男怕入错行”，四五年前，还不以为然，年少轻狂的我坚持认为，只要我想做，我想坚持，“行行出状元”，然而，现实给了我一个大大的火锅。
</p>

<p>
我博士是做基础研究的，上学第二三年，当时就想想一辈子就去做基础研究，感觉挺适合我的，可以让我静下心来，做自己感兴趣的事情。前年毕业时，我最终选择了去公司，一部分原因是在实验室的生活太苦闷，研究课题都是老板定的，自己的想法没有一个实现的，当然了，发的文章分也不高，好的科研院所比较难进(基本只招北京本地人了)，博后也不想去；另一个方面原因就是因为 money，科研赚的太少了，男人，还是要养家糊口的，现在，我的目标越来越清晰，以后就是医学数据科学家这个方向，不会有大的改动。
</p>

<p>
科研不像现在 IT 互联网方向的，动不动本科硕士毕业就二三十万，我们博士毕业两三年也到不了这个数。所以，我需要做出改变，不过，改变的难度也是比较大的，但是，不改变，未来会一直苦下去。
</p>

<p>
现在，才算真正理解了“男怕入错行”这句话。
</p>
</div>
</div>

<div id="outline-container-orgec42628" class="outline-2">
<h2 id="orgec42628">努力前行</h2>
<div class="outline-text-2" id="text-orgec42628">
<p>
在北京生活，房子是一个绕不开的话题，像我这种家在农村比较贫穷的情况，很难买的起房，学区房，算了吧，能在北京周边买一个小房子已经谢天谢地了，不过，还好，我有爱人陪伴，不离不弃，这是我来北京最大的收获。
</p>

<p>
为了未来的生活，为了未来有一套我们的爱巢，我要努力前行。
</p>
</div>
</div>

Last Updated 2017-03-15 Wed 10:05 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/26/Use Mu4e to manage email/" itemprop="url">
                  Use Mu4e to manage email [用 mu4e 管理邮件]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-02-26T08:00:00+08:00" content="2017-02-26">
              2017-02-26
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/02/26/Use Mu4e to manage email/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/26/Use Mu4e to manage email/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org6474993" class="outline-2">
<h2 id="org6474993">概述</h2>
<div class="outline-text-2" id="text-org6474993">
<p>
用 offlineimap 收取邮件，用 mu4e 在 emacs 中管理邮件，本教程配置多账户。
</p>

<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-org1b44212" class="outline-2">
<h2 id="org1b44212">offlineimap 设置</h2>
<div class="outline-text-2" id="text-org1b44212">
</div><div id="outline-container-orgf39ab9e" class="outline-3">
<h3 id="orgf39ab9e">安装 offlineimap</h3>
<div class="outline-text-3" id="text-orgf39ab9e">
<p>
本人用 archlinux，直接 <code>sudo pacman -S offlineimap</code> 即可
</p>
</div>
</div>

<div id="outline-container-orgd8f75d2" class="outline-3">
<h3 id="orgd8f75d2">配置 offlineimap</h3>
<div class="outline-text-3" id="text-orgd8f75d2">
<p>
在 home 目录下建立 .offlineimaprc 文件，加入以下代码
</p>

<div class="org-src-container">
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- mode: python2 -*-</span></span><br><span class="line">[general]</span><br><span class="line"><span class="comment"># accounts = Gmail, Foxmail, Lengyue-163</span></span><br><span class="line">accounts = Gmail, Foxmail</span><br><span class="line">maxsyncaccounts = <span class="number">2</span></span><br><span class="line">pythonfile = ~/.offlineimap.py</span><br><span class="line"></span><br><span class="line">[Account Gmail]</span><br><span class="line">localrepository = Gmail-Local</span><br><span class="line">remoterepository = Gmail-Remote</span><br><span class="line"></span><br><span class="line">[Repository Gmail-Local]</span><br><span class="line">type = Maildir</span><br><span class="line">localfolders = ~/Documents/Mu4e/Gmail</span><br><span class="line"></span><br><span class="line">[Repository Gmail-Remote]</span><br><span class="line">type = Gmail</span><br><span class="line">auth_mechanisms = LOGIN</span><br><span class="line">remotehost = imap.gmail.com</span><br><span class="line">remoteuser = xxxxx@gmail.com</span><br><span class="line">remotepass = xxxxx</span><br><span class="line">ssl = true</span><br><span class="line">sslcacertfile = /etc/ssl/certs/ca-certificates.crt</span><br><span class="line">nametrans = <span class="keyword">lambda</span> foldername: foldername.decode(<span class="string">'imap4-utf-7'</span>).encode(<span class="string">'utf-8'</span>)</span><br><span class="line">folderfilter = <span class="keyword">lambda</span> folder: <span class="keyword">not</span> re.search(<span class="string">'(^Spam$|All)'</span>, folder)</span><br><span class="line">maxconnections = <span class="number">2</span></span><br><span class="line">realdelete = yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Account Foxmail]</span><br><span class="line">localrepository = Foxmail-Local</span><br><span class="line">remoterepository = Foxmail-Remote</span><br><span class="line"></span><br><span class="line">[Repository Foxmail-Local]</span><br><span class="line">type = Maildir</span><br><span class="line">localfolders = ~/Documents/Mu4e/Foxmail</span><br><span class="line"></span><br><span class="line">[Repository Foxmail-Remote]</span><br><span class="line">type = IMAP</span><br><span class="line">remotehost = imap.qq.com</span><br><span class="line">remoteuser = xxxxx@qq.com</span><br><span class="line">remotepass = xxxxx</span><br><span class="line">ssl = true</span><br><span class="line">sslcacertfile = /etc/ssl/certs/ca-certificates.crt</span><br><span class="line">nametrans = <span class="keyword">lambda</span> foldername: foldername.decode(<span class="string">'imap4-utf-7'</span>).encode(<span class="string">'utf-8'</span>)</span><br><span class="line">folderfilter = <span class="keyword">lambda</span> foldername: foldername <span class="keyword">in</span> [<span class="string">'INBOX'</span>,<span class="string">'Drafts'</span>, <span class="string">'Sent Messages'</span>, <span class="string">'Deleted Messages'</span>]</span><br><span class="line">maxconnections = <span class="number">2</span></span><br><span class="line">realdelete = no</span><br></pre></td></tr></table></figure>
</div>

<p>
设置 gmail 和 qq 两个账户，按照上面配置，邮箱和密码改成自己的(首先开通 gmail 和 qq 邮箱的 imap 功能，设置授权码，可参照后面参考资料)。
其中，比较重要的有以下几项:
</p>

<p>
<code>localfolders</code> 是下载邮件的位置
</p>

<p>
<code>nametrans = lambda foldername: foldername.decode('imap4-utf-7').encode('utf-8')</code> 防止中文乱码
</p>

<p>
<code>folderfilter = lambda foldername: foldername in ['INBOX','Drafts', 'Sent Messages', 'Deleted Messages']</code> 选择自己同步的文件夹
</p>

<p>
<code>folderfilter = lambda folder: not re.search('(^Spam$|All)', folder)</code> 不选择 Spam 和有 All 字样的文件夹同步 2
</p>

<p>
同时，在 home 目录下家里 <code>.offlineimap.py</code> 文件，加入以下内容，防止乱码
</p>

<div class="org-src-container">
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modified_base64</span><span class="params">(s)</span>:</span></span><br><span class="line">    s = s.encode(<span class="string">'utf-16be'</span>)</span><br><span class="line">    <span class="keyword">return</span> binascii.b2a_base64(s).rstrip(<span class="string">'\n='</span>).replace(<span class="string">'/'</span>, <span class="string">','</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doB64</span><span class="params">(_in, r)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> _in:</span><br><span class="line">        r.append(<span class="string">'&amp;amp;%s-'</span> % modified_base64(<span class="string">''</span>.join(_in)))</span><br><span class="line">        <span class="keyword">del</span> _in[:]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">encoder</span><span class="params">(s)</span>:</span></span><br><span class="line">    r = []</span><br><span class="line">    _in = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        ordC = ord(c)</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0x20</span> &amp;lt;= ordC &amp;lt;= <span class="number">0x25</span> <span class="keyword">or</span> <span class="number">0x27</span> &amp;lt;= ordC &amp;lt;= <span class="number">0x7e</span>:</span><br><span class="line">            doB64(_in, r)</span><br><span class="line">            r.append(c)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">'&amp;amp;'</span>:</span><br><span class="line">            doB64(_in, r)</span><br><span class="line">            r.append(<span class="string">'&amp;amp;-'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            _in.append(c)</span><br><span class="line">    doB64(_in, r)</span><br><span class="line">    <span class="keyword">return</span> (str(<span class="string">''</span>.join(r)), len(s))</span><br><span class="line"></span><br><span class="line"><span class="comment"># decoding</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modified_unbase64</span><span class="params">(s)</span>:</span></span><br><span class="line">    b = binascii.a2b_base64(s.replace(<span class="string">','</span>, <span class="string">'/'</span>) + <span class="string">'==='</span>)</span><br><span class="line">    <span class="keyword">return</span> unicode(b, <span class="string">'utf-16be'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decoder</span><span class="params">(s)</span>:</span></span><br><span class="line">    r = []</span><br><span class="line">    decode = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">'&amp;amp;'</span> <span class="keyword">and</span> <span class="keyword">not</span> decode:</span><br><span class="line">            decode.append(<span class="string">'&amp;amp;'</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">'-'</span> <span class="keyword">and</span> decode:</span><br><span class="line">            <span class="keyword">if</span> len(decode) == <span class="number">1</span>:</span><br><span class="line">                r.append(<span class="string">'&amp;amp;'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                r.append(modified_unbase64(<span class="string">''</span>.join(decode[<span class="number">1</span>:])))</span><br><span class="line">            decode = []</span><br><span class="line">        <span class="keyword">elif</span> decode:</span><br><span class="line">            decode.append(c)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            r.append(c)</span><br><span class="line">    <span class="keyword">if</span> decode:</span><br><span class="line">        r.append(modified_unbase64(<span class="string">''</span>.join(decode[<span class="number">1</span>:])))</span><br><span class="line">    bin_str = <span class="string">''</span>.join(r)</span><br><span class="line">    <span class="keyword">return</span> (bin_str, len(s))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamReader</span><span class="params">(codecs.StreamReader)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span><span class="params">(self, s, errors=<span class="string">'strict'</span>)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> decoder(s)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamWriter</span><span class="params">(codecs.StreamWriter)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span><span class="params">(self, s, errors=<span class="string">'strict'</span>)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> encoder(s)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">imap4_utf_7</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">'imap4-utf-7'</span>:</span><br><span class="line">        <span class="keyword">return</span> (encoder, decoder, StreamReader, StreamWriter)</span><br><span class="line">codecs.register(imap4_utf_7)</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org760baa1" class="outline-3">
<h3 id="org760baa1">用 offlineimap 下载邮件</h3>
<div class="outline-text-3" id="text-org760baa1">
<p>
在终端用运行命令 <code>offlineimap</code> ，下载邮件
</p>
</div>
</div>
</div>

<div id="outline-container-org15c7dd6" class="outline-2">
<h2 id="org15c7dd6">Mu4e 设置</h2>
<div class="outline-text-2" id="text-org15c7dd6">
<p>
我用 spacemacs，先将 mu4e layer 加入 spaemacs 配置文件中，启用 mu4e layer。
</p>

<p>
安装 mu4e 是 mu 软件的一部分，因此安装 mu 软件(yaourt mu)。
</p>

<p>
安装完成之后，建立索引，在终端运行 <code>mu index --rebuild --maildir=~/Documents/Mu4e</code> ，文件夹的位置根据自己的更改。
</p>

<p>
在 spacemacs 的配置文件中加入以下代码，注意：根据自己的邮箱个数等更改相应位置即可。
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-to-load-path</span> <span class="string">"~/.spacemacs.d/package/mu4e"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'mu4e</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-account-alist</span><br><span class="line">      <span class="quoted">'((<span class="string">"Gmail"</span></span><br><span class="line">         ;; Under each account, set the account-specific variables you want.</span><br><span class="line">         (mu4e-sent-messages-behavior delete)</span><br><span class="line">         (mu4e-sent-folder <span class="string">"/Gmail/[Gmail].Sent Mail"</span>)</span><br><span class="line">         (mu4e-drafts-folder <span class="string">"/Gmail/[Gmail].Drafts"</span>)</span><br><span class="line">         (user-mail-address <span class="string">"xxxxx@gmail.com"</span>)</span><br><span class="line">         (user-full-name <span class="string">"xxxxx"</span>))</span><br><span class="line">        (<span class="string">"Foxmail"</span></span><br><span class="line">         (mu4e-sent-messages-behavior sent)</span><br><span class="line">         (mu4e-sent-folder <span class="string">"/Foxmail/Sent Messages"</span>)</span><br><span class="line">         (mu4e-drafts-folder <span class="string">"/Foxmail/Drafts"</span>)</span><br><span class="line">         (user-mail-address <span class="string">"xxxxx@foxmail.com"</span>)</span><br><span class="line">         (user-full-name <span class="string">"xxxxx"</span>))</span><br><span class="line">        ;; (<span class="string">"Lengyue-163"</span></span><br><span class="line">        ;;  (mu4e-sent-messages-behavior sent)</span><br><span class="line">        ;;  (mu4e-sent-folder <span class="string">"/Lengyue-163/Sent Items"</span>)</span><br><span class="line">        ;;  (mu4e-drafts-folder <span class="string">"/Lengyue-163/Drafts"</span>)</span><br><span class="line">        ;;  (user-mail-address <span class="string">"zanghuahong@163.com"</span>)</span><br><span class="line">        ;;  (user-full-name <span class="string">"Mao Xiaowei"</span>))</span><br><span class="line">       )</span></span><br><span class="line">)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">mu4e/mail-account-reset</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Set up some common mu4e variables</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-maildir <span class="string">"~/Documents/Mu4e"</span></span><br><span class="line">      mu4e-trash-folder <span class="string">"/Gmail/Trash"</span></span><br><span class="line">      mu4e-refile-folder <span class="string">"/Gmail/Archive"</span></span><br><span class="line">      <span class="comment">;; mu4e-get-mail-command "mbsync -a"</span></span><br><span class="line">      mu4e-update-interval <span class="literal">nil</span></span><br><span class="line">      mu4e-compose-signature-auto-include <span class="literal">nil</span></span><br><span class="line">      mu4e-view-show-images <span class="literal">t</span></span><br><span class="line">      mu4e-view-show-addresses <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Mail directory shortcuts</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-maildir-shortcuts</span><br><span class="line">      <span class="quoted">'(</span><br><span class="line">        (<span class="string">"/Foxmail/INBOX"</span> . ?f)</span><br><span class="line">        (<span class="string">"/Foxmail/Drafts"</span> . ?d)</span><br><span class="line">        (<span class="string">"/Foxmail/Sent Messages"</span> . ?s)</span><br><span class="line">        (<span class="string">"/Gmail/INBOX"</span> . ?g)</span><br><span class="line">        ;; (<span class="string">"/Gmail/[Gmail].All Mail"</span> . ?a)</span><br><span class="line">        (<span class="string">"/Gmail/[Gmail].Drafts"</span> . ?r)</span><br><span class="line">        (<span class="string">"/Gmail/[Gmail].Sent Mail"</span> . ?m)</span><br><span class="line">        (<span class="string">"/Gmail/[Gmail].Trash"</span> . ?<span class="literal">t</span>)</span><br><span class="line">        ;; (<span class="string">"/Lengyue-163/INBOX"</span> . ?i)</span><br><span class="line">        )</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; Bookmarks</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-bookmarks</span><br><span class="line">      <span class="quoted">`((<span class="string">"flag:unread AND NOT flag:trashed"</span> <span class="string">"Unread messages"</span> ?u)</span><br><span class="line">        (<span class="string">"date:today..now"</span> <span class="string">"Today's messages"</span> ?<span class="literal">t</span>)</span><br><span class="line">        (<span class="string">"date:7d..now"</span> <span class="string">"Last 7 days"</span> ?w)</span><br><span class="line">        (<span class="string">"mime:image/*"</span> <span class="string">"Messages with images"</span> ?p)</span><br><span class="line">        (,(mapconcat 'identity</span><br><span class="line">                     (mapcar</span><br><span class="line">                      (lambda (maildir)</span><br><span class="line">                        (concat <span class="string">"maildir:"</span> (car maildir)))</span><br><span class="line">                      mu4e-maildir-shortcuts) <span class="string">" OR "</span>)</span><br><span class="line">         <span class="string">"All inboxes"</span> ?i))</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-enable-notifications <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">with-eval-after-load</span> <span class="quoted">'mu4e-alert</span></span><br><span class="line">  <span class="comment">;; Enable Desktop notifications</span></span><br><span class="line">  <span class="comment">;; (mu4e-alert-set-default-style 'notifications)) ; For linux</span></span><br><span class="line">  <span class="list">(<span class="keyword">mu4e-alert-set-default-style</span> <span class="quoted">'libnotify</span>)</span>)</span>  <span class="comment">; Alternative for linux</span></span><br><span class="line">  <span class="comment">;; (mu4e-alert-set-default-style 'notifier))   ; For Mac OSX (through the</span></span><br><span class="line">                                        <span class="comment">; terminal notifier app)</span></span><br><span class="line"><span class="comment">;; (mu4e-alert-set-default-style 'growl))      ; Alternative for Mac OSX</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-enable-mode-line <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-get-mail-command <span class="string">"offlineimap"</span>)</span></span><br><span class="line"><span class="comment">;; Fetch mail in 60 sec interval</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-update-interval <span class="number">60</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'mu4e-contrib</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-html2text-command <span class="quoted">'mu4e-shr2text</span>)</span></span><br><span class="line"><span class="comment">;; try to emulate some of the eww key-bindings</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'mu4e-view-mode-hook</span></span><br><span class="line">          <span class="list">(<span class="keyword">lambda</span> <span class="list">()</span></span><br><span class="line">            <span class="list">(<span class="keyword">local-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;tab&amp;gt;"</span>)</span> <span class="quoted">'shr-next-link</span>)</span></span><br><span class="line">            <span class="list">(<span class="keyword">local-set-key</span> <span class="list">(<span class="keyword">kbd</span> <span class="string">"&amp;lt;backtab&amp;gt;"</span>)</span> <span class="quoted">'shr-previous-link</span>)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; something about ourselves</span></span><br><span class="line"><span class="list">(<span class="keyword">require</span> <span class="quoted">'smtpmail</span>)</span>  </span><br><span class="line"><span class="list">(<span class="keyword">setq</span> user-mail-address <span class="string">"xxxxx@foxmail.com"</span>  </span><br><span class="line">      user-full-name <span class="string">"xxxxx"</span></span><br><span class="line">      smtpmail-stream-type <span class="quoted">'starttls</span></span><br><span class="line">      starttls-use-gnutls <span class="literal">t</span></span><br><span class="line">      mu4e-compose-signature  </span><br><span class="line">      <span class="list">(<span class="keyword">concat</span>  </span><br><span class="line">       <span class="string">"xxxx\n"</span>  </span><br><span class="line">       <span class="string">"Blog: http://lengyueyang.github.io\n"</span>  </span><br><span class="line">       <span class="string">"\n"</span>)</span>  </span><br><span class="line">      mu4e-compose-signature-auto-include <span class="literal">t</span>  </span><br><span class="line">      )</span>  </span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> send-mail-function            <span class="quoted">'smtpmail-send-it</span></span><br><span class="line">      message-send-mail-function    <span class="quoted">'smtpmail-send-it</span></span><br><span class="line">      smtpmail-auth-credentials     <span class="list">(<span class="keyword">expand-file-name</span> <span class="string">"~/.authinfo"</span>)</span></span><br><span class="line">      smtpmail-stream-type          <span class="quoted">'tls</span></span><br><span class="line">      smtpmail-smtp-server          <span class="string">"smtp.qq.com"</span></span><br><span class="line">      smtpmail-smtp-service         <span class="number">465</span></span><br><span class="line">      smtpmail-smtp-user <span class="string">"xxxxx@qq.com"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> message-kill-buffer-on-exit <span class="literal">t</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; save attachment to my desktop (this can also be a function)  </span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> mu4e-attachment-dir <span class="string">"/home/lengyue/Documents/Mu4e/Attachment"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>

<div id="outline-container-org7e96aa4" class="outline-3">
<h3 id="org7e96aa4">几点说明：</h3>
<div class="outline-text-3" id="text-org7e96aa4">
<p>
mu 更新后，发现系统不能自己找到 mu4e 文件夹，因此手动链接
<code>(add-to-load-path "~/.spacemacs.d/package/mu4e")</code>
</p>

<p>
contact 内容是自己的邮件签名
</p>
</div>
</div>
</div>

<div id="outline-container-org55aceeb" class="outline-2">
<h2 id="org55aceeb">Mu4e 简单使用小结</h2>
<div class="outline-text-2" id="text-org55aceeb">
</div><div id="outline-container-org7160d19" class="outline-3">
<h3 id="org7160d19">Keybindings to remember of Mu4e</h3>
<div class="outline-text-3" id="text-org7160d19">
</div><div id="outline-container-orgcecb851" class="outline-4">
<h4 id="orgcecb851"><code>offlineimap</code> and <code>mu index --maildir=~/Documents/Mu4e</code></h4>
</div>
<div id="outline-container-orgad25f2d" class="outline-4">
<h4 id="orgad25f2d">Main view-Default bindings</h4>
<div class="outline-text-4" id="text-orgad25f2d">
<p>
R: Reply      s: search            .: raw view (toggle)
</p>

<p>
F: Forward    j: jump-to-maildir   q: quit
C: Compose    b: bookmark-search
</p>

<p>
E: Edit       B: edit bookmark-search
</p>
</div>
</div>

<div id="outline-container-org60692fd" class="outline-4">
<h4 id="org60692fd">Headers menu in the emacs menu bar</h4>
<div class="outline-text-4" id="text-org60692fd">
<p>
key          description
</p>

<p>
n,p          view the next, previous message
</p>

<p>
],[          move to the next, previous unread message
</p>

<p>
y            select the message view (if it's visible)
</p>

<p>
RET          open the message at point in the message view
</p>


<p>
searching
</p>

<p>
s            search
</p>

<p>
S            edit last query
</p>

<p>
/            narrow the search
</p>

<p>
b            search bookmark
</p>

<p>
B            edit bookmark before search
</p>

<p>
j            jump to maildir
</p>

<p>
M-left,\     previous query
</p>

<p>
M-right      next query
</p>

<p>
O            change sort order
</p>

<p>
P            toggle threading
</p>

<p>
Q            toggle full-search
</p>

<p>
V            toggle skip-duplicates
</p>

<p>
W            toggle include-related
</p>

<p>
marking
</p>

<p>
d            mark for moving to the trash folder
</p>

<p>
=            mark for removing trash flag ('untrash')
</p>

<p>
DEL,D        mark for complete deletion
</p>

<p>
m            mark for moving to another maildir folder
</p>

<p>
r            mark for refiling
</p>

<p>
+,-          mark for flagging/unflagging
</p>

<p>
?,!          mark message as unread, read
</p>

<p>
u            unmark message at point
</p>

<p>
U            unmark <b>all</b> messages
</p>

<p>
%            mark based on a regular expression
</p>

<p>
T,t          mark whole thread, subthread
</p>

<p>
&lt;insert&gt;,*   mark for 'something' (decide later)
</p>

<p>
x            execute actions for the marked messages
</p>

<p>
composition
</p>

<p>
R,F,C        reply/forward/compose
</p>

<p>
E            edit (only allowed for draft messages)
</p>


<p>
misc
</p>


<p>
;            switch focus
</p>

<p>
a            execute some custom action on a header
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">pipe message through shell command</td>
</tr>
</tbody>
</table>

<p>
C-+,C&#x2013;      increase / decrease the number of headers shown
</p>

<p>
H            get help
</p>

<p>
C-S-u        update mail &amp; reindex
</p>

<p>
q            leave the headers buffer
</p>
</div>
</div>


<div id="outline-container-org471828c" class="outline-4">
<h4 id="org471828c">Message View</h4>
<div class="outline-text-4" id="text-org471828c">
<p>
key          description
</p>

<p>
n,p          view the next, previous message
</p>

<p>
],[          move to the next, previous unread message
</p>

<p>
y            select the headers view (if it's visible)
</p>

<p>
RET          scroll down
</p>

<p>
M-RET        open URL at point / attachment at point
</p>

<p>
SPC          scroll down, if at end, move to next message
</p>

<p>
S-SPC        scroll up
</p>

<p>
searching
</p>

<p>
s            search
</p>

<p>
e            edit last query
</p>

<p>
/            narrow the search
</p>

<p>
b            search bookmark
</p>

<p>
B            edit bookmark before search
</p>

<p>
j            jump to maildir
</p>

<p>
M-left       previous query
</p>

<p>
M-right      next query
</p>

<p>
marking
</p>

<p>
d            mark for moving to the trash folder
</p>

<p>
=            mark for removing trash flag ('untrash')
</p>

<p>
DEL,D        mark for complete deletion
</p>

<p>
m            mark for moving to another maildir folder
</p>

<p>
r            mark for refiling
</p>

<p>
+,-          mark for flagging/unflagging
</p>

<p>
u            unmark message at point
</p>

<p>
U            unmark <b>all</b> messages
</p>

<p>
%            mark based on a regular expression
</p>

<p>
T,t          mark whole thread, subthread
</p>

<p>
&lt;insert&gt;,*   mark for 'something' (decide later)
</p>

<p>
x            execute actions for the marked messages
</p>

<p>
composition
</p>

<p>
R,F,C        reply/forward/compose
</p>

<p>
E            edit (only allowed for draft messages)
</p>

<p>
actions
</p>

<p>
g            go to (visit) numbered URL (using `browse-url')
</p>

<p>
(or: &lt;mouse-1&gt; or M-RET with point on url)
</p>

<p>
C-u g visits multiple URLs
</p>

<p>
f            fetch (download )the numbered URL.
</p>

<p>
C-u f fetches multiple URLs
</p>

<p>
k            save the numbered URL in the kill-ring.
</p>

<p>
C-u k saves multiple URLs
</p>

<p>
e            extract (save) attachment (asks for number)
</p>

<p>
(or: &lt;mouse-2&gt; or S-RET with point on attachment)
</p>

<p>
C-u e extracts multiple attachments
</p>

<p>
o            open attachment (asks for number)
</p>

<p>
(or: &lt;mouse-1&gt; or M-RET with point on attachment)
</p>

<p>
a            execute some custom action on the message
</p>

<p>
A            execute some custom action on an attachment
</p>

<p>
misc
</p>

<p>
;            switch focus
</p>

<p>
c            copy address at point (with C-u copy long version)
</p>

<p>
h            toggle between html/text (if available)
</p>

<p>
w            toggle line wrapping
</p>

<p>
v            show details about the cryptographic signature
</p>

<p>
.            show the raw message view. 'q' takes you back.
</p>

<p>
C-+,C&#x2013;      increase / decrease the number of headers shown
</p>

<p>
H            get help
</p>

<p>
C-S-u        update mail &amp; reindex
</p>

<p>
q            leave the message view
</p>
</div>
</div>

<div id="outline-container-orgb8d5c3d" class="outline-4">
<h4 id="orgb8d5c3d">Attachment actions</h4>
<div class="outline-text-4" id="text-orgb8d5c3d">
<p>
Similarly, there is mu4e-view-attachment-action (A) for actions on attachments, which you can specify with mu4e-view-attachment-actions.
</p>

<p>
mu4e predefines a number of attachment-actions:
</p>

<p>
open-with (w): open the attachment with some arbitrary program. For example, suppose you have received a message with a picture attachment; then, A w 1 RET gimp RET opens that attachment in The Gimp
pipe (|: process the attachment with some Unix shell-pipe and see the results. Suppose you receive a patch file, and would like to get an overview of the changes, using the diffstat program. You can use something like: A | 1 RET diffstat -b RET.
emacs (e): open the attachment in your running emacs. For example, if you receive some text file you’d like to open in emacs: A e 1 RET.
</p>
</div>
</div>

<div id="outline-container-org5b7746e" class="outline-4">
<h4 id="org5b7746e">Editor view</h4>
<div class="outline-text-4" id="text-org5b7746e">
<p>
key          description
</p>

<p>
C-c C-c      send message
</p>

<p>
C-c C-d      save to drafts and leave
</p>

<p>
C-c C-k      kill the message buffer (the message remains in the draft folder)
</p>

<p>
C-c C-a      attach a file (pro-tip: drag &amp; drop works as well)
</p>


<p>
(mu4e-specific)
</p>

<p>
C-S-u        update mail &amp; reindex
</p>
</div>
</div>

<div id="outline-container-org10ea880" class="outline-4">
<h4 id="org10ea880">What to mark for</h4>
<div class="outline-text-4" id="text-org10ea880">
<p>
mu4e supports a number of marks:
</p>

<p>
mark for/as   keybinding  | description
</p>

<p>
'something'  *, &lt;insert&gt; | mark now, decide later
</p>

<p>
delete        D, &lt;delete&gt; | delete
</p>

<p>
flag          +           | mark as 'flagged' ('starred')
</p>

<p>
move          m           | move to some maildir
</p>

<p>
read          !           | mark as read
</p>

<p>
refile        r           | mark for refiling
</p>

<p>
trash         d           | move to the trash folder
</p>

<p>
untrash       =           | remove 'trash' flag
</p>

<p>
unflag        -           | remove 'flagged' mark
</p>

<p>
unmark        u           | remove mark at point
</p>

<p>
unmark all    U           | remove all marks
</p>

<p>
unread        ?           | marks as unread
</p>

<p>
action        a           | apply some action
</p>
</div>
</div>
</div>

<div id="outline-container-org80dec1d" class="outline-3">
<h3 id="org80dec1d">其他</h3>
<div class="outline-text-3" id="text-org80dec1d">
<p>
若参考配置有问题，请移步官网或后面参考资料，或邮件联系我，随时欢迎 😍。
</p>
</div>
</div>
</div>



<div id="outline-container-orgc777ad1" class="outline-2">
<h2 id="orgc777ad1">参考资料</h2>
<div class="outline-text-2" id="text-orgc777ad1">
<ul class="org-ul">
<li><a href="https://github.com/larstvei/dot-emacs" target="_blank" rel="external">larstvei/dot-emacs: My Emacs configurations written in Org mode</a></li>
<li><a href="http://wenshanren.org/?p=111" target="_blank" rel="external">mu4e: an E-mail Client for Emacs | 肉山博客 (Wenshan's Blog)</a></li>
<li><a href="http://coldnew.github.io/blog/2016/01-02_mu4e/" target="_blank" rel="external">在 emacs 下使用 mu4e 收發郵件 | coldnew's blog</a></li>
<li><a href="http://blog.csdn.net/csfreebird/article/details/52973188" target="_blank" rel="external">spacemacs email layer - 博客频道 - CSDN.NET</a></li>
<li><a href="https://github.com/howardabrams/dot-files/blob/master/emacs-mail.org" target="_blank" rel="external">dot-files/emacs-mail.org at master · howardabrams/dot-files</a></li>
<li><a href="https://guso.ml/search?q=offlinemap+%E5%A4%9A%E5%B8%90%E6%88%B7&amp;prmd=ivns&amp;ei=pVc8WPPzNsv0vgTT2pn4Cw&amp;start=10&amp;sa=N" target="_blank" rel="external">offlinemap 多帐户 - Google 搜索</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/mu4e" target="_blank" rel="external">spacemacs/layers/+email/mu4e at master · syl20bnr/spacemacs</a></li>
<li><a href="http://www.djcbsoftware.nl/code/mu/mu4e/index.html" target="_blank" rel="external">Mu4e 0.9.16 user manual: Top</a></li>
<li><a href="https://github.com/lujun9972/emacs-document/blob/master/org-mode/%E7%94%A8org-mime%E5%9C%A8org-mode%E4%B8%AD%E5%8F%91%E9%80%81html%E9%82%AE%E4%BB%B6.org" target="_blank" rel="external">emacs-document/用 org-mime 在 org-mode 中发送 html 邮件.org at master · lujun9972/emacs-document</a></li>
<li><a href="https://emacs.lujianmei.com/03-For-an-editor/init-mu4e.html" target="_blank" rel="external">Mu4e 邮件管理 · 谁说 Emacs 不好玩？</a></li>
<li><a href="http://www.bagualu.net/wordpress/archives/6555" target="_blank" rel="external">emacs 中的 email 客户端 mu4e | 猎数博客</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/gnus#org-mime-in-org-layer" target="_blank" rel="external">spacemacs/layers/+email/gnus at master · syl20bnr/spacemacs</a></li>
</ul>
</div>
</div>

Last Updated 2017-02-26 Sun 22:56 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/23/Statistics in research article: Part 1, Univariate analysis/" itemprop="url">
                  Statistics in research article: Part 1, Univariate analysis [科研文章中的统计：第一部分，单因素分析]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-23T08:00:00+08:00" content="2016-04-23">
              2016-04-23
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/RESEARCH/" itemprop="url" rel="index">
                    <span itemprop="name">RESEARCH</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/23/Statistics in research article: Part 1, Univariate analysis/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/23/Statistics in research article: Part 1, Univariate analysis/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org431aecb" class="outline-2">
<h2 id="org431aecb">写作原因</h2>
<div class="outline-text-2" id="text-org431aecb">
<ul class="org-ul">
<li>最近学习 R 语言，这篇博客是学习 R 语言一个简单成果展示，这是第一部分，单因素分析</li>
<li>科研论文中的统计方法很重要，关系到结果的可信度，然而中国发表的很多文章，统计过关的不多</li>
<li>本文以 R 语言为切入点，以我自己文章中的数据为原型，简单阐述单因素分析的方法原理及过程</li>
<li>有关 R 语言介绍及安装方法，请移步 R 语言官方网<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>站</li>
</ul>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-org924d5cb" class="outline-2">
<h2 id="org924d5cb">R 分析基本流程</h2>
<div class="outline-text-2" id="text-org924d5cb">
</div><div id="outline-container-org65f5f9f" class="outline-3">
<h3 id="org65f5f9f">数据导入，在 R 语言中导入数据框用 read.table，再显示数据</h3>
<div class="outline-text-3" id="text-org65f5f9f">
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">F2TTC &amp;lt;- read.table(<span class="string">"file/F2TTC.csv"</span>, header=<span class="literal">TRUE</span>, sep=<span class="string">","</span>, na.strings=<span class="string">"NA"</span>, dec=<span class="string">"."</span>, strip.white=<span class="literal">TRUE</span>, check.names = <span class="literal">FALSE</span>)</span><br><span class="line">F2TTC</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;   Sham THP 40  + Sham     IR THP 10  + IR THP 20  + IR THP 40  + IR&#10;1     0              0 52.860       44.503       39.304       31.750&#10;2     0              0 46.746       26.012       26.299       33.871&#10;3     0              0 54.279       36.196       35.175       32.801&#10;4     0              0 46.767       43.956       38.761       34.568&#10;5     0              0 47.651       42.660       38.844       32.157&#10;6     0              0 55.392       36.196       41.210       34.302&#10;7     0              0 51.055       43.956       19.734       23.853&#10;8    NA             NA 45.789       42.660       23.413       16.602&#10;9    NA             NA 28.584           NA           NA       18.508&#10;10   NA             NA 36.514           NA           NA       13.746&#10;11   NA             NA 38.700           NA           NA       15.606&#10;12   NA             NA 47.441           NA           NA        0.000&#10;13   NA             NA 40.071           NA           NA        0.000</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org6876709" class="outline-3">
<h3 id="org6876709">检测数据是否有离群点及数据正态性判断</h3>
<div class="outline-text-3" id="text-org6876709">
<ul class="org-ul">
<li>用 reshape2 变换数据</li>
</ul>
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line">F2TTCR &amp;lt;- melt(F2TTC)</span><br><span class="line">names(F2TTCR)[<span class="number">1</span>:<span class="number">2</span>] &amp;lt;- c(<span class="string">"group"</span>, <span class="string">"value"</span>)</span><br><span class="line">F2TTCR</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;            group  value&#10;1            Sham  0.000&#10;2            Sham  0.000&#10;3            Sham  0.000&#10;4            Sham  0.000&#10;5            Sham  0.000&#10;6            Sham  0.000&#10;7            Sham  0.000&#10;8            Sham     NA&#10;9            Sham     NA&#10;10           Sham     NA&#10;11           Sham     NA&#10;12           Sham     NA&#10;13           Sham     NA&#10;14 THP 40  + Sham  0.000&#10;15 THP 40  + Sham  0.000&#10;16 THP 40  + Sham  0.000&#10;17 THP 40  + Sham  0.000&#10;18 THP 40  + Sham  0.000&#10;19 THP 40  + Sham  0.000&#10;20 THP 40  + Sham  0.000&#10;21 THP 40  + Sham     NA&#10;22 THP 40  + Sham     NA&#10;23 THP 40  + Sham     NA&#10;24 THP 40  + Sham     NA&#10;25 THP 40  + Sham     NA&#10;26 THP 40  + Sham     NA&#10;27             IR 52.860&#10;28             IR 46.746&#10;29             IR 54.279&#10;30             IR 46.767&#10;31             IR 47.651&#10;32             IR 55.392&#10;33             IR 51.055&#10;34             IR 45.789&#10;35             IR 28.584&#10;36             IR 36.514&#10;37             IR 38.700&#10;38             IR 47.441&#10;39             IR 40.071&#10;40   THP 10  + IR 44.503&#10;41   THP 10  + IR 26.012&#10;42   THP 10  + IR 36.196&#10;43   THP 10  + IR 43.956&#10;44   THP 10  + IR 42.660&#10;45   THP 10  + IR 36.196&#10;46   THP 10  + IR 43.956&#10;47   THP 10  + IR 42.660&#10;48   THP 10  + IR     NA&#10;49   THP 10  + IR     NA&#10;50   THP 10  + IR     NA&#10;51   THP 10  + IR     NA&#10;52   THP 10  + IR     NA&#10;53   THP 20  + IR 39.304&#10;54   THP 20  + IR 26.299&#10;55   THP 20  + IR 35.175&#10;56   THP 20  + IR 38.761&#10;57   THP 20  + IR 38.844&#10;58   THP 20  + IR 41.210&#10;59   THP 20  + IR 19.734&#10;60   THP 20  + IR 23.413&#10;61   THP 20  + IR     NA&#10;62   THP 20  + IR     NA&#10;63   THP 20  + IR     NA&#10;64   THP 20  + IR     NA&#10;65   THP 20  + IR     NA&#10;66   THP 40  + IR 31.750&#10;67   THP 40  + IR 33.871&#10;68   THP 40  + IR 32.801&#10;69   THP 40  + IR 34.568&#10;70   THP 40  + IR 32.157&#10;71   THP 40  + IR 34.302&#10;72   THP 40  + IR 23.853&#10;73   THP 40  + IR 16.602&#10;74   THP 40  + IR 18.508&#10;75   THP 40  + IR 13.746&#10;76   THP 40  + IR 15.606&#10;77   THP 40  + IR  0.000&#10;78   THP 40  + IR  0.000</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>检测数据是否有离群点，用 car 包中的 outlierTest 检测，下面数据 P &gt; 0.05，说明有离群点</li>
</ul>
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="keyword">library</span>(car)</span><br><span class="line">F2TTCout &amp;lt;- outlierTest(lm(value ~ group, data = F2TTCR))</span><br><span class="line">F2TTCout</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;No Studentized residuals with Bonferonni p &#38;lt; 0.05&#10;Largest |rstudent|:&#10;    rstudent unadjusted p-value Bonferonni p&#10;77 -3.020835          0.0039982       0.2239</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>用 Q-Q 图检验正态性假设，数据是非正态的</li>
</ul>
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">tiff(filename = <span class="string">"qqpF2T.tif"</span>,width = <span class="number">15</span>,height = <span class="number">18</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">600</span>)</span><br><span class="line">qqPlot(lm(value ~ group, data=F2TTCR), simulate=<span class="literal">TRUE</span>, main=<span class="string">"Q-Q Plot"</span>, labels=<span class="literal">TRUE</span>)</span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure>
</div>


<div class="figure">
<p><img src="http://7xrrxa.com1.z0.glb.clouddn.com/blogqqpF2T.png" alt="blogqqpF2T.png">
</p>
<p><span class="figure-number">Figure 1: </span>Q-Q 图</p>
</div>
</div>
</div>

<div id="outline-container-org6f56776" class="outline-3">
<h3 id="org6f56776">接下来应该进行方差齐性检验，常用方差齐性检验有 leveneTest 和 bartlett.test 两种</h3>
<div class="outline-text-3" id="text-org6f56776">
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">bartlett.test(value ~ group, data = F2TTCR)</span><br><span class="line">leveneTest(F2TTCR$value, F2TTCR$group)</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;        Bartlett test of homogeneity of variances&#10;data:  value by group&#10;Bartlett&#39;s K-squared = Inf, df = 5, p-value &#38;lt; 2.2e-16&#10;&#10;Levene&#39;s Test for Homogeneity of Variance (center = median)&#10;      Df F value    Pr(&#38;gt;F)&#10;group  5  5.5917 0.0003619&#10;      50</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0842b44" class="outline-3">
<h3 id="org0842b44">由于我上面数据非正态，所以用非参数检验方法检验各组差异，分两部分，一是各组之间的差异，用 kruskal.test，二是两两比较，用 posthoc.kruskal.nemenyi.test，由下面结果知道，IR 组和 Sham 组相比，有统计学意义(P &lt; 0.01)，用“**”表示差异，THP 10 + IR 组与 Sham 组，THP 40 + IR 与 IR 组相比，有统计学意义(P &lt; 0.05)，用“*”表示差异</h3>
<div class="outline-text-3" id="text-org0842b44">
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">kruskal.test(value ~ group, data = F2TTCR)</span><br><span class="line"><span class="keyword">library</span>(PMCMR)</span><br><span class="line">F2TTCSEM &amp;lt;- posthoc.kruskal.nemenyi.test(value ~ group, data=F2TTCR, dist=<span class="string">"Chisquare"</span>)</span><br><span class="line">F2TTCSEM</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;Kruskal-Wallis rank sum test&#10;&#10;data:  value by group&#10;Kruskal-Wallis chi-squared = 44.519, df = 5, p-value = 1.817e-08&#10;&#10;Pairwise comparisons using Nemenyi-test with Chi-squared        &#10;                       approximation for independent samples &#10;data:  value by group &#10;&#10;               Sham   THP 40  + Sham IR     THP 10  + IR THP 20  + IR&#10;THP 40  + Sham 1.0000 -              -      -            -           &#10;IR             0.0001 0.0001         -      -            -           &#10;THP 10  + IR   0.0154 0.0154         0.9673 -            -           &#10;THP 20  + IR   0.1416 0.1416         0.5666 0.9764       -           &#10;THP 40  + IR   0.6422 0.6422         0.0109 0.3315       0.8559      &#10;P value adjustment method: none</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org474d5d6" class="outline-3">
<h3 id="org474d5d6">做图</h3>
<div class="outline-text-3" id="text-org474d5d6">
<ul class="org-ul">
<li>数据处理，为做图做准备，用 dplyr 包进行数据整合</li>
</ul>
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="keyword">library</span>(plotrix)</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line">F2T &amp;lt;- summarise(group_by(F2TTCR, group), mean=mean(value, na.rm = <span class="literal">TRUE</span>), sem=std.error(value, na.rm=<span class="literal">TRUE</span>))</span><br><span class="line">F2T &amp;lt;- mutate(F2T, sign1=c(<span class="literal">NA</span>,<span class="literal">NA</span>,<span class="string">"**"</span>,<span class="string">"*"</span>,<span class="literal">NA</span>,<span class="literal">NA</span>), sign2=c(<span class="literal">NA</span>,<span class="literal">NA</span>,<span class="literal">NA</span>,<span class="literal">NA</span>,<span class="literal">NA</span>,<span class="string">"*"</span>))</span><br><span class="line">F2T</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+RESULTS:&#10;Source: local data frame [6 x 5]&#10;&#10;           group     mean      sem sign1 sign2&#10;          (fctr)    (dbl)    (dbl) (chr) (chr)&#10;1           Sham  0.00000 0.000000    NA    NA&#10;2 THP 40  + Sham  0.00000 0.000000    NA    NA&#10;3             IR 45.52685 2.139659    **    NA&#10;4   THP 10  + IR 39.51738 2.269635     *    NA&#10;5   THP 20  + IR 32.84250 2.963525    NA    NA&#10;6   THP 40  + IR 22.13569 3.477622    NA     *</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>做图</li>
</ul>
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(grid)</span><br><span class="line">levels(F2T$group) &amp;lt;- gsub(<span class="string">"  "</span>, <span class="string">"\n"</span>, levels(F2T$group))</span><br><span class="line">tiff(filename = <span class="string">"F2TTC.tif"</span>,width = <span class="number">16</span>,height = <span class="number">10</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">1200</span>)</span><br><span class="line">ggplot(data=F2T,aes(x=group,y=mean,fill=group, group=<span class="number">1</span>)) +</span><br><span class="line">  geom_errorbar(aes(ymin=mean,ymax=mean+sem, width = <span class="number">0.2</span>),size=<span class="number">0.8</span>) +</span><br><span class="line">  geom_bar(position=<span class="string">"stack"</span>,stat = <span class="string">"identity"</span>,width=<span class="number">0.6</span>,size=<span class="number">0.8</span>, colour=<span class="string">"black"</span>) +</span><br><span class="line">  scale_fill_manual(values=c(<span class="string">"grey100"</span>, <span class="string">"grey75"</span>,<span class="string">"grey0"</span>, <span class="string">"grey90"</span>,<span class="string">"grey50"</span>, <span class="string">"grey30"</span>)) +</span><br><span class="line">  theme_classic(base_family=<span class="string">"Times New Roman"</span>) + scale_x_discrete(<span class="string">""</span>) +</span><br><span class="line">  scale_y_continuous(<span class="string">"Infarct Size (%)"</span>, expand=c(<span class="number">0</span>,<span class="number">0</span>),limits = c(<span class="number">0</span>, <span class="number">70.2</span>), breaks=seq(<span class="number">0</span>,<span class="number">70</span>, by=<span class="number">10</span>)) +</span><br><span class="line">  theme(axis.text.x = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>), axis.text.y = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>),axis.title.y = element_text(family=<span class="string">"Times New Roman"</span>, face=<span class="string">"bold"</span>, size=<span class="number">15</span>, margin=margin(<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>)),axis.line = element_line(size = <span class="number">0.8</span>),axis.ticks = element_line(size = <span class="number">0.8</span>),axis.ticks.length=unit(<span class="number">0.2</span>,<span class="string">"cm"</span>), plot.margin=unit(c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>),<span class="string">"mm"</span>), legend.position=<span class="string">"none"</span>) +</span><br><span class="line">  geom_path(x=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>),y=c(<span class="number">50</span>,<span class="number">52</span>,<span class="number">52</span>,<span class="number">52</span>,<span class="number">52</span>,<span class="number">50</span>),size = <span class="number">0.6</span>) +</span><br><span class="line">  geom_path(x=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>),y=c(<span class="number">54</span>,<span class="number">56</span>,<span class="number">56</span>,<span class="number">56</span>,<span class="number">56</span>,<span class="number">54</span>),size = <span class="number">0.6</span>) +</span><br><span class="line">  geom_path(x=c(<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>),y=c(<span class="number">60</span>,<span class="number">62</span>,<span class="number">62</span>,<span class="number">62</span>,<span class="number">62</span>,<span class="number">60</span>),size = <span class="number">0.6</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x = <span class="number">2</span>, y = <span class="number">53</span>, label = <span class="string">"**"</span>,size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x = <span class="number">2.5</span>, y=<span class="number">57</span>, label = <span class="string">"*"</span>,size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x = <span class="number">4.5</span>, y = <span class="number">63</span>, label = <span class="string">"*"</span>,size=<span class="number">5</span>)</span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure>
</div>


<div class="figure">
<p><img src="http://7xrrxa.com1.z0.glb.clouddn.com/blogF2TTC.png" alt="blogF2TTC.png">
</p>
<p><span class="figure-number">Figure 2: </span>TTC 统计图</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc169572" class="outline-2">
<h2 id="orgc169572">另外两个例子</h2>
<div class="outline-text-2" id="text-orgc169572">
</div><div id="outline-container-org96cbded" class="outline-3">
<h3 id="org96cbded">非参数检验，多组作图</h3>
<div class="outline-text-3" id="text-org96cbded">
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">F2N3 &amp;lt;- read.table(<span class="string">"F2N3.csv"</span>, header=<span class="literal">TRUE</span>, sep=<span class="string">","</span>, na.strings=<span class="string">"NA"</span>, dec=<span class="string">"."</span>, strip.white=<span class="literal">TRUE</span>, check.names = <span class="literal">FALSE</span>)</span><br><span class="line">F2N24 &amp;lt;- read.table(<span class="string">"F2N24.csv"</span>, header=<span class="literal">TRUE</span>, sep=<span class="string">","</span>, na.strings=<span class="string">"NA"</span>, dec=<span class="string">"."</span>, strip.white=<span class="literal">TRUE</span>, check.names = <span class="literal">FALSE</span>)</span><br><span class="line">F2N3R &amp;lt;- melt(F2N3)</span><br><span class="line">names(F2N3R)[<span class="number">1</span>:<span class="number">2</span>] &amp;lt;- c(<span class="string">"group"</span>, <span class="string">"value"</span>)</span><br><span class="line">F2N24R &amp;lt;- melt(F2N24)</span><br><span class="line">names(F2N24R)[<span class="number">1</span>:<span class="number">2</span>] &amp;lt;- c(<span class="string">"group"</span>, <span class="string">"value"</span>)</span><br><span class="line">F2N3R$time &amp;lt;- rep(<span class="string">"3 h"</span>,<span class="number">96</span>)</span><br><span class="line">F2N24R$time &amp;lt;- rep(<span class="string">"24 h"</span>,<span class="number">96</span>)</span><br><span class="line">F2NR &amp;lt;- rbind(F2N3R, F2N24R)</span><br><span class="line">outlierTest(lm(value ~ group, data = F2NR))</span><br><span class="line">tiff(filename = <span class="string">"qqpF2N.tif"</span>,width = <span class="number">15</span>,height = <span class="number">18</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">600</span>)</span><br><span class="line">qqPlot(lm(value ~ group, data=F2NR), simulate=<span class="literal">TRUE</span>, main=<span class="string">"Q-Q Plot"</span>, labels=<span class="literal">TRUE</span>)</span><br><span class="line">dev.off()</span><br><span class="line">bartlett.test(value ~ group, data = F2NR)</span><br><span class="line">leveneTest(F2NR$value, F2NR$group)</span><br><span class="line">kruskal.test(value ~ group, data = F2NR)</span><br><span class="line">F2N3SEM &amp;lt;- posthoc.kruskal.nemenyi.test(value ~ group, data=F2N3R, dist=<span class="string">"Chisquare"</span>)</span><br><span class="line">F2N24SEM &amp;lt;- posthoc.kruskal.nemenyi.test(value ~ group, data=F2N24R, dist=<span class="string">"Chisquare"</span>)</span><br><span class="line">F2N &amp;lt;- summarise(group_by(F2NR, group, time), mean=mean(value, na.rm = <span class="literal">TRUE</span>), sem=std.error(value, na.rm=<span class="literal">TRUE</span>))</span><br><span class="line">F2N &amp;lt;- F2N[order(desc(F2N$time)), ]</span><br><span class="line">F2N$time &amp;lt;- factor(F2N$time,levels=unique(F2N$time))</span><br><span class="line">tiff(filename = <span class="string">"F2NSS.tif"</span>,width = <span class="number">20</span>, height = <span class="number">10</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">1200</span>)</span><br><span class="line">ggplot(data=F2N,aes(x=time,y=mean,fill=group, width=<span class="number">0.7</span>)) +</span><br><span class="line">  geom_bar(position=position_dodge(width=<span class="number">0.8</span>),stat = <span class="string">"identity"</span>,width=<span class="number">0.6</span>,size=<span class="number">0.8</span>) +</span><br><span class="line">  geom_errorbar(aes(ymin=mean,ymax=mean+sem, width = <span class="number">0.2</span>),position=position_dodge(width=<span class="number">0.8</span>),size=<span class="number">0.8</span>) +</span><br><span class="line">  geom_bar(position=position_dodge(width=<span class="number">0.8</span>), colour=<span class="string">"black"</span>,stat =<span class="string">"identity"</span>,width=<span class="number">0.6</span>,size=<span class="number">0.8</span>) +</span><br><span class="line">  scale_fill_manual(values=c(<span class="string">"grey100"</span>, <span class="string">"grey75"</span>,<span class="string">"grey0"</span>, <span class="string">"grey90"</span>,<span class="string">"grey50"</span>, <span class="string">"grey30"</span>)) +</span><br><span class="line">  theme_classic(base_family=<span class="string">"Times New Roman"</span>) + scale_x_discrete(<span class="string">""</span>) +</span><br><span class="line">  scale_y_continuous(<span class="string">"Neurological Score"</span>, expand=c(<span class="number">0</span>,<span class="number">0</span>),limits = c(<span class="number">0</span>, <span class="number">20.05</span>), breaks=seq(<span class="number">0</span>,<span class="number">20</span>, by=<span class="number">5</span>)) +</span><br><span class="line">  theme(axis.text.x = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>), axis.text.y = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>),axis.title.y = element_text(family=<span class="string">"Times New Roman"</span>, face=<span class="string">"bold"</span>, size=<span class="number">15</span>, margin=margin(<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>)),axis.line = element_line(size = <span class="number">0.8</span>),axis.ticks = element_line(size = <span class="number">0.8</span>),axis.ticks.length=unit(<span class="number">0.2</span>,<span class="string">"cm"</span>), plot.margin=unit(c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>),<span class="string">"mm"</span>), legend.title=element_blank(),legend.text = element_text(size = <span class="number">12</span>, face = <span class="string">"bold"</span>),legend.key.width = unit(<span class="number">0.8</span>, <span class="string">"cm"</span>),legend.key.height = unit(<span class="number">0.5</span>, <span class="string">"cm"</span>),legend.position=<span class="string">"right"</span>) +</span><br><span class="line">  geom_segment(aes(x=<span class="number">0.67</span>, y=<span class="number">16</span>, xend=<span class="number">0.67</span>, yend=<span class="number">16.5</span>)) +</span><br><span class="line">  geom_segment(aes(x=<span class="number">0.67</span>, y=<span class="number">16.5</span>, xend=<span class="number">1.33</span>, yend=<span class="number">16.5</span>)) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">0.93</span>, y=<span class="number">17</span>, label=<span class="string">"*"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">1.07</span>, y=<span class="number">17</span>, label=<span class="string">"**"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">1.2</span>, y=<span class="number">17</span>, label=<span class="string">"**"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">1.33</span>, y=<span class="number">17</span>, label=<span class="string">"*"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  geom_segment(aes(x=<span class="number">1.67</span>, y=<span class="number">16</span>, xend=<span class="number">1.67</span>, yend=<span class="number">16.5</span>)) +</span><br><span class="line">  geom_segment(aes(x=<span class="number">1.67</span>, y=<span class="number">16.5</span>, xend=<span class="number">2.20</span>, yend=<span class="number">16.5</span>)) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">1.93</span>, y=<span class="number">17</span>, label=<span class="string">"**"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">2.07</span>, y=<span class="number">17</span>, label=<span class="string">"**"</span>, size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x=<span class="number">2.2</span>, y=<span class="number">17</span>, label=<span class="string">"**"</span>, size=<span class="number">5</span>)</span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure>
</div>


<div class="figure">
<p><img src="http://7xrrxa.com1.z0.glb.clouddn.com/blogF2NSS.png" alt="blogF2NSS.png">
</p>
<p><span class="figure-number">Figure 3: </span>神经学评分统计图</p>
</div>
</div>
</div>

<div id="outline-container-org59ec703" class="outline-3">
<h3 id="org59ec703">参数检验，一组作图</h3>
<div class="outline-text-3" id="text-org59ec703">
<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">F3Ev &amp;lt;- read.table(<span class="string">"F3Ev.csv"</span>, header=<span class="literal">FALSE</span>, sep=<span class="string">","</span>, na.strings=<span class="string">"NA"</span>, dec=<span class="string">"."</span>, strip.white=<span class="literal">TRUE</span>)</span><br><span class="line">F3Ev &amp;lt;- as.data.frame(t(F3Ev))</span><br><span class="line">names(F3Ev)[<span class="number">1</span>:<span class="number">4</span>] &amp;lt;- c(<span class="string">"Sham"</span>, <span class="string">"THP 40  + Sham"</span>, <span class="string">"IR"</span>, <span class="string">"THP 40  + IR"</span>)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line">F3EvR &amp;lt;- melt(F3Ev)</span><br><span class="line">names(F3EvR)[<span class="number">1</span>:<span class="number">2</span>] &amp;lt;- c(<span class="string">"group"</span>, <span class="string">"value"</span>)</span><br><span class="line"><span class="keyword">library</span>(car)</span><br><span class="line">outlierTest(lm(value ~ group, data = F3EvR))</span><br><span class="line">tiff(filename = <span class="string">"qqpF3E.tif"</span>,width = <span class="number">15</span>,height = <span class="number">18</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">600</span>)</span><br><span class="line">qqPlot(lm(value ~ group, data=F3EvR), simulate=<span class="literal">TRUE</span>, main=<span class="string">"Q-Q Plot"</span>, labels=<span class="literal">TRUE</span>)</span><br><span class="line">dev.off()</span><br><span class="line">leveneTest(F3EvR$value, F3EvR$group)</span><br><span class="line">bartlett.test(value ~ group, data = F3EvR)</span><br><span class="line"><span class="keyword">library</span>(multcomp)</span><br><span class="line">F3EvOA &amp;lt;- aov(value ~ group, data=F3EvR)</span><br><span class="line">summary(F3EvOA)</span><br><span class="line">F3EvSEM &amp;lt;- summary(glht(F3EvOA, linfct = mcp(group = <span class="string">"Tukey"</span>)))</span><br><span class="line"><span class="keyword">library</span>(plotrix)</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line">F3E &amp;lt;- summarise(group_by(F3EvR, group), mean=mean(value, na.rm = <span class="literal">TRUE</span>), sem=std.error(value, na.rm=<span class="literal">TRUE</span>))</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(grid)</span><br><span class="line">levels(F3E$group) &amp;lt;- gsub(<span class="string">"  "</span>, <span class="string">"\n"</span>, levels(F3E$group))</span><br><span class="line">tiff(filename = <span class="string">"F3Evans Blue.tif"</span>,width = <span class="number">11</span>,height = <span class="number">10</span>,units =<span class="string">"cm"</span>,compression=<span class="string">"lzw"</span>,bg=<span class="string">"white"</span>,res=<span class="number">1200</span>)</span><br><span class="line">ggplot(data=F3E,aes(x=group,y=mean,fill=group, group=<span class="number">1</span>)) +</span><br><span class="line">  geom_errorbar(aes(ymin=mean,ymax=mean+sem, width = <span class="number">0.2</span>),size=<span class="number">0.8</span>) +</span><br><span class="line">  geom_bar(position=<span class="string">"stack"</span>,stat = <span class="string">"identity"</span>,width=<span class="number">0.6</span>,size=<span class="number">0.8</span>, colour=<span class="string">"black"</span>) +</span><br><span class="line">  scale_fill_manual(values=c(<span class="string">"grey100"</span>, <span class="string">"grey75"</span>,<span class="string">"grey0"</span>, <span class="string">"grey30"</span>)) +</span><br><span class="line">  theme_classic(base_family=<span class="string">"Times New Roman"</span>) + scale_x_discrete(<span class="string">""</span>) +</span><br><span class="line">  scale_y_continuous(<span class="string">"Evans Blue (ug/g)"</span>, expand=c(<span class="number">0</span>,<span class="number">0</span>),limits = c(<span class="number">0</span>, <span class="number">20.05</span>), breaks=seq(<span class="number">0</span>,<span class="number">20</span>, by=<span class="number">5</span>)) +</span><br><span class="line">  theme(axis.text.x = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>), axis.text.y = element_text(family=<span class="string">"Times New Roman"</span>,face=<span class="string">"bold"</span>, size=<span class="number">12</span>),axis.title.y = element_text(family=<span class="string">"Times New Roman"</span>, face=<span class="string">"bold"</span>, size=<span class="number">15</span>, margin=margin(<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>)),axis.line = element_line(size = <span class="number">0.8</span>),axis.ticks = element_line(size = <span class="number">0.8</span>),axis.ticks.length=unit(<span class="number">0.2</span>,<span class="string">"cm"</span>), plot.margin=unit(c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>),<span class="string">"mm"</span>), legend.position=<span class="string">"none"</span>) +</span><br><span class="line">  geom_path(x=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>),y=c(<span class="number">16</span>, <span class="number">16.5</span>, <span class="number">16.5</span>, <span class="number">16</span>),size = <span class="number">0.6</span>) +</span><br><span class="line">  geom_path(x=c(<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>),y=c(<span class="number">17.5</span>,<span class="number">18</span>,<span class="number">18</span>,<span class="number">17.5</span>),size = <span class="number">0.6</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x = <span class="number">2</span>, y = <span class="number">17</span>, label = <span class="string">"**"</span>,size=<span class="number">5</span>) +</span><br><span class="line">  annotate(<span class="string">"text"</span>,family=<span class="string">"Times New Roman"</span>, x = <span class="number">3.5</span>, y=<span class="number">18.5</span>, label = <span class="string">"**"</span>,size=<span class="number">5</span>)</span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure>
</div>


<div class="figure">
<p><img src="http://7xrrxa.com1.z0.glb.clouddn.com/blogF3Evans%20Blue.png" alt="blogF3Evans%20Blue.png">
</p>
<p><span class="figure-number">Figure 4: </span>Evans Blue 统计图</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd270aaa" class="outline-2">
<h2 id="orgd270aaa">注意事项</h2>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.r-project.org/" target="_blank" rel="external">https://www.r-project.org/</a>
</p></div></div>


</div>
</div>
Last Updated 2016-04-25 Mon 17:11 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/11/Blog with org-mode and github/" itemprop="url">
                  Blog with org-mode and github [用 Org-mdoe 和 github 搭建博客]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-11T08:00:00+08:00" content="2016-03-11">
              2016-03-11
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/11/Blog with org-mode and github/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/11/Blog with org-mode and github/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org9e2e00d" class="outline-2">
<h2 id="org9e2e00d">写在前面</h2>
<div class="outline-text-2" id="text-org9e2e00d">
<ul class="org-ul">
<li>长久以来，一直想建立自己的博客，今年开始学习 Emacs，偶遇几位大神用 Hexo 建立博客，于是也动手搭建自己的博客，记录学习过程，记录向数据科学转型学习点滴</li>
<li>本文简述用 Org-mode 写博客，通过 Hexo 搭建博客的过程，我的博客见<a href="http://lengyueyang.github.io/">一家之言</a></li>
</ul>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-orgdac7feb" class="outline-2">
<h2 id="orgdac7feb">用 Hexo 搭建博客</h2>
<div class="outline-text-2" id="text-orgdac7feb">
<p>
主要参照 CKJOKER<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>和岁月如歌<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>及漠然<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>的博客
</p>
<ul class="org-ul">
<li><p>
我本人用 Archlinux，先安装 npm，再通过 npm 安装 hexo
</p>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S npm</span><br><span class="line">mkdir hexo</span><br><span class="line">npm install -g hexo</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init</span><br><span class="line">hexo install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
<p>
这时候在浏览器中打开 <a href="http://0.0.0.0:4000/" target="_blank" rel="external">http://0.0.0.0:4000/</a> 应该能看到效果如图所示
<img src="http://7xrrxa.com1.z0.glb.clouddn.com/hexo_start.png" alt="hexo_start.png">
</p>

<ul class="org-ul">
<li><p>
安装 hexo 的一些插件
</p>

<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked@<span class="number">0.2</span> --save</span><br><span class="line">npm install hexo-renderer-stylus@<span class="number">0.2</span> --save</span><br><span class="line">npm install hexo-generator-feed@<span class="number">1</span> --save</span><br><span class="line">npm install hexo-generator-sitemap@<span class="number">1</span> --save</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgc90f83d" class="outline-2">
<h2 id="orgc90f83d">博客源代码托管到 Github 上</h2>
<div class="outline-text-2" id="text-orgc90f83d">
<ul class="org-ul">
<li>建立 Github 账号，设置本地 SSH，与 Github 连接</li>
<li><p>
修改 _config.yml，增加
</p>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line"><span class="built_in">type</span>: git</span><br><span class="line">repo: git@github.com:xxx/xxx.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
<p>
及根据参考修改其他配置
</p>
<ul class="org-ul">
<li><p>
使用 Next 主题，根据配置文件说明配置自己的博客
</p>

<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
</div></li>
<li><p>
打开自己的博客，修改美化相应选项
</p>

<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org261c9a0" class="outline-2">
<h2 id="org261c9a0">用 Org-mode 写博客</h2>
<div class="outline-text-2" id="text-org261c9a0">
<p>
主要参照 CodeFalling<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>和 zilongshanren<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>
</p>
<ul class="org-ul">
<li>用<a href="https://github.com/CodeFalling/blog-admin" target="_blank" rel="external">blog-admin</a> 做前端，参照文件说明配置</li>
<li>用<a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> 将写好的.org 文件转化成 hexo 识别的 md 文件并发布</li>
<li>参照 CodeFalling 和 zilongshanren 的 github 的 Spacemacs 私人配置更改自己的配置</li>
</ul>
</div>
</div>
<div id="outline-container-org6e3b0c8" class="outline-2">
<h2 id="org6e3b0c8">一些问题</h2>
<div class="outline-text-2" id="text-org6e3b0c8">
</div><div id="outline-container-org0199e66" class="outline-3">
<h3 id="org0199e66">Org-mode 图片插入</h3>
<div class="outline-text-3" id="text-org0199e66">
<ul class="org-ul">
<li>安装<a href="https://github.com/CodeFalling/hexo-asset-image" target="_blank" rel="external">hexo-asset-image</a>， 安装后在.md 文件中插入图片没有问题，在 org 中插入有问题</li>
<li>Org 中插入图片或者链接格式如下</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">file:filedir/file OR html adress</span><br></pre></td></tr></table></figure>
</div>
<ul class="org-ul">
<li>改变图片大小，位置，加入图片说明可增加以下代码</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+CAPTION: title with figure number&#10;#+ATTR_HTML: :width 200px :align left :title The tile of picture without figure number</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://ckjoker.github.io/2015/01/27/Linux-github-hexo-blog/" target="_blank" rel="external">https://ckjoker.github.io/2015/01/27/Linux-github-hexo-blog/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/" target="_blank" rel="external">http://lovenight.github.io/2015/11/10/Hexo-3-1-1-静态博客搭建指南/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://mritd.me/2015/12/31/Github-%E6%90%AD%E5%BB%BA-Hexo-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" target="_blank" rel="external">http://mritd.me/2015/12/31/Github-搭建-Hexo-静态博客/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/CodeFalling" target="_blank" rel="external">https://github.com/CodeFalling</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/zilongshanren" target="_blank" rel="external">https://github.com/zilongshanren</a>
</p></div></div>


</div>
</div>
Last Updated 2016-03-12 Sat 22:50 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/04/Use org-mode to make presentation/" itemprop="url">
                  Use org-mode to make slide [用 org-mode 做幻灯]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-04T08:00:00+08:00" content="2016-03-04">
              2016-03-04
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/04/Use org-mode to make presentation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/04/Use org-mode to make presentation/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<div id="outline-container-org8b78f0a" class="outline-2">
<h2 id="org8b78f0a">缘由：</h2>
<div class="outline-text-2" id="text-org8b78f0a">
<ul class="org-ul">
<li>之前做幻灯一直用 powerpoint，受限于各种格式调整，之后接触到了 latex，开始用 beamer 做幻灯</li>
<li>最近迷恋上了 Reproducible Research，用 org-mode 进行时间管理、写 blog，恰巧最近需要做幻灯，本文记录用 org-mode 进行写做幻灯的过程以及注意事项,本文示例见<a href="https://github.com/lengyueyang/org-beamer" target="_blank" rel="external">org-beamer</a></li>
</ul>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-org4f31859" class="outline-2">
<h2 id="org4f31859">配置</h2>
<div class="outline-text-2" id="text-org4f31859">
<ul class="org-ul">
<li>Org-mode 做幻灯实际上是用 org-mode 写做，转换成 latex 的 beamer，鉴于以后可能会用到中文，因此用 xelatex 编译 tex 文件</li>
<li>导出快捷键：SPC e l P，更改 tex 默认编译引擎，我安装的是 Tex live 版本，安装详情见<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>，更改引擎可参照<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> (我的应该是更改 latexmk.pl 文件中的 pdflatex 为 xelatex，这一步记不清楚了)</li>
</ul>
</div>
</div>
<div id="outline-container-orgba2c5c0" class="outline-2">
<h2 id="orgba2c5c0">Org-mode 做幻灯过程简介</h2>
<div class="outline-text-2" id="text-orgba2c5c0">
</div><div id="outline-container-org8e729b9" class="outline-3">
<h3 id="org8e729b9">Org-mode Beamer 模式设置</h3>
<div class="outline-text-3" id="text-org8e729b9">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TITLE:  Multiple therapeutic effects of progranulin on experimental acute ischaemic stroke&#10;#+AUTHOR: Xiaowei Mao&#10;#+EMAIL:  maoweirm@126.com&#10;#+BEAMER_HEADER: \date[March 4$^{th}$, 2016]{March 4$^{th}$, 2016 \\ \vskip 0.5cm \scriptsize{Brain. 2015 Jul;138(Pt 7):1932-48.}}&#10;#+BEAMER_HEADER: \title[Progranulin on ischemic stroke]{Multiple therapeutic effects of progranulin on experimental acute ischaemic stroke}&#10;#+BEAMER_HEADER: \institute[Pharmaron]{Pharmacology, Pharmaron} &#10;#+OPTIONS: H:2 num:t toc:1 \n:nil @:t ::t |:t ^:t -:t f:t *:t &#38;lt;:t&#10;#+OPTIONS: TeX:t LaTeX:nil skip:nil d:nil todo:t pri:nil tags:not-in-toc&#10;#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js&#10;#+EXPORT_SELECT_TAGS: export&#10;#+EXPORT_EXCLUDE_TAGS: noexport&#10;#+startup: beamer&#10;#+LaTeX_CLASS: beamer&#10;#+LaTeX_CLASS_OPTIONS: [bigger]&#10;#+COLUMNS: %40ITEM %10BEAMER_env(Env) %9BEAMER_envargs(Env Args) %4BEAMER_col(Col) %10BEAMER_extra(Extra)&#10;#+BEAMER_FRAME_LEVEL: 2&#10;#+LaTeX_HEADER: \usetheme{CambridgeUS}&#10;#+LaTeX_HEADER: \AtBeginSection{\begin{frame}{Outline}   \tableofcontents[currentsection] \end{frame} }&#10;#+LaTeX_HEADER: \setbeamertemplate{navigation symbols}{}&#10;#+LaTeX_HEADER: \renewcommand\maketitle{\frame[plain]{\titlepage}}&#10;#+LaTeX_HEADER: \usepackage{fontspec}&#10;#+LaTeX_HEADER: \usepackage{xeCJK}&#10;#+LaTeX_HEADER: \setmainfont{Times New Roman}&#10;#+LaTeX_HEADER: \setsansfont{Arial}&#10;#+LaTeX_HEADER: \setmonofont{Courier Std}&#10;#+LaTeX_HEADER: \setCJKmainfont[BoldFont={ },ItalicFont={ }]{WenQuanYi Micro Hei}&#10;#+LaTeX_HEADER: \setCJKsansfont{WenQuanYi Micro Hei}&#10;#+LaTeX_HEADER: \setCJKmonofont{WenQuanYi Micro Hei Mono} &#10;#+LaTeX_HEADER: \graphicspath{pic file folder}&#10;#+BEAMER_HEADER: %\logo{\includegraphics[height=5mm]{logo.png}}&#10;#+LaTeX_HEADER: \usepackage[backend = biber, natbib=true, style = science, sorting = none]{biblatex}&#10;#+LaTeX_HEADER: \addbibresource{Pharmaron.bib}&#10;#+LaTeX_HEADER: \AtBeginBibliography{\footnotesize}&#10;#+LaTeX_HEADER: \setbeamertemplate{bibliography item}[text]&#10;#+LaTeX_HEADER: \usepackage[none]{hyphenat}&#10;#+LaTeX_HEADER: \usepackage[abs]{overpic}</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>在幻灯首页及页脚短标题、时间以及系所</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+BEAMER_HEADER: \date[March 4$^{th}$, 2016]{March 4$^{th}$, 2016 \\ \vskip 0.5cm \scriptsize{Brain. 2015 Jul;138(Pt 7):1932-48.}}&#10;#+BEAMER_HEADER: \title[Progranulin on ischemic stroke]{Multiple therapeutic effects of progranulin on experimental acute ischaemic stroke}&#10;#+BEAMER_HEADER: \institute[Pharmaron]{Pharmacology, Pharmaron}</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>常规设置，注意 H：2 表示目录两层</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+OPTIONS: H:2 num:t toc:1 \n:nil @:t ::t |:t ^:t -:t f:t *:t &#38;lt;:t&#10;#+OPTIONS: TeX:t LaTeX:nil skip:nil d:nil todo:t pri:nil tags:not-in-toc&#10;#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js&#10;#+EXPORT_SELECT_TAGS: export&#10;#+EXPORT_EXCLUDE_TAGS: noexport&#10;#+startup: beamer&#10;#+LaTeX_CLASS: beamer&#10;#+LaTeX_CLASS_OPTIONS: [bigger]</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Beamer 主题选择，在每个 section 之前加入这个 section 的目录，标题页去掉页眉和页脚</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+LaTeX_HEADER: \usetheme{CambridgeUS}&#10;#+LaTeX_HEADER: \AtBeginSection{\begin{frame}{Outline}   \tableofcontents[currentsection] \end{frame} }&#10;#+LaTeX_HEADER: \setbeamertemplate{navigation symbols}{}&#10;#+LaTeX_HEADER: \renewcommand\maketitle{\frame[plain]{\titlepage}}</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>设置字体，用 fontspec 和 xeCJK 包</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+LaTeX_HEADER: \usepackage{fontspec}&#10;#+LaTeX_HEADER: \usepackage{xeCJK}&#10;#+LaTeX_HEADER: \setmainfont{Times New Roman}&#10;#+LaTeX_HEADER: \setsansfont{Arial}&#10;#+LaTeX_HEADER: \setmonofont{Courier Std}&#10;#+LaTeX_HEADER: \setCJKmainfont[BoldFont={ },ItalicFont={ }]{WenQuanYi Micro Hei}&#10;#+LaTeX_HEADER: \setCJKsansfont{WenQuanYi Micro Hei}&#10;#+LaTeX_HEADER: \setCJKmonofont{WenQuanYi Micro Hei Mono}</span><br></pre></td></tr></table></figure>
</div>


<ul class="org-ul">
<li>默认插入图片位置:</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+LaTeX_HEADER: \graphicspath{pic file folder}</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>参考文献</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+BEAMER_HEADER: %\logo{\includegraphics[height=5mm]{logo.png}}&#10;#+LaTeX_HEADER: \usepackage[backend = biber, natbib=true, style = science, sorting = none]{biblatex}&#10;#+LaTeX_HEADER: \addbibresource{Pharmaron.bib}&#10;#+LaTeX_HEADER: \AtBeginBibliography{\footnotesize}&#10;#+LaTeX_HEADER: \setbeamertemplate{bibliography item}[text]</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>取消断词，overpic 包</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+LaTeX_HEADER: \usepackage[none]{hyphenat}&#10;#+LaTeX_HEADER: \usepackage[abs]{overpic}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org400337d" class="outline-3">
<h3 id="org400337d">插入小标题及分页</h3>
<div class="outline-text-3" id="text-org400337d">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">*** A block                                                           :BMCOL:&#10;:PROPERTIES:&#10;:BEAMER_col: 0.6&#10;:END:&#10;- A stroke is a medical emergency in which the blood supply to any portion of the brain is interrupted or reduced.&#10;\vspace{0.5cm}&#10;- Alternative names: Cerebrovascular accident/ disease (CVA), Cerebral infarction, Cerebral hemorrhage.&#10;*** picture                                                         :BMCOL:&#10;:PROPERTIES:&#10;:BEAMER_col: 0.4&#10;:END:&#10;\includegraphics[width=4.5cm]{b1} \newline&#10;\centering \scriptsize{The Circle of Willis Anatomy}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org535f0cf" class="outline-3">
<h3 id="org535f0cf">插入多张图片</h3>
<div class="outline-text-3" id="text-org535f0cf">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">\begin{overpic}[height=6cm, width=12cm]{b2}&#10;\put(20,0){\visible&#38;lt;2&#38;gt;{\includegraphics[height=6cm, width=5.5cm]{b6}}}&#10;\put(200,0){\visible&#38;lt;2&#38;gt;{\includegraphics[height=6cm, width=4.5cm]{b3}}}&#10;\put(0,0){\visible&#38;lt;4&#38;gt;{\includegraphics[height=6cm, width=6.5cm]{b4}}}&#10;\put(172,0){\visible&#38;lt;4&#38;gt;{\includegraphics[height=6cm, width=6cm]{b5}}}&#10;\end{overpic}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgcb05b11" class="outline-3">
<h3 id="orgcb05b11">插入 block</h3>
<div class="outline-text-3" id="text-orgcb05b11">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">***                                                                 :BMCOL:&#10;:PROPERTIES:&#10;:BEAMER_col: 0.6&#10;:END:&#10;\includegraphics[height=5cm,width=\textwidth]{b10}&#10;*** \pause \small Stroke therapeutic strategy                 :B_block:BMCOL:&#10;:PROPERTIES:&#10;:BEAMER_col: 0.4&#10;:BEAMER_env: block&#10;:END:&#10;\begin{itemize}&#10;\item \footnotesize Broaden the therapeutic time window&#10;\begin{itemize}&#10; \item \scriptsize The new thrombolytics&#10; \item \scriptsize Neuroprotection agents-\emph{\textbf{progranulin}}&#10;\end{itemize}&#10;\item \footnotesize Therapy is recovery stage&#10;\begin{itemize}&#10; \item \scriptsize Neuroprotection agents&#10; \item \scriptsize Stem cell therapy&#10; \item \scriptsize Chinese traditional medicine&#10; \item \scriptsize Acupuncture&#10; \item \scriptsize ......&#10;\end{itemize}&#10;\end{itemize}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgc3fe4c6" class="outline-3">
<h3 id="orgc3fe4c6">插入参考文献</h3>
<div class="outline-text-3" id="text-orgc3fe4c6">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">** References&#10;\tiny&#10;\cite{moretti2015neuroprotection} \cite{george2015novel} \cite{butcher2010acute} \cite{hacke2008thrombolysis} \cite{kanazawa2011biochemical} \cite{kanazawa2011inhibition} \cite{nguyen2013progranulin} \cite{o20061}&#10;\printbibliography[heading = none]</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-orga3dcdf7" class="outline-2">
<h2 id="orga3dcdf7">一些问题</h2>
<div class="outline-text-2" id="text-orga3dcdf7">
</div><div id="outline-container-org9c63cd2" class="outline-3">
<h3 id="org9c63cd2">参考文献</h3>
<div class="outline-text-3" id="text-org9c63cd2">
<ul class="org-ul">
<li>默认编译快捷键不能编译参考文献，在配置文件中加入一下代码即可</li>
</ul>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-latex-pdf-process</span><br><span class="line">      <span class="quoted">'(<span class="string">"xelatex -interaction nonstopmode -output-directory %o %f"</span> <span class="string">"biber %b"</span> <span class="string">"xelatex -interaction nonstopmode -output-directory %o %f"</span> <span class="string">"xelatex -interaction nonstopmode -output-directory %o %f"</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li><p>
改变参考文献字体大小,加入一下代码
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">\AtBeginBibliography{\tiny}</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgb183b20" class="outline-3">
<h3 id="orgb183b20">脚注</h3>
<div class="outline-text-3" id="text-orgb183b20">
<ul class="org-ul">
<li>如果文章某一页有脚注，插入\footfullcite{脚注内容}即可</li>
<li>如果脚注连续，即插入参考文献 4-6，或 2,3，并且同一页插入两个相同脚注,可参考代码见<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>, 也可在我的 github 下载<a href="https://github.com/lengyueyang/org-beamer/blob/master/footnoteref.sty" target="_blank" rel="external">footnoteref</a>，</li>
</ul>
<p>
用\usepackage{footnoteref}
</p>
<ul class="org-ul">
<li><p>
改变脚注字体大小，加入一下代码
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">\renewcommand{\footnotesize}{\tiny}</span><br></pre></td></tr></table></figure>
</div></li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://attach3.bdwm.net/attach/boards/MathTools/M.1435670549.A/pkuthss-bootstrap-0.1.4.pdf" target="_blank" rel="external">http://attach3.bdwm.net/attach/boards/MathTools/M.1435670549.A/pkuthss-bootstrap-0.1.4.pdf</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://kieranhealy.org/blog/archives/2011/01/21/exporting-org-mode-to-pdf-via-xelatex/" target="_blank" rel="external">http://kieranhealy.org/blog/archives/2011/01/21/exporting-org-mode-to-pdf-via-xelatex/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://tex.stackexchange.com/questions/35673/biblatex-is-there-a-command-analogous-to-ifciteseen-but-within-one-page" target="_blank" rel="external">http://tex.stackexchange.com/questions/35673/biblatex-is-there-a-command-analogous-to-ifciteseen-but-within-one-page</a>
</p></div></div>


</div>
</div>
Last Updated 2016-03-07 Mon 08:14 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/28/Use org-mode to GTD/" itemprop="url">
                  Use org-mode to GTD [用 org-mode 做时间管理 ]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-28T08:00:00+08:00" content="2016-02-28">
              2016-02-28
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/28/Use org-mode to GTD/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/02/28/Use org-mode to GTD/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-org6baf8bf" class="outline-2">
<h2 id="org6baf8bf">写在前面</h2>
<div class="outline-text-2" id="text-org6baf8bf">
<ul class="org-ul">
<li>最近准备学习 R 和 Python 语言，比较了很多编辑器，最终选择了 Emacs，看到知乎上很多大神推荐 Spacemacs，准备用 Spacemacs 编写程序, 同时建立博客，记录学习过程。</li>
<li>首先接触了 Org-mode，用 org-mode 做时间管理，本文简述我用 org-mode 做时间管理的流程以及配置。</li>
<li>在用 org-mode 之前，应该有一些 Spacemacs 及 Org-mode 的使用经验（参见<a href="https://github.com/syl20bnr/spacemacs/blob/master/layers/org/README.org#element-insertion" target="_blank" rel="external">pacemacs Keybinding</a>和<a href="http://www.gnu.org/software/emacs/manual/html_mono/org.html#Outlines" target="_blank" rel="external">Org Mode Manual</a>)。</li>
</ul>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-org990f602" class="outline-2">
<h2 id="org990f602">我的 org-mode 工作流程</h2>
<div class="outline-text-2" id="text-org990f602">
</div><div id="outline-container-orgfac1f1f" class="outline-3">
<h3 id="orgfac1f1f">建立自己的 GTD 文件</h3>
<div class="outline-text-3" id="text-orgfac1f1f">
<p>
可以参照<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup><sup>, </sup><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>,我自己的 org 大纲如下：
</p>

<div class="org-src-container">
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment">#+STARTUP: overview</span></span><br><span class="line"><span class="comment">#+TAGS: INFORMATICS(i) STATISTICS(s) COMPUTER(c) READING(r) PRIVATE(p) EMACS(e) MEETING(m) BLOG(g) LIFE(l)</span></span><br><span class="line"><span class="comment">#+STARTUP: hidestars</span></span><br><span class="line">* TASKS</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Tasks</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># For one tasks</span></span><br><span class="line">** Spacemacs                                                          :EMACS:</span><br><span class="line">** Org-mode                                                           :EMACS:</span><br><span class="line">** Python                                                       :INFORMATICS:</span><br><span class="line">** R language                                                    :STATISTICS:</span><br><span class="line">** Reading                                                          :READING:</span><br><span class="line">* Calendar</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Calendar</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># For appointments</span></span><br><span class="line">** Daily Tasks</span><br><span class="line">** Inbox</span><br><span class="line">** Quick Notes</span><br><span class="line">** Blog Ideas                                                         :BLOG:</span><br><span class="line">** <span class="number">2016</span>                                                            :PRIVATE:</span><br><span class="line">* Projects</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Projects</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># With each project under it-each having their tasks (and subtasks) benath</span></span><br><span class="line">* Someday/Maybe</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Someday/Maybe</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># For tasks that may be doon at some point</span></span><br><span class="line">** Computer System                                                :COMPUTER:</span><br><span class="line">*** Tiling window manager</span><br><span class="line">Awesome-Lua/Qtile-Python/i3-C written</span><br><span class="line">* Financial</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Financial</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># For all tasks related to money, bills, salart, band and so on.</span></span><br><span class="line">* Habits</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:CATEGORY: Habits</span><br><span class="line">:ARCHIVE_TIME: <span class="number">2016</span>-<span class="number">01</span>-<span class="number">06</span> Wed <span class="number">00</span>:<span class="number">11</span></span><br><span class="line">:ARCHIVE_FILE: ~/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org</span><br><span class="line">:ARCHIVE_CATEGORY: Habits</span><br><span class="line">:END:</span><br><span class="line"><span class="comment"># For all the recurring tasks I want to keep to doing, and track with org-habit model.</span></span><br><span class="line">, ** Myself habits                                                   :PRIVATE:</span><br><span class="line">, *** Exercise                                                                </span><br><span class="line">**** TODO First <span class="keyword">for</span> six-pack abs</span><br><span class="line">** GTD refile                                                      :PRIVATE:</span><br><span class="line">*** TODO The Schedule of Monthly</span><br><span class="line">SCHEDULED: &amp;lt;<span class="number">2016</span>-<span class="number">03</span>-<span class="number">01</span> Tue <span class="number">22</span>:<span class="number">00</span> +1m&amp;gt;</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:LAST_REPEAT: [<span class="number">2016</span>-<span class="number">02</span>-<span class="number">16</span> Tue <span class="number">00</span>:<span class="number">13</span>]</span><br><span class="line">:END:</span><br><span class="line">:LOGBOOK:</span><br><span class="line">- State <span class="string">"DONE"</span>       from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">02</span>-<span class="number">16</span> Tue <span class="number">00</span>:<span class="number">13</span>]</span><br><span class="line">:END:</span><br><span class="line">*** TODO Review Monthly </span><br><span class="line">SCHEDULED: &amp;lt;<span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span> Wed <span class="number">22</span>:<span class="number">10</span> +1m&amp;gt;</span><br><span class="line">:PROPERTIES:</span><br><span class="line">:LAST_REPEAT: [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">31</span> Sun <span class="number">23</span>:<span class="number">40</span>]</span><br><span class="line">:END:</span><br><span class="line">:LOGBOOK:</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">31</span> Sun <span class="number">23</span>:<span class="number">40</span>]</span><br><span class="line">:END:</span><br><span class="line">*** TODO Review Weekly</span><br><span class="line">:LOGBOOK:</span><br><span class="line">- State <span class="string">"DONE"</span>       from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">02</span>-<span class="number">21</span> Sun <span class="number">21</span>:<span class="number">56</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">02</span>-<span class="number">14</span> Sun <span class="number">20</span>:<span class="number">42</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">02</span>-<span class="number">11</span> Thu <span class="number">09</span>:<span class="number">59</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">31</span> Sun <span class="number">23</span>:<span class="number">40</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">25</span> Mon <span class="number">22</span>:<span class="number">20</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">13</span> Wed <span class="number">20</span>:<span class="number">34</span>]</span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">13</span> Wed <span class="number">20</span>:<span class="number">34</span>]</span><br><span class="line">CLOCK: [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">04</span> Mon <span class="number">23</span>:<span class="number">03</span>]--[<span class="number">2016</span>-<span class="number">01</span>-<span class="number">05</span> Tue <span class="number">20</span>:<span class="number">34</span>] =&amp;gt; <span class="number">21</span>:<span class="number">31</span></span><br><span class="line">- State <span class="string">"CANCELLED"</span>  from <span class="string">"TODO"</span>       [<span class="number">2016</span>-<span class="number">01</span>-<span class="number">04</span> Mon <span class="number">22</span>:<span class="number">41</span>]</span><br><span class="line">:END:</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>TASKS 用于记录阶段性学习计划与生活计划</li>
<li>Calendar 每天计划，博客，日常收集资料等</li>
<li>Projects 大的项目</li>
<li>Someday/Maybe 可能未来要做的事情</li>
<li>Financial 与 money 相关的东西</li>
<li>Habits 自己的习惯：如锻炼，每月的习惯，重要的节日等等</li>
</ul>
</div>
</div>

<div id="outline-container-orge30effb" class="outline-3">
<h3 id="orge30effb">设置每个任务的状态，tags 和 priorities</h3>
<div class="outline-text-3" id="text-orge30effb">
</div><div id="outline-container-orgb4c440f" class="outline-4">
<h4 id="orgb4c440f">设置任务状态，我用以下 todo tiems，参考<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></h4>
<div class="outline-text-4" id="text-orgb4c440f">
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">sequence</span> <span class="string">"TODO(t)"</span> <span class="string">"NEXT(n)"</span> <span class="string">"|"</span>  <span class="string">"DONE(d)"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">sequence</span> <span class="string">"WAITING(w@/!)"</span> <span class="string">"SOMEDAY(s)"</span> <span class="string">"|"</span> <span class="string">"HOLD(h@/!)"</span> <span class="string">"CANCELLED(c@/!)"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">sequence</span> <span class="string">"INBOX(i)"</span> <span class="string">"|"</span> <span class="string">"NOTE(e)"</span> <span class="string">"PHONE(p)"</span> <span class="string">"MEETING(m)"</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">sequence</span> <span class="string">"REPORT(r)"</span> <span class="string">"BUG(b)"</span> <span class="string">"KNOWNCAUSE(k)"</span> <span class="string">"|"</span> <span class="string">"FIXED(f)"</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<ul class="org-ul">
<li>每个 TODO 任务有 TODO 和 DONE 两种状态，NEXT 只出现在 Project 中</li>
<li>WAITING 适用于暂停一段时间的任务，SOMEDAY 是未来某一天会安排的工做</li>
<li>HOLD 定义为原来计划做的已经 SCHELUDE 的 TODO 工作，由于某种原因以后再做，防止其在 Agenda 中出现</li>
<li>CANCELLED 是取消的任务</li>
<li>INBOX 是收集的资料，待整理的东西，每周 refile，而 NOTE 是即兴想法：头脑风暴</li>
<li>PHONE 和 MEETING 是记录完成事件</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd336699" class="outline-3">
<h3 id="orgd336699">设置任务时间，计划和截止时间</h3>
<div class="outline-text-3" id="text-orgd336699">
<p>
详情可见<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>
</p>
</div>
</div>
<div id="outline-container-org503f946" class="outline-3">
<h3 id="org503f946">执行计划，必要时记录每个任务的时间</h3>
</div>
<div id="outline-container-org61d9e47" class="outline-3">
<h3 id="org61d9e47">周回顾</h3>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://orgmode.org/worg/org-gtd-etc.html" target="_blank" rel="external">http://orgmode.org/worg/org-gtd-etc.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://members.optusnet.com.au/~charles57/GTD/gtd_workflow.html" target="_blank" rel="external">http://members.optusnet.com.au/~charles57/GTD/gtd_workflow.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://doc.norang.ca/org-mode.html#HowToUseThisDocument" target="_blank" rel="external">http://doc.norang.ca/org-mode.html#HowToUseThisDocument</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="http://orgmode.org/manual/Dates-and-times.html#Dates-and-times" target="_blank" rel="external">http://orgmode.org/manual/Dates-and-times.html#Dates-and-times</a>
</p></div></div>


</div>
</div>
Last Updated 2016-04-05 Tue 23:07 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/14/Spacemacs Learning/" itemprop="url">
                  Spacemacs Learning [Spacemacs 学习]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-14T08:00:00+08:00" content="2016-02-14">
              2016-02-14
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EMACS/" itemprop="url" rel="index">
                    <span itemprop="name">EMACS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/14/Spacemacs Learning/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/02/14/Spacemacs Learning/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-orgd5d034a" class="outline-2">
<h2 id="orgd5d034a">Useful keybinding</h2>
<div class="outline-text-2" id="text-orgd5d034a">
</div><div id="outline-container-org0ed737a" class="outline-3">
<h3 id="org0ed737a">Memory</h3>
<div class="outline-text-3" id="text-org0ed737a">
<ul class="org-ul">
<li>SPC f s Save a buffer</li>
<li>SPC f S Save all opened buffers</li>
<li>SPC b b Open or switch a buffer with helm</li>
<li>SPC T h Select a theme using a helm buffer</li>
<li>SPC f/p t To toggle the Neotree buffer press (project)</li>
<li>SPC h b Open the bookmark</li>
<li>SPC h l Resume the last helm buffers</li>
<li>SPC s L Focus the last converted search buffer</li>
<li>F3 In a helm buffer, convert a helm search buffer into a regular buffer</li>
</ul>
<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>
</div>
</div>
</div>
<div id="outline-container-orgba6f103" class="outline-2">
<h2 id="orgba6f103">The Emacs Evil Tutor</h2>
<div class="outline-text-2" id="text-orgba6f103">
</div><div id="outline-container-org47353be" class="outline-3">
<h3 id="org47353be">LESSON 1</h3>
<div class="outline-text-3" id="text-org47353be">
<ol class="org-ol">
<li>The cursor is moved using either the arrow keys or the hjkl keys.
h (left)        j (down)       k (up)            l (right)</li>

<li>To exit Emacs type:  &lt;ESC&gt; :qa! &lt;ENTER&gt;  to trash all changes.
OR type:  &lt;ESC&gt; :wqa &lt;ENTER&gt;  to save the changes.</li>

<li>Ctrl + f Page Down
Ctrl + b Page Up</li>

<li>0 Cursor to the beginging of the line
$ Cursor to the end of the line</li>

<li>G Cursor to the last of the file
nG Cursor to the n line of the file
gg Cursor to the begin of the file, like 1G
:[Enter] followed by a line number and moves to that line number.
N[Enter] Curosr to the N line</li>
</ol>

<p>
NOTE: Pressing &lt;ESC&gt; will place you in normal state or will cancel
      an unwanted and partially completed command.
</p>
</div>
</div>


<div id="outline-container-org4f16c23" class="outline-3">
<h3 id="org4f16c23">LESSON 2</h3>
<div class="outline-text-3" id="text-org4f16c23">
<ol class="org-ol">
<li>x/X To delete a character under/before the cursor in normal state type</li>

<li>To delete a whole line type:  dd</li>

<li><p>
The format for a command in normal state is:
</p>

<p>
  [number]  command  object    OR    command  [number]  object
where:
  number - is how many times to repeat the command
  command - is what to do, such as  d  for delete
  object - is what the command should act upon, such as  w  for word,
	   $  for "to the end of line", etc.
</p></li>

<li>d1G, dG, d0, d$</li>

<li>yy Copy the line of cursokr
nyy Copy the n line data</li>

<li>y1G, yG, y0, y$</li>

<li>p/P Paste the data from the next/before line</li>

<li>To undo previous actions, type:  u
To undo the undo's type:  CTRL-R
Repeat the last opeartion: .</li>
</ol>
</div>
</div>


<div id="outline-container-org8e59cab" class="outline-3">
<h3 id="org8e59cab">LESSON 3</h3>
<div class="outline-text-3" id="text-org8e59cab">
<ol class="org-ol">
<li>To replace text that has already been deleted, type  p  this puts the
deleted text AFTER the cursor (if a line was deleted it will go on the
line below the cursor).</li>

<li>To replace the character under the cursor, type  r  and then the
character which will replace the original.</li>

<li>The change command allows you to change the specified object from the
cursor to the end of the object.  eg. Type  cw  to change from the
cursor to the end of the word,  c$  to change to the end of a line.</li>

<li>The format for change is:
[number]  c  object    OR    c  [number]  object</li>
</ol>
</div>
</div>


<div id="outline-container-orgf81c61b" class="outline-3">
<h3 id="orgf81c61b">LESSON 4</h3>
<div class="outline-text-3" id="text-orgf81c61b">
<ol class="org-ol">
<li>Typing  /  followed by a phrase searches FORWARD for the phrase.
Typing  ?  followed by a phrase searches BACKWARD for the phrase.
After a search type  n  to find the next occurrence in the same direction
or  N  to search in the opposite direction.</li>

<li>Typing  %  while the cursor is on a  (,),[,],{, or }  locates its
matching pair.</li>

<li>To substitute new for the first old on a line type  :s/old/new
To substitute new for all 'old's on a line type     :s/old/new/g
To substitute phrases between two line #'s type     :#,#s/old/new/g
To substitute all occurrences in the file type      :%s/old/new/g
To ask for confirmation each time add 'c'           :%s/old/new/gc</li>
</ol>
</div>
</div>


<div id="outline-container-orgd788044" class="outline-3">
<h3 id="orgd788044">LESSON 5</h3>
<div class="outline-text-3" id="text-orgd788044">
<ol class="org-ol">
<li><p>
:!command  executes an external command.
</p>

<p>
Some useful examples are:
    :!ls  or  :!dir                 -  shows a directory listing.
    :!rm  or  :!del FILENAME        -  removes file FILENAME.
</p></li>

<li>:w FILENAME  writes the current buffer to disk with file name FILENAME.</li>

<li>:#,#w FILENAME  saves the lines # through # in file FILENAME.</li>

<li>:r FILENAME  retrieves disk file FILENAME and inserts it into the
current buffer following the cursor position.</li>
</ol>
</div>
</div>


<div id="outline-container-org06ef034" class="outline-3">
<h3 id="org06ef034">LESSON 6</h3>
<div class="outline-text-3" id="text-org06ef034">
<ol class="org-ol">
<li>Typing  o   opens a line BELOW the cursor and places the cursor on the open
line in insert state.
Typing a capital  O  opens the line ABOVE the line the cursor is on.</li>

<li>Type an  a  to insert text AFTER the character the cursor is on.
Typing a capital  A  automatically appends text to the end of the line.</li>

<li>i/I Insert text at the character/Not blank</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org65854d8" class="outline-2">
<h2 id="org65854d8">Python and R programming environment configuration</h2>
<div class="outline-text-2" id="text-org65854d8">
</div><div id="outline-container-orga0277b9" class="outline-3">
<h3 id="orga0277b9">Python</h3>
<div class="outline-text-3" id="text-orga0277b9">
<ul class="org-ul">
<li>Configure the auto-complete mode as the spacemacs layer: auto-complete</li>
<li>Replace the keybinding SPC m s i to 'run python' in file package.el within python layer</li>
<li><p>
Add the following confirmation to .spacemacs
</p>
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-python-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-python-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br></pre></td></tr></table></figure>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org4c88477" class="outline-3">
<h3 id="org4c88477">R</h3>
<div class="outline-text-3" id="text-org4c88477">
<ul class="org-ul">
<li>Add the following confirmation to .spacemacs</li>
</ul>
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'smartparens-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'R-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'org-mode-hook</span> <span class="quoted">'smartparens-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'company-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'smartparens-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'flycheck-mode</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'inferior-ess-mode-hook</span> <span class="quoted">'flyspell-mode</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<ul class="org-ul">
<li>For the R auto complete: after open the R file, then C-c C-c, reopen the R file</li>
<li>When insert src-block with org heading, add a , before the heading, to avoid mistake</li>
</ul>
</div>
</div>
</div>

Last Updated 2016-03-07 Mon 08:14 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/05/Archlinux install and configuration/" itemprop="url">
                  Archlinux install and configuration [Archlinux 安装和配置]
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-05T08:00:00+08:00" content="2016-02-05">
              2016-02-05
            </time>
          </span>

          


          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LINUX/" itemprop="url" rel="index">
                    <span itemprop="name">LINUX</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/05/Archlinux install and configuration/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/02/05/Archlinux install and configuration/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<div id="outline-container-org7df1124" class="outline-2">
<h2 id="org7df1124">Archlinux install [安装篇]</h2>
<div class="outline-text-2" id="text-org7df1124">
</div><div id="outline-container-org81264f4" class="outline-3">
<h3 id="org81264f4">Prepare for the installation</h3>
<div class="outline-text-3" id="text-org81264f4">
<ul class="org-ul">
<li>Prepare the ISO of archlinux, and brasero it into USB flash disk</li>

<li>Partiton: use cfdisk, use the UEFI install, the mkfs</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/dev/sda1 to UEFI boot: ef00, <span class="number">1</span>G</span><br><span class="line">/dev/sda2 to <span class="number">119</span>G</span><br><span class="line">mkfs.fat -F32 /dev/sda1</span><br><span class="line">mkfs.ext4 /dev/sda2</span><br></pre></td></tr></table></figure>
</div>

<div class="HTML">
<p>
&lt;!&#x2013;more&#x2013;&gt;
</p>

</div>

<ul class="org-ul">
<li>Select mirrorlist:</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nano -w /etc/pacman.d/mirrorlist add </span><br><span class="line">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = http://mirrors.<span class="number">163</span>.com/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Wireless network link</li>
</ul>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">iwconfig to find the name of your wireless moudule: like wlan0</span><br><span class="line">then:</span><br><span class="line">ip link set wlan0 up</span><br><span class="line">wpa_supplicant -D nl80211,wext -i wlan0 -c &amp;lt;(wpa_passphrase "your_SSID" "your_key")</span><br><span class="line">dhcpcd wlan0</span><br><span class="line">now the wireless should be connected</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>


<div id="outline-container-orgbb34b4b" class="outline-3">
<h3 id="orgbb34b4b">Basic install</h3>
<div class="outline-text-3" id="text-orgbb34b4b">
<ul class="org-ul">
<li>Mount the partition</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">muont /dev/sda2 /mnt</span><br><span class="line">mkdir -p /mnt/boot/EFI</span><br><span class="line">mount /dev/sda1 /mnt/boot/EFI</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Bbasic system install</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pacstrap /mnt base base-devel</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Generate the fstab</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">genfstab -p /mnt &amp;gt;&amp;gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Went into the new system and update the system</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">arch-chroot /mnt</span><br><span class="line">nano /etc/loacle.gen  en.us &amp;amp; en.cn <span class="comment"># remove#</span></span><br><span class="line">locale-gen</span><br><span class="line">nano /etc/locale.gen    <span class="comment"># &amp;#21453;&amp;#27880;&amp;#37322;&amp;#38656;&amp;#35201;&amp;#30340; locale</span></span><br><span class="line">locale-gen    <span class="comment"># &amp;#29983;&amp;#25104; locale</span></span><br><span class="line"><span class="built_in">echo</span> LANG=&amp;lt;locale&amp;gt;  &amp;gt; /etc/locale.conf <span class="comment"># &amp;#35774;&amp;#32622;&amp;#40664;&amp;#35748; locale</span></span><br><span class="line">ln <span class="operator">-s</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc --utc</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Add passwd and users</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> yourname &amp;gt; /etc/hostname</span><br><span class="line">nano /etc/hosts</span><br><span class="line">passwd <span class="number">111111</span>(<span class="number">2</span> <span class="built_in">times</span>)</span><br><span class="line">useradd -m -g users <span class="operator">-s</span> /bin/bash name</span><br><span class="line">passwd name <span class="number">111111</span>(<span class="number">2</span> <span class="built_in">times</span>)</span><br><span class="line">nano -w /etc/sudos add line name ALL=(ALL) ALL</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Grub installation</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pacman -S dosfstools grub efibootmgr</span></span><br><span class="line"><span class="comment"># grub-install --target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=arch_grub --recheck</span></span><br><span class="line"><span class="comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Install X windows and gnome</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pacman -S alsa-utils xorg-server xorg-xinit xorg-server-utils</span><br><span class="line">pacman -S xf86-video-intel xf86-input-synaptics</span><br><span class="line">pacman -S gnome gnome-extra</span><br><span class="line">systemctl <span class="built_in">enable</span> gdm.service</span><br><span class="line">systemctl <span class="built_in">enable</span> NetworkManager.service</span><br><span class="line"><span class="built_in">exit</span> </span><br><span class="line">umount /mnt/boot/EFI</span><br><span class="line">umount /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgf2f3d49" class="outline-3">
<h3 id="orgf2f3d49">Software install</h3>
<div class="outline-text-3" id="text-orgf2f3d49">
<ul class="org-ul">
<li>Yaourt installation</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo nano -w /etc/pacman.conf</span><br><span class="line">remove <span class="comment"># before mutilib</span></span><br><span class="line">add  </span><br><span class="line">[archlinuxfr] </span><br><span class="line">Server = http://repo.archlinux.fr/<span class="variable">$arch</span></span><br><span class="line"><span class="keyword">in</span> the last line</span><br><span class="line"><span class="keyword">then</span> <span class="built_in">exit</span></span><br><span class="line">sudo pacman -Syyuu</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Software installation</li>
</ul>
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S yaourt emacs gnome-tweak-tool firefox libreoffice clementine vlc smplayer vim gimp shotwell blender impressive r osdlyrics stardict gnome-search-tool dropbox</span><br><span class="line">yaourt wqy-microhei mendeleydesktop  wps acroread acroread-chinese-fonts texstudio</span><br><span class="line">pacman codecs (nedded)</span><br></pre></td></tr></table></figure>
</div>

<ul class="org-ul">
<li>Install textlive as the peking BBS</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc8c619c" class="outline-2">
<h2 id="orgc8c619c">Configuration [配置篇]</h2>
<div class="outline-text-2" id="text-orgc8c619c">
</div><div id="outline-container-org58f2974" class="outline-3">
<h3 id="org58f2974">Fcitx</h3>
<div class="outline-text-3" id="text-org58f2974">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fcitx fcitx-im fcitx-configtool ibus</span><br><span class="line">sudo cp /usr/bin/ibus-daemon /usr/bin/ibus-daemon.cp</span><br><span class="line">sudo rm -rf /usr/bin/ibus-daemon</span><br><span class="line">sudo gsettings <span class="built_in">set</span> org.gnome.settings-daemon.plugins.keyboard active <span class="literal">false</span></span><br><span class="line">sudo nano -w .xprofile add</span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></span><br><span class="line">yaourt fcitx-googlepinyin fcitx-sogoupinyin</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org6ce5f40" class="outline-3">
<h3 id="org6ce5f40">Web to hidden</h3>
<div class="outline-text-3" id="text-org6ce5f40">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yaourt lantern</span><br><span class="line">Add new firefox autoproxy server</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> <span class="number">8787</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> lantern.service</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgcb45bf0" class="outline-3">
<h3 id="orgcb45bf0">Startdict</h3>
<div class="outline-text-3" id="text-orgcb45bf0">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S startdict</span><br><span class="line">cp dict /usr/share/stardict/dic</span><br><span class="line">cp WyabdcRealPeopleTTS /usr/share/WyabdcRealPeopleTTS</span><br><span class="line">cp startdict config /home</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org7e2cdd9" class="outline-3">
<h3 id="org7e2cdd9">Samba</h3>
<div class="outline-text-3" id="text-org7e2cdd9">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cp /etc/samba/smb.conf.default /etc/samba/smb.conf</span><br><span class="line">sudo systemctl <span class="built_in">enable</span>/start smbd.service nmbd.service</span><br><span class="line">sudo systemctl start/<span class="built_in">enable</span> cups</span><br><span class="line">add printer</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org99ce711" class="outline-3">
<h3 id="org99ce711">Bumblebee</h3>
<div class="outline-text-3" id="text-org99ce711">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S bumblebee mesa nvidia nvidia-settings xf86-video-intel</span><br><span class="line">sudo gpasswd <span class="operator">-a</span> user bumblebee</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> bumblebeed.service</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orge2e5d22" class="outline-3">
<h3 id="orge2e5d22">Firefox</h3>
<div class="outline-text-3" id="text-orge2e5d22">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cp config</span><br><span class="line">rm .mozilla/Firefox/<span class="number">9999</span>/.parentlock</span><br><span class="line">(bookmaker add-ons: noscript autopager autoproxy stumbleupon deafaultzoom xnot instantfox flashlock videodownloadhelper greasemonkey allsidebar downloadstatbar zotero firegesture)</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org76bfd36" class="outline-3">
<h3 id="org76bfd36">Dnsmasq: maybe out of data</h3>
<div class="outline-text-3" id="text-org76bfd36">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo gedit /etc/NetworkManager/dispatcher.d/localhost-prepend</span><br><span class="line">add</span><br><span class="line"><span class="shebang">#!/bin/bash                                       </span></span><br><span class="line"><span class="comment"># Prepend localhost to resolv.conf for dnsmasq</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! $(grep <span class="number">127.0</span>.<span class="number">0.1</span> /etc/resolv.conf) ]]; <span class="keyword">then</span></span><br><span class="line">  sed -i <span class="string">'1s|^|nameserver 127.0.0.1\n|'</span> /etc/resolv.conf</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">sudo chmod +x /etc/NetworkManager/dispatcher.d/localhost-prepend</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc0c30ab" class="outline-2">
<h2 id="orgc0c30ab">Questions [问题篇]</h2>
<div class="outline-text-2" id="text-orgc0c30ab">
</div><div id="outline-container-org380c454" class="outline-3">
<h3 id="org380c454">GNOME3.6 文件夹默认打开方式关联问题</h3>
<div class="outline-text-3" id="text-org380c454">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Edit /usr/share/applications/audacious.desktop </span><br><span class="line">and remove following line:</span><br><span class="line">MimeType=inode/directory;</span><br><span class="line">sudo nano /usr/share/applications/mimeinfo.cache</span><br><span class="line">sudo gedit /usr/share/applications/mimeinfo.cache</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0d7f2a4" class="outline-3">
<h3 id="org0d7f2a4">Add module auto</h3>
<div class="outline-text-3" id="text-org0d7f2a4">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo gedit /etc/modules-load.d/virtio-net.conf</span><br><span class="line"><span class="comment">#Load 'virtio-net.ko' at boot.</span></span><br><span class="line">virtio-net</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgc78f18b" class="outline-3">
<h3 id="orgc78f18b">LIWORD start fonts problem</h3>
<div class="outline-text-3" id="text-orgc78f18b">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo gedit /etc/fonts/conf.d/<span class="number">65</span>-nonlatin.conf</span><br><span class="line">save </span><br><span class="line"><span class="keyword">then</span> open LIWORD is ok.</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgaad622a" class="outline-3">
<h3 id="orgaad622a">Emacs fcitx</h3>
<div class="outline-text-3" id="text-orgaad622a">
<div class="org-src-container">
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo nano -w .bashrc add</span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

Last Updated 2016-05-28 Sat 22:18 by lengyueyang<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 25.1.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="冷月阳" />
          <p class="site-author-name" itemprop="name">冷月阳</p>
           
              <p class="site-description motion-element" itemprop="description">静静思考   感悟人生</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lengyueyang" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:maoxiaowei1988@foxmail.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/xiaowei.hl" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/maoxiaowei" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/leng-yue-40-23" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.ncbi.nlm.nih.gov/pubmed" title="Pubmed" target="_blank">Pubmed</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.archlinux.org/" title="Archlinux" target="_blank">Archlinux</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.gnuemacs.org/" title="Emacs" target="_blank">Emacs</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">冷月阳

  &nbsp;&nbsp;|&nbsp;&nbsp;
  <script type="text/javascript">var 
    cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1261429106'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261429106' type='text/javascript'%3E%3C/script%3E"));
  </script>

  <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' type='text/javascript'%3E%3C/script%3E"));
  </script>

  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/sitemap.xml">Google网站地图</a></span>
  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/baidusitemap.xml">百度网站地图</a></span>

  </span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


&nbsp;&nbsp;|&nbsp;&nbsp;本站总点击 <span id="busuanzi_value_site_pv"></span> 次
&nbsp;&nbsp;|&nbsp;&nbsp;您是第 <span id="busuanzi_value_site_uv"></span> 位访客

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  


  













  





  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

</body>
</html>
