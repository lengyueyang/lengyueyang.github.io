<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Lengyueyang&#39;s Emacs configuration - 深度识医</title>
  
<link rel="alternate" hreflang="" href="https://lengyueyang.github.io/en/post/tools/spacemacs/lengyueyang/" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="lengyueyang" /><meta name="description" content="A literate programming style exposition of my Emacs configuration beyond my spacemacs configuration" />







<meta name="generator" content="Hugo 0.55.6" />


<link rel="canonical" href="https://lengyueyang.github.io/post/tools/spacemacs/lengyueyang/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="Lengyueyang&#39;s Emacs configuration" />
<meta property="og:description" content="A literate programming style exposition of my Emacs configuration beyond my spacemacs configuration" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lengyueyang.github.io/post/tools/spacemacs/lengyueyang/" />
<meta property="article:published_time" content="2017-03-26T00:00:00&#43;08:00"/>
<meta property="article:modified_time" content="2019-07-07T22:01:20&#43;08:00"/><meta property="og:site_name" content="深度识医" />

<meta itemprop="name" content="Lengyueyang&#39;s Emacs configuration">
<meta itemprop="description" content="A literate programming style exposition of my Emacs configuration beyond my spacemacs configuration">


<meta itemprop="datePublished" content="2017-03-26T00:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-07-07T22:01:20&#43;08:00" />
<meta itemprop="wordCount" content="12617">



<meta itemprop="keywords" content="spacemacs,configuration," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Lengyueyang&#39;s Emacs configuration"/>
<meta name="twitter:description" content="A literate programming style exposition of my Emacs configuration beyond my spacemacs configuration"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">深度识医</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          <div class="mobile-menu-parent">
            <span class="mobile-submenu-open"></span>
            <a href="https://lengyueyang.github.io/categories/data-science/">
              医学数据科学
            </a>
          </div>
          <ul class="mobile-submenu-list">
            
              <li>
                <a href="https://lengyueyang.github.io/categories/math/">数学基础</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/statistics/">统计基础</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/algorithms/">算法</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/programming/">编程</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/machine-learning/">机器学习</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/nlp-kg/">NLP-KG</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/data-analysis/">数据分析</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/medical/">医学知识</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/cdss/">CDSS</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/article-learning/">文章复现</a>
              </li>
            
          </ul>
        
      </li><li class="mobile-menu-item">
        
          
          <div class="mobile-menu-parent">
            <span class="mobile-submenu-open"></span>
            <a href="https://lengyueyang.github.io/categories/%E5%B7%A5%E5%85%B7%E9%93%BE/">
              工具链
            </a>
          </div>
          <ul class="mobile-submenu-list">
            
              <li>
                <a href="https://lengyueyang.github.io/categories/linux/">Linux</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/gentoo/">Gentoo</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/spacemacs/">Spacemacs</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/org-mode/">Org-mode</a>
              </li>
            
          </ul>
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/categories/life">生活</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/links">链接</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/about">关于</a>
          
        
      </li>
    <li class="mobile-menu-item">
        
        <div class="mobile-menu-parent mobile-menu-item-lang">
          <span class="mobile-submenu-open"></span>
          <a href="#">
            
            <i class="iconfont">
              <svg height="16" width="16" version="1.1" viewBox="0 0 128 128">
  <path d="m 64.719501,1.4279814 c -34.694029,0 -62.8192028,28.1251726 -62.8192028,62.8192016 0,34.694036 28.1251738,62.819207 62.8192028,62.819207 4.245691,0 8.392744,-0.42239 12.402214,-1.2253 -1.616124,-0.77296 -1.792473,-6.57213 -0.194346,-9.87848 1.779059,-3.68082 7.361625,-13.00555 1.840404,-16.134231 -5.521221,-3.12869 -3.98755,-4.53968 -7.361625,-8.15914 -3.374083,-3.61947 -1.994181,-4.16357 -2.208492,-5.09179 -0.736158,-3.19004 3.251385,-7.975096 3.435429,-8.465866 0.184043,-0.490781 0.184043,-2.331182 0.122689,-2.883308 -0.06131,-0.552125 -2.515051,-2.024446 -3.12852,-2.085791 -0.613469,-0.06133 -0.920209,0.98154 -1.77906,1.042896 -0.858856,0.06133 -4.601018,-2.269838 -5.39853,-2.883308 -0.797504,-0.61346 -1.165591,-2.085792 -2.269828,-3.190033 -1.104247,-1.104252 -1.226945,-0.24539 -2.944651,-0.920206 -1.717714,-0.674812 -7.238935,-2.69926 -11.471867,-4.416975 -4.23294,-1.717714 -4.601019,-4.125615 -4.662365,-5.827954 -0.06131,-1.702333 -2.57657,-4.171587 -3.756227,-5.950646 -1.179335,-1.77906 -1.396914,-4.232932 -1.826339,-3.680809 -0.429425,0.552114 2.208484,6.993538 1.77906,7.177582 -0.429425,0.184043 -1.349635,-1.77906 -2.576572,-3.374083 -1.226936,-1.595016 1.28829,-0.736159 -2.637915,-8.465864 -3.926198,-7.729705 1.226944,-11.671284 1.472324,-15.704806 0.24539,-4.033514 3.312738,1.472325 1.717715,-1.104238 -1.595016,-2.576571 0.122697,-7.975094 -1.104246,-9.938197 -1.226936,-1.963102 -8.220475,2.208492 -8.220475,2.208492 0.184036,-1.901758 6.134682,-5.153142 10.428966,-8.1591366 4.294277,-3.005996 6.91682,-0.674813 10.367621,0.4294236 3.450803,1.104246 3.680817,0.736167 2.515226,-0.368079 -1.165591,-1.1042446 0.49077,-1.6563686 3.190031,-1.2269356 2.699269,0.429425 3.435428,3.6808086 7.545669,3.3740746 4.110242,-0.306735 0.429425,0.797511 0.981548,1.840412 0.552123,1.042892 -0.613468,0.920202 -3.312729,2.760607 -2.699262,1.840403 0.06131,1.840403 4.846407,5.337177 4.785055,3.496773 3.312729,-2.331183 2.821952,-4.907753 -0.490777,-2.576563 3.496773,-0.552115 3.496773,-0.552115 2.944651,1.963094 2.400546,0.107972 4.547684,0.782784 2.147139,0.674814 7.967076,5.597286 7.967076,5.597286 -7.300273,3.98755 -2.699261,4.416975 -1.472325,5.337178 1.226937,0.920202 -2.515218,2.699261 -2.515218,2.699261 -1.53367,-1.53367 -1.779059,0.06131 -2.760614,0.613476 -0.981548,0.552115 -0.06131,1.963095 -0.06131,1.963095 -5.076415,0.797512 -3.926198,6.13469 -3.864852,7.422971 0.06131,1.288289 -3.251385,3.251384 -4.110242,5.091796 -0.858857,1.840405 2.208491,5.827948 0.613468,6.073336 -1.595016,0.24539 -3.190031,-6.011991 -11.778601,-3.680808 -2.589322,0.702954 -8.343174,3.680808 -5.275824,9.754153 3.06734,6.073336 8.15913,-1.717714 9.876843,-0.858857 1.717714,0.858857 -0.490778,4.72371 -0.122691,4.785055 0.368079,0.06131 4.8464,0.168662 5.09179,5.398522 0.245388,5.229868 6.809502,4.785065 8.220482,4.907755 1.410972,0.12269 6.134682,-3.864859 6.809502,-4.048894 0.674815,-0.184034 3.374076,-2.453876 9.263377,0.920195 5.889301,3.374089 8.895296,2.883308 10.919743,4.294285 2.02445,1.410987 0.61347,4.232939 2.51523,5.153134 1.90175,0.920217 9.50876,-0.306736 11.41051,2.821966 1.90176,3.1287 -7.8524,18.833491 -10.91974,20.551201 -3.06734,1.71772 -4.478321,5.64392 -7.545665,8.15913 -3.067349,2.51523 -7.361625,5.62854 -11.410522,8.03646 -3.583968,2.1311 -4.228845,5.949 -5.825333,7.15419 28.11404,-6.24545 49.13623,-31.328971 49.13623,-61.323497 0,-34.694029 -28.125171,-62.8192016 -62.819206,-62.8192016 z M 79.442753,60.382331 c -0.858857,0.245389 -2.637917,1.840405 -6.993547,-0.736166 -4.35563,-2.576564 -7.361625,-2.085794 -7.729705,-2.515218 0,0 -0.368079,-1.0429 1.533671,-1.226937 3.905098,-0.378065 8.833951,3.619464 9.938196,3.680809 1.104246,0.06131 1.656361,-1.104245 3.619464,-0.471631 1.963103,0.631953 0.490777,1.023755 -0.368079,1.269143 z M 58.891546,7.6853614 c -0.427786,-0.311152 0.354344,-0.669418 0.82058,-1.288281 0.269103,-0.357613 0.0695,-0.951289 0.406356,-1.28829 0.92021,-0.920203 5.459876,-2.208485 4.572225,0.306734 -0.887321,2.515226 -5.12434,2.760614 -5.799161,2.269837 z m 10.98109,7.9750936 c -1.533672,-0.06131 -5.14381,-0.442837 -4.478321,-1.104246 2.591952,-2.576563 -0.981548,-3.312729 -3.190039,-3.496766 -2.208485,-0.184043 -3.128687,-1.4109786 -2.02444,-1.5336776 1.104237,-0.12269 5.521213,0.06139 6.257379,0.6748206 0.736158,0.613469 4.723709,2.208485 4.969099,3.374076 0.24538,1.16559 0,2.147138 -1.533678,2.085793 z M 83.184914,15.23103 c -1.226943,0.981547 -7.400887,-3.521968 -8.588569,-4.539674 -5.153134,-4.4169746 -7.913742,-2.9446486 -8.995903,-3.6808086 -1.082485,-0.736166 -0.696897,-1.717713 0.959464,-3.190039 1.656369,-1.472325 6.318732,0.490778 9.017994,0.797512 2.699262,0.306734 5.827955,2.392527 5.889301,4.871925 0.06131,2.4792256 2.944649,4.7595296 1.717713,5.7410846 z" />
</svg>

            </i>
            语言
          </a>
        </div>
        <ul class="mobile-submenu-list">
          
            <li>
              
                <a href="https://lengyueyang.github.io/en/">English</a>
              
            </li>
          
            <li>
              
                <a href="https://lengyueyang.github.io/"><strong>中文</strong></a>
              
            </li>
          
        </ul>
      </li>

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      深度识医
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          <a class="menu-item-link menu-parent" href="https://lengyueyang.github.io/categories/data-science/">医学数据科学</a>
          <ul class="submenu">
            
              <li>
                <a href="https://lengyueyang.github.io/categories/math/">数学基础</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/statistics/">统计基础</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/algorithms/">算法</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/programming/">编程</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/machine-learning/">机器学习</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/nlp-kg/">NLP-KG</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/data-analysis/">数据分析</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/medical/">医学知识</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/cdss/">CDSS</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/article-learning/">文章复现</a>
              </li>
            
          </ul>

        

      </li>
    
        <li class="menu-item">
        
          
          <a class="menu-item-link menu-parent" href="https://lengyueyang.github.io/categories/%E5%B7%A5%E5%85%B7%E9%93%BE/">工具链</a>
          <ul class="submenu">
            
              <li>
                <a href="https://lengyueyang.github.io/categories/linux/">Linux</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/gentoo/">Gentoo</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/spacemacs/">Spacemacs</a>
              </li>
            
              <li>
                <a href="https://lengyueyang.github.io/categories/org-mode/">Org-mode</a>
              </li>
            
          </ul>

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/categories/life">生活</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/links">链接</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://lengyueyang.github.io/about">关于</a>
          

        

      </li>
    

    
    <li class="menu-item">
        
        <a class="menu-item-link menu-parent menu-item-lang" href="#">
          
          <i class="iconfont">
            <svg height="16" width="16" version="1.1" viewBox="0 0 128 128">
  <path d="m 64.719501,1.4279814 c -34.694029,0 -62.8192028,28.1251726 -62.8192028,62.8192016 0,34.694036 28.1251738,62.819207 62.8192028,62.819207 4.245691,0 8.392744,-0.42239 12.402214,-1.2253 -1.616124,-0.77296 -1.792473,-6.57213 -0.194346,-9.87848 1.779059,-3.68082 7.361625,-13.00555 1.840404,-16.134231 -5.521221,-3.12869 -3.98755,-4.53968 -7.361625,-8.15914 -3.374083,-3.61947 -1.994181,-4.16357 -2.208492,-5.09179 -0.736158,-3.19004 3.251385,-7.975096 3.435429,-8.465866 0.184043,-0.490781 0.184043,-2.331182 0.122689,-2.883308 -0.06131,-0.552125 -2.515051,-2.024446 -3.12852,-2.085791 -0.613469,-0.06133 -0.920209,0.98154 -1.77906,1.042896 -0.858856,0.06133 -4.601018,-2.269838 -5.39853,-2.883308 -0.797504,-0.61346 -1.165591,-2.085792 -2.269828,-3.190033 -1.104247,-1.104252 -1.226945,-0.24539 -2.944651,-0.920206 -1.717714,-0.674812 -7.238935,-2.69926 -11.471867,-4.416975 -4.23294,-1.717714 -4.601019,-4.125615 -4.662365,-5.827954 -0.06131,-1.702333 -2.57657,-4.171587 -3.756227,-5.950646 -1.179335,-1.77906 -1.396914,-4.232932 -1.826339,-3.680809 -0.429425,0.552114 2.208484,6.993538 1.77906,7.177582 -0.429425,0.184043 -1.349635,-1.77906 -2.576572,-3.374083 -1.226936,-1.595016 1.28829,-0.736159 -2.637915,-8.465864 -3.926198,-7.729705 1.226944,-11.671284 1.472324,-15.704806 0.24539,-4.033514 3.312738,1.472325 1.717715,-1.104238 -1.595016,-2.576571 0.122697,-7.975094 -1.104246,-9.938197 -1.226936,-1.963102 -8.220475,2.208492 -8.220475,2.208492 0.184036,-1.901758 6.134682,-5.153142 10.428966,-8.1591366 4.294277,-3.005996 6.91682,-0.674813 10.367621,0.4294236 3.450803,1.104246 3.680817,0.736167 2.515226,-0.368079 -1.165591,-1.1042446 0.49077,-1.6563686 3.190031,-1.2269356 2.699269,0.429425 3.435428,3.6808086 7.545669,3.3740746 4.110242,-0.306735 0.429425,0.797511 0.981548,1.840412 0.552123,1.042892 -0.613468,0.920202 -3.312729,2.760607 -2.699262,1.840403 0.06131,1.840403 4.846407,5.337177 4.785055,3.496773 3.312729,-2.331183 2.821952,-4.907753 -0.490777,-2.576563 3.496773,-0.552115 3.496773,-0.552115 2.944651,1.963094 2.400546,0.107972 4.547684,0.782784 2.147139,0.674814 7.967076,5.597286 7.967076,5.597286 -7.300273,3.98755 -2.699261,4.416975 -1.472325,5.337178 1.226937,0.920202 -2.515218,2.699261 -2.515218,2.699261 -1.53367,-1.53367 -1.779059,0.06131 -2.760614,0.613476 -0.981548,0.552115 -0.06131,1.963095 -0.06131,1.963095 -5.076415,0.797512 -3.926198,6.13469 -3.864852,7.422971 0.06131,1.288289 -3.251385,3.251384 -4.110242,5.091796 -0.858857,1.840405 2.208491,5.827948 0.613468,6.073336 -1.595016,0.24539 -3.190031,-6.011991 -11.778601,-3.680808 -2.589322,0.702954 -8.343174,3.680808 -5.275824,9.754153 3.06734,6.073336 8.15913,-1.717714 9.876843,-0.858857 1.717714,0.858857 -0.490778,4.72371 -0.122691,4.785055 0.368079,0.06131 4.8464,0.168662 5.09179,5.398522 0.245388,5.229868 6.809502,4.785065 8.220482,4.907755 1.410972,0.12269 6.134682,-3.864859 6.809502,-4.048894 0.674815,-0.184034 3.374076,-2.453876 9.263377,0.920195 5.889301,3.374089 8.895296,2.883308 10.919743,4.294285 2.02445,1.410987 0.61347,4.232939 2.51523,5.153134 1.90175,0.920217 9.50876,-0.306736 11.41051,2.821966 1.90176,3.1287 -7.8524,18.833491 -10.91974,20.551201 -3.06734,1.71772 -4.478321,5.64392 -7.545665,8.15913 -3.067349,2.51523 -7.361625,5.62854 -11.410522,8.03646 -3.583968,2.1311 -4.228845,5.949 -5.825333,7.15419 28.11404,-6.24545 49.13623,-31.328971 49.13623,-61.323497 0,-34.694029 -28.125171,-62.8192016 -62.819206,-62.8192016 z M 79.442753,60.382331 c -0.858857,0.245389 -2.637917,1.840405 -6.993547,-0.736166 -4.35563,-2.576564 -7.361625,-2.085794 -7.729705,-2.515218 0,0 -0.368079,-1.0429 1.533671,-1.226937 3.905098,-0.378065 8.833951,3.619464 9.938196,3.680809 1.104246,0.06131 1.656361,-1.104245 3.619464,-0.471631 1.963103,0.631953 0.490777,1.023755 -0.368079,1.269143 z M 58.891546,7.6853614 c -0.427786,-0.311152 0.354344,-0.669418 0.82058,-1.288281 0.269103,-0.357613 0.0695,-0.951289 0.406356,-1.28829 0.92021,-0.920203 5.459876,-2.208485 4.572225,0.306734 -0.887321,2.515226 -5.12434,2.760614 -5.799161,2.269837 z m 10.98109,7.9750936 c -1.533672,-0.06131 -5.14381,-0.442837 -4.478321,-1.104246 2.591952,-2.576563 -0.981548,-3.312729 -3.190039,-3.496766 -2.208485,-0.184043 -3.128687,-1.4109786 -2.02444,-1.5336776 1.104237,-0.12269 5.521213,0.06139 6.257379,0.6748206 0.736158,0.613469 4.723709,2.208485 4.969099,3.374076 0.24538,1.16559 0,2.147138 -1.533678,2.085793 z M 83.184914,15.23103 c -1.226943,0.981547 -7.400887,-3.521968 -8.588569,-4.539674 -5.153134,-4.4169746 -7.913742,-2.9446486 -8.995903,-3.6808086 -1.082485,-0.736166 -0.696897,-1.717713 0.959464,-3.190039 1.656369,-1.472325 6.318732,0.490778 9.017994,0.797512 2.699262,0.306734 5.827955,2.392527 5.889301,4.871925 0.06131,2.4792256 2.944649,4.7595296 1.717713,5.7410846 z" />
</svg>

          </i>
          中文
        </a>
        <ul class="submenu">
          
            
              <li>
                <a href="https://lengyueyang.github.io/en/">English</a>
              </li>
            
          
            
          
        </ul>
      </li>
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Lengyueyang&#39;s Emacs configuration</h1>
      
<div class="post-meta">
  
  <div><a href="https://lengyueyang.github.io/en/post/tools/spacemacs/lengyueyang/">Read in English: Lengyueyang&#39;s Emacs configuration</a></div>
  
</div>

      <div class="post-meta">
        <time datetime="2017-03-26" class="post-time">
          2017-03-26
        </time>
        <div class="post-category">
            <a href="https://lengyueyang.github.io/categories/spacemacs/"> Spacemacs </a>
            <a href="https://lengyueyang.github.io/categories/%E5%B7%A5%E5%85%B7%E9%93%BE/"> 工具链 </a>
            
          </div>
        <span class="more-meta"> 约 12617 字 </span>
          <span class="more-meta"> 预计阅读 26 分钟 </span>

        
        

        
        
          <span id="/post/tools/spacemacs/lengyueyang/" class="leancloud_visitors" data-flag-title="Lengyueyang&#39;s Emacs configuration">
            <span class="post-meta-item-text"> | 阅读 </span>
            <span class="leancloud-visitors-count"></span>
          </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction-emacs-configuration-in-an-org-file"><span class="section-num">1</span> Introduction: Emacs Configuration in an Org File</a>
<ul>
<li><a href="#custom-dot-el-setup"><span class="section-num">1.1</span> Custom.el setup</a></li>
<li><a href="#org-mode-to-customize-emacs-configuration"><span class="section-num">1.2</span> Org-mode to customize emacs configuration</a></li>
<li><a href="#req-package"><span class="section-num">1.3</span> Req-package</a>
<ul>
<li><a href="#initialize-req-package"><span class="section-num">1.3.1</span> Initialize req-package</a></li>
<li><a href="#start-loading-packages-in-right-order"><span class="section-num">1.3.2</span> Start loading packages in right order</a></li>
</ul></li>
</ul></li>
<li><a href="#keybinding"><span class="section-num">2</span> Keybinding</a>
<ul>
<li><a href="#f2-to-open-my-init-file"><span class="section-num">2.1</span> F2 to open my init file</a></li>
<li><a href="#f3-to-open-stardict"><span class="section-num">2.2</span> F3 to open stardict</a></li>
<li><a href="#f8-to-checkout-the-spelling-of-words"><span class="section-num">2.3</span> F8 to checkout the spelling of words</a></li>
<li><a href="#org-iswitch"><span class="section-num">2.4</span> Org-iswitch</a></li>
<li><a href="#bookmark-keybindings-reconfiguration"><span class="section-num">2.5</span> Bookmark keybindings reconfiguration</a></li>
<li><a href="#f7-to-open-org-download-screenshot"><span class="section-num">2.6</span> F7 to open org-download-screenshot</a></li>
</ul></li>
<li><a href="#spacemacs-better-defaults"><span class="section-num">3</span> Spacemacs better defaults</a>
<ul>
<li><a href="#buffer-default-coding-system"><span class="section-num">3.1</span> Buffer default coding system</a></li>
<li><a href="#semantic"><span class="section-num">3.2</span> Semantic</a></li>
<li><a href="#markdown-mode"><span class="section-num">3.3</span> Markdown mode</a></li>
<li><a href="#spacemacs-layout"><span class="section-num">3.4</span> Spacemacs-layout</a></li>
<li><a href="#deft"><span class="section-num">3.5</span> Deft</a></li>
<li><a href="#elfeed"><span class="section-num">3.6</span> Elfeed</a></li>
<li><a href="#gnus"><span class="section-num">3.7</span> Gnus</a></li>
<li><a href="#mu4e"><span class="section-num">3.8</span> Mu4e</a>
<ul>
<li><a href="#configuration-with-mu4e-0-dot-9-dot-1"><span class="section-num">3.8.1</span> Configuration with Mu4e 0.9.1</a></li>
<li><a href="#configuration-with-mu4e-1-dot-0"><span class="section-num">3.8.2</span> Configuration with Mu4e 1.0</a></li>
<li><a href="#org-mime-and-org-contacts-configuration"><span class="section-num">3.8.3</span> Org-mime and Org-contacts configuration</a></li>
</ul></li>
<li><a href="#magit"><span class="section-num">3.9</span> Magit</a>
<ul>
<li><a href="#magit-auto-complete"><span class="section-num">3.9.1</span> Magit auto complete</a></li>
</ul></li>
</ul></li>
<li><a href="#basic-setup"><span class="section-num">4</span> Basic setup</a>
<ul>
<li><a href="#personal-information-setup"><span class="section-num">4.1</span> Personal information setup</a></li>
<li><a href="#don-t-ask-me-when-kill-process-buffer"><span class="section-num">4.2</span> Don&rsquo;t ask me when kill process buffer</a></li>
<li><a href="#set-the-chinese-font-alignment"><span class="section-num">4.3</span> Set the chinese font alignment</a></li>
<li><a href="#add-auto-format-paste-code"><span class="section-num">4.4</span> Add auto format paste code</a></li>
<li><a href="#simple-better-defaults"><span class="section-num">4.5</span> Simple better defaults</a></li>
<li><a href="#large-file-handle"><span class="section-num">4.6</span> Large file handle</a></li>
<li><a href="#buffers"><span class="section-num">4.7</span> Buffers</a>
<ul>
<li><a href="#indent-whole-buffer"><span class="section-num">4.7.1</span> Indent whole buffer</a></li>
<li><a href="#quick-folding-source-block"><span class="section-num">4.7.2</span> Quick folding source block</a></li>
</ul></li>
<li><a href="#edit--insert-remove"><span class="section-num">4.8</span> Edit (Insert/Remove)</a>
<ul>
<li><a href="#insert-u200b-char"><span class="section-num">4.8.1</span> Insert U200B char</a></li>
<li><a href="#insert-empty-line-after-current-line"><span class="section-num">4.8.2</span> Insert empty line after current line</a></li>
</ul></li>
<li><a href="#file-handle"><span class="section-num">4.9</span> File Handle</a>
<ul>
<li><a href="#reopen-file-as-root"><span class="section-num">4.9.1</span> Reopen file as root</a></li>
<li><a href="#delete-current-buffer-file"><span class="section-num">4.9.2</span> Delete current buffer file</a></li>
<li><a href="#rename-current-buffer-and-file"><span class="section-num">4.9.3</span> Rename current Buffer and file</a></li>
<li><a href="#add-executable-attribute-to-file"><span class="section-num">4.9.4</span> Add executable attribute to file</a></li>
<li><a href="#clone-current-file-to-new-one"><span class="section-num">4.9.5</span> Clone current file to new one</a></li>
</ul></li>
<li><a href="#keeping-files-in-sync"><span class="section-num">4.10</span> Keeping files in sync</a></li>
<li><a href="#snippet-handle-by-yasnippet"><span class="section-num">4.11</span> Snippet handle by yasnippet</a>
<ul>
<li><a href="#implement-org-mode-s-easy-template-like-function"><span class="section-num">4.11.1</span> Implement org-mode&rsquo;s easy-template like function</a></li>
</ul></li>
<li><a href="#debug"><span class="section-num">4.12</span> Debug</a>
<ul>
<li><a href="#eval-emacs-buffer-until-error"><span class="section-num">4.12.1</span> Eval emacs buffer until error</a></li>
</ul></li>
<li><a href="#emacs-socks-proxy"><span class="section-num">4.13</span> Emacs socks proxy</a></li>
<li><a href="#highlight"><span class="section-num">4.14</span> Highlight</a></li>
</ul></li>
<li><a href="#org-mode-configuration"><span class="section-num">5</span> Org-mode configuration</a>
<ul>
<li><a href="#better-defaults-to-org"><span class="section-num">5.1</span> Better defaults to org</a></li>
<li><a href="#org-latex-configuration"><span class="section-num">5.2</span> Org latex configuration</a></li>
<li><a href="#org-mode-auto-complete"><span class="section-num">5.3</span> Org-mode auto complete</a></li>
<li><a href="#org-agenda-font-size"><span class="section-num">5.4</span> Org-agenda font size</a></li>
<li><a href="#extend-org-mode-s-easy-templates"><span class="section-num">5.5</span> Extend org-mode&rsquo;s easy templates</a></li>
<li><a href="#org-columns-and-properties"><span class="section-num">5.6</span> Org columns and properties</a></li>
<li><a href="#org-ispell"><span class="section-num">5.7</span> Org-ispell</a></li>
<li><a href="#org-notify"><span class="section-num">5.8</span> Org-notify</a></li>
<li><a href="#org-pomodoro"><span class="section-num">5.9</span> Org-pomodoro</a></li>
<li><a href="#org-journal"><span class="section-num">5.10</span> Org-journal</a></li>
<li><a href="#org-agenda-and-capture"><span class="section-num">5.11</span> Org-agenda and capture</a>
<ul>
<li><a href="#org-agenda"><span class="section-num">5.11.1</span> Org-agenda</a></li>
<li><a href="#org-capture"><span class="section-num">5.11.2</span> Org-capture</a></li>
</ul></li>
<li><a href="#add-bookmark-to-orgmode"><span class="section-num">5.12</span> Add bookmark to orgmode</a></li>
<li><a href="#org-babel-customizaton"><span class="section-num">5.13</span> Org-babel customizaton</a></li>
<li><a href="#ob-ipython-and-jupter-notebook"><span class="section-num">5.14</span> Ob-ipython and Jupter notebook</a></li>
<li><a href="#org-bullets-customization"><span class="section-num">5.15</span> Org bullets customization</a></li>
<li><a href="#org-latex-to-pdf"><span class="section-num">5.16</span> Org-latex to pdf</a></li>
<li><a href="#setup-link-abbreviations"><span class="section-num">5.17</span> Setup link abbreviations</a></li>
<li><a href="#org-subtask-and-org-checklist"><span class="section-num">5.18</span> Org-subtask and org-checklist</a></li>
<li><a href="#org-archive-all-tasks"><span class="section-num">5.19</span> Org-archive-all-tasks</a></li>
<li><a href="#org-ref-customize"><span class="section-num">5.20</span> Org-ref customize</a></li>
<li><a href="#org-project"><span class="section-num">5.21</span> Org-project</a></li>
<li><a href="#better-equation-numbering-in-latex-fragments-in-org-mode"><span class="section-num">5.22</span> Better equation numbering in LaTeX fragments in org-mode</a></li>
<li><a href="#justifying-latex-preview-fragments-in-org-mode"><span class="section-num">5.23</span> Justifying LaTeX preview fragments in org-mode</a></li>
</ul></li>
<li><a href="#programming-languages"><span class="section-num">6</span> Programming Languages</a>
<ul>
<li><a href="#yasnippet"><span class="section-num">6.1</span> Yasnippet</a></li>
<li><a href="#add-support-for-editorconfig"><span class="section-num">6.2</span> Add support for editorconfig</a></li>
<li><a href="#ess-and-r"><span class="section-num">6.3</span> Ess and R</a></li>
<li><a href="#python"><span class="section-num">6.4</span> Python</a></li>
<li><a href="#js-2-mode"><span class="section-num">6.5</span> JS-2 mode</a></li>
<li><a href="#elisp-enhanced"><span class="section-num">6.6</span> Elisp enhanced</a>
<ul>
<li><a href="#emacs-lisp-自动配对问题"><span class="section-num">6.6.1</span> Emacs Lisp 自动配对问题</a></li>
</ul></li>
</ul></li>
<li><a href="#external-package-besides-spacemacs"><span class="section-num">7</span> External package besides spacemacs</a>
<ul>
<li><a href="#use-emmet-mode-to-add-zen-coding-support"><span class="section-num">7.1</span> Use emmet-mode to add Zen Coding support</a></li>
<li><a href="#hungry-delete"><span class="section-num">7.2</span> Hungry-delete</a></li>
<li><a href="#pangu-spacing"><span class="section-num">7.3</span> Pangu-spacing</a></li>
<li><a href="#blog-setting"><span class="section-num">7.4</span> Blog setting</a>
<ul>
<li><a href="#hugo"><span class="section-num">7.4.1</span> Hugo</a></li>
<li><a href="#bolg-admin"><span class="section-num">7.4.2</span> Bolg-admin</a></li>
</ul></li>
<li><a href="#use-emms-to-play-music"><span class="section-num">7.5</span> Use emms to play music</a></li>
<li><a href="#embrace-evil-embrace"><span class="section-num">7.6</span> Embrace/evil-embrace</a></li>
</ul></li>
<li><a href="#other-customization"><span class="section-num">8</span> Other customization</a>
<ul>
<li><a href="#column-indicator"><span class="section-num">8.1</span> Column indicator</a></li>
<li><a href="#disable-auto-paste-from-clipboard"><span class="section-num">8.2</span> Disable auto paste from clipboard</a></li>
<li><a href="#truncate-lines-automatically"><span class="section-num">8.3</span> Truncate lines automatically</a></li>
<li><a href="#hotspots"><span class="section-num">8.4</span> Hotspots</a></li>
<li><a href="#count-chinese-word"><span class="section-num">8.5</span> Count chinese word</a></li>
<li><a href="#display-calendar-numbers-in-calendar-mode"><span class="section-num">8.6</span> Display Calendar numbers in calendar-mode</a></li>
<li><a href="#end-of-configuration"><span class="section-num">8.7</span> End of configuration</a></li>
</ul></li>
<li><a href="#reference"><span class="section-num">9</span> Reference</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;;; ------------------------------------------</span>
<span class="c1">;;; Do not edit this file. It was tangled from</span>
<span class="c1">;;; an org file.</span>
<span class="c1">;;; ------------------------------------------</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="introduction-emacs-configuration-in-an-org-file"><span class="section-num">1</span> Introduction: Emacs Configuration in an Org File</h2>

<p>I used spacemacs recently, org-mode is my favourite package of emacs,
I use org-mode to GTD, write slide and documents, so I want to use org-mode to
manager may own configuration of emacs beyond spacemacs.</p>

<p>After searched in google and with my research, I found the way below,
I want to manager my own emacs configuration from now (<span class="timestamp-wrapper"><span class="timestamp">[2016-11-07 Mon 21:00]</span></span>).</p>

<p>You could found my org config file in <a href="https://github.com/lengyueyang/spacemacs-lengyue">https://github.com/lengyueyang/spacemacs-lengyue</a></p>

<h3 id="custom-dot-el-setup"><span class="section-num">1.1</span> Custom.el setup</h3>

<p>In order to reduce the size of <code>init.el</code> in <code>.spacemacs</code> folder, create a <code>custom.el</code> file
in <code>.spaceamcs</code> folder, then add the flowing code to the end the <code>init.el</code>, and copy the
same location code to <code>custom.el</code> at the same time.</p>

<p><strong><em>Don&rsquo;t export this code, so use example</em></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">(setq custom-file (expand-file-name &#34;custom.el&#34; dotspacemacs-directory))
(load custom-file &#39;no-error &#39;no-message)</code></pre></td></tr></table>
</div>
</div>
<h3 id="org-mode-to-customize-emacs-configuration"><span class="section-num">1.2</span> Org-mode to customize emacs configuration</h3>

<p>Add the follow code to <code>.inti.el</code> part <code>defun dotspacemacs/user-config ()</code></p>

<p><strong><em>Don&rsquo;t export this code, so use example</em></strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">(require &#39;ob-tangle)
(org-babel-load-file
  (expand-file-name &#34;lengyueyang.org&#34;
                    dotspacemacs-directory))</code></pre></td></tr></table>
</div>
</div>
<h3 id="req-package"><span class="section-num">1.3</span> Req-package</h3>

<p><a href="https://github.com/edvorg/req-package">req-package</a> is a wrapper on top of <a href="https://github.com/jwiegley/use-package">use-package</a>, a package dependency management
tool. The documentation for <code>use-package</code> is immensely helpful for figuring out
how to describe package dependencies and settings. <code>req-package</code> adds the
<code>:require</code> keyword which allows us to define dependencies between related
packages.</p>

<h4 id="initialize-req-package"><span class="section-num">1.3.1</span> Initialize req-package</h4>

<p>With the preceding process complete, we just need to add the following
line to our init file to begin using <code>req-package</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;req-package</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="start-loading-packages-in-right-order"><span class="section-num">1.3.2</span> Start loading packages in right order</h4>

<p>To start loading packages in right order, we need to added following in the last
of emacs config.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">req-package-finish</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="keybinding"><span class="section-num">2</span> Keybinding</h2>

<p>Global keybindings of emacs but for specific customization with keybinding, like some
org related keybindings in Org-mode configuration part.</p>

<h3 id="f2-to-open-my-init-file"><span class="section-num">2.1</span> F2 to open my init file</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">open-my-init-file</span><span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">find-file</span> <span class="s">&#34;~/.spacemacs.d/lengyueyang.org&#34;</span><span class="p">))</span>

<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f2&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;open-my-init-file</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oo&#34;</span> <span class="ss">&#39;open-my-init-file</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="f3-to-open-stardict"><span class="section-num">2.2</span> F3 to open stardict</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;chinese-yasdcv</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f3&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;youdao-dictionary-search-at-point+</span><span class="p">)</span>

<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;od&#34;</span> <span class="s">&#34;dict&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ody&#34;</span> <span class="ss">&#39;yasdcv-translate-at-point</span><span class="p">)</span>

<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ods&#34;</span> <span class="ss">&#39;youdao-dictionary-search-from-input</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;odi&#34;</span> <span class="ss">&#39;youdao-dictionary-search-at-point+</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="f8-to-checkout-the-spelling-of-words"><span class="section-num">2.3</span> F8 to checkout the spelling of words</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f8&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;flyspell-correct-previous-word-generic</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;okf&#34;</span> <span class="ss">&#39;flyspell-correct-previous-word-generic</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-iswitch"><span class="section-num">2.4</span> Org-iswitch</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oa&#34;</span> <span class="ss">&#39;org-agenda-list</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c b&#34;</span><span class="p">)</span> <span class="ss">&#39;org-iswitchb</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;okb&#34;</span> <span class="ss">&#39;org-iswitchb</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="bookmark-keybindings-reconfiguration"><span class="section-num">2.5</span> Bookmark keybindings reconfiguration</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;om&#34;</span> <span class="s">&#34;Bookmark&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oms&#34;</span> <span class="ss">&#39;bookmark-set</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;omr&#34;</span> <span class="ss">&#39;bookmark-rename</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;omd&#34;</span> <span class="ss">&#39;bookmark-delete</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;omj&#34;</span> <span class="ss">&#39;counsel-bookmark</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="f7-to-open-org-download-screenshot"><span class="section-num">2.6</span> F7 to open org-download-screenshot</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f7&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;org-download-screenshot</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="spacemacs-better-defaults"><span class="section-num">3</span> Spacemacs better defaults</h2>

<p>Include the configuration of spacemacs itself layers and better use of its defaults layers.</p>

<h3 id="buffer-default-coding-system"><span class="section-num">3.1</span> Buffer default coding system</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">system-time-locale</span> <span class="s">&#34;en_US&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-language-environment</span> <span class="s">&#34;UTF-8&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq-default</span> <span class="nv">default-buffer-file-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="c1">;; (setq coding-system-for-write &#39;utf-8)</span>
<span class="p">(</span><span class="nv">set-terminal-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-keyboard-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-selection-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">locale-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
<span class="p">(</span><span class="nv">prefer-coding-system</span> <span class="ss">&#39;gb18030</span><span class="p">)</span>
<span class="p">(</span><span class="nv">prefer-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="semantic"><span class="section-num">3.2</span> Semantic</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">semantic</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">setq-mode-local</span> <span class="nv">emacs-lisp-mode</span>
                   <span class="nv">semanticdb-find-default-throttle</span>
                   <span class="p">(</span><span class="nf">default-value</span> <span class="ss">&#39;semanticdb-find-default-throttle</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="markdown-mode"><span class="section-num">3.3</span> Markdown mode</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">configuration-layer/layer-usedp</span> <span class="ss">&#39;markdown</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-mode-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.text$&#34;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">)</span> <span class="nv">auto-mode-alist</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-mode-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.md$&#34;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">)</span> <span class="nv">auto-mode-alist</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-mode-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.mdown$&#34;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">)</span> <span class="nv">auto-mode-alist</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-mode-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.mdt$&#34;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">)</span> <span class="nv">auto-mode-alist</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-mode-alist</span> <span class="p">(</span><span class="nf">cons</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.markdown$&#34;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">)</span> <span class="nv">auto-mode-alist</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="spacemacs-layout"><span class="section-num">3.4</span> Spacemacs-layout</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">lengyueyang-configuration-path</span> <span class="s">&#34;~/.spacemacs.d/&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/load-my-layout</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">persp-load-state-from-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">lengyueyang-configuration-path</span> <span class="s">&#34;lengyueyang&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/save-my-layout</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">persp-save-state-to-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">lengyueyang-configuration-path</span> <span class="s">&#34;lengyueyang&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;ol&#34;</span> <span class="s">&#34;Layout-lengyueyang&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oll&#34;</span> <span class="ss">&#39;lengyueyang/load-my-layout</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ols&#34;</span> <span class="ss">&#39;lengyueyang/save-my-layout</span><span class="p">)</span>

<span class="c1">;;(defun lengyueyang-misc/post-init-persp-mode ()</span>
<span class="c1">;;  (setq persp-kill-foreign-buffer-action &#39;kill)</span>
<span class="c1">;;  (setq persp-lighter nil)</span>
<span class="c1">;;  (when (fboundp &#39;spacemacs|define-custom-layout)</span>
<span class="c1">;;    (spacemacs|define-custom-layout &#34;@Cocos2D-X&#34;</span>
<span class="c1">;;      :binding &#34;c&#34;</span>
<span class="c1">;;      :body</span>
<span class="c1">;;      (find-file &#34;~/cocos2d-x/cocos/ui/UIWidget.cpp&#34;)</span>
<span class="c1">;;      (split-window-right)</span>
<span class="c1">;;      (find-file &#34;~/cocos2d-x/cocos/cocos2d.cpp&#34;))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="deft"><span class="section-num">3.5</span> Deft</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f5&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;deft</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">deft-extensions</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;txt&#34;</span> <span class="s">&#34;tex&#34;</span> <span class="s">&#34;org&#34;</span> <span class="s">&#34;mk&#34;</span> <span class="s">&#34;makedown&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">deft-directory</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="elfeed"><span class="section-num">3.6</span> Elfeed</h3>

<p><a href="https://github.com/lujun9972/emacs-document/blob/master/emacs-common/在Emacs中用elfeed阅读你的RSS-feeds.org">在 Emacs 中用 elfeed 阅读你的 RSS-feeds</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">elfeed-org</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nv">elfeed-org</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">rmh-elfeed-org-files</span> <span class="p">(</span><span class="nf">list</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Elfeed.org&#34;</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="gnus"><span class="section-num">3.7</span> Gnus</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; ;; Get email, and store in nnml</span>
<span class="c1">;; (setq gnus-secondary-select-methods</span>
<span class="c1">;;       &#39;(</span>
<span class="c1">;;         (nntp &#34;gmane&#34;</span>
<span class="c1">;;               (nntp-address &#34;news.gmane.org&#34;))</span>
<span class="c1">;;         (nntp &#34;news.eternal-september.org&#34;)</span>
<span class="c1">;;         (nntp &#34;nntp.aioe.org&#34;)</span>
<span class="c1">;;         (nntp &#34;news.gwene.org&#34;)</span>
<span class="c1">;;         ))</span>

<span class="c1">;; (setq gnus-secondary-select-methods</span>
<span class="c1">;;       &#39;(</span>
<span class="c1">;;         (nnimap &#34;gmail&#34;</span>
<span class="c1">;;                 (nnimap-address</span>
<span class="c1">;;                  &#34;imap.gmail.com&#34;)</span>
<span class="c1">;;                 (nnimap-server-port 993)</span>
<span class="c1">;;                 (nnimap-stream ssl))</span>
<span class="c1">;;         ))</span>

<span class="c1">;; ;; Send email via Gmail:</span>
<span class="c1">;; (setq message-send-mail-function &#39;smtpmail-send-it</span>
<span class="c1">;;       smtpmail-default-smtp-server &#34;smtp.qq.com&#34;)</span>

<span class="c1">;; ;; Archive outgoing email in Sent folder on imap.gmail.com:</span>
<span class="c1">;; (setq gnus-message-archive-method &#39;(nnimap &#34;imap.gmail.com&#34;)</span>
<span class="c1">;;       gnus-message-archive-group &#34;[Gmail]/Sent Mail&#34;)</span>

<span class="c1">;; ;; set return email address based on incoming email address</span>
<span class="c1">;; (setq gnus-posting-styles</span>
<span class="c1">;;       &#39;(((header &#34;to&#34; &#34;address@outlook.com&#34;)</span>
<span class="c1">;;          (address &#34;address@outlook.com&#34;))</span>
<span class="c1">;;         ((header &#34;to&#34; &#34;address@gmail.com&#34;)</span>
<span class="c1">;;          (address &#34;address@gmail.com&#34;))))</span>

<span class="c1">;; ;; store email in ~/gmail directory</span>
<span class="c1">;; (setq nnml-directory &#34;~/MEGA/Emacs-lengyue/Data Collection/Gnus&#34;)</span>
<span class="c1">;; (setq message-directory &#34;~/MEGA/Emacs-lengyue/Data Collection/Gnus&#34;)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="mu4e"><span class="section-num">3.8</span> Mu4e</h3>

<h4 id="configuration-with-mu4e-0-dot-9-dot-1"><span class="section-num">3.8.1</span> Configuration with Mu4e 0.9.1</h4>

<ul>
<li><a href="https://github.com/larstvei/dot-emacs">larstvei/dot-emacs: My Emacs configurations written in Org mode</a></li>
<li><a href="http://wenshanren.org/?p=111">mu4e: an E-mail Client for Emacs | 肉山博客 (Wenshan&rsquo;s Blog)</a></li>
<li><a href="http://coldnew.github.io/blog/2016/01-02%5Fmu4e/">在 emacs 下使用 mu4e 收發郵件 | coldnew&rsquo;s blog</a></li>
<li><a href="http://blog.csdn.net/csfreebird/article/details/52973188">spacemacs email layer - 博客频道 - CSDN.NET</a></li>
<li><a href="https://github.com/howardabrams/dot-files/blob/master/emacs-mail.org">dot-files/emacs-mail.org at master · howardabrams/dot-files</a></li>
<li><a href="https://guso.ml/search?q=offlinemap+多帐户&amp;prmd=ivns&amp;ei=pVc8WPPzNsv0vgTT2pn4Cw&amp;start=10&amp;sa=N">offlinemap 多帐户 - Google 搜索</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/mu4e">spacemacs/layers/+email/mu4e at master · syl20bnr/spacemacs</a></li>
<li><a href="http://www.djcbsoftware.nl/code/mu/mu4e/index.html">Mu4e 0.9.16 user manual: Top</a></li>
<li><a href="https://github.com/lujun9972/emacs-document/blob/master/org-mode/用org-mime在org-mode中发送html邮件.org">emacs-document/用 org-mime 在 org-mode 中发送 html 邮件.org at master · lujun9972/emacs-document</a></li>
<li><a href="https://emacs.lujianmei.com/03-For-an-editor/init-mu4e.html">Mu4e 邮件管理 · 谁说 Emacs 不好玩？</a></li>
<li><a href="http://www.bagualu.net/wordpress/archives/6555">emacs 中的 email 客户端 mu4e | 猎数博客</a></li>
<li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/+email/gnus#org-mime-in-org-layer">spacemacs/layers/+email/gnus at master · syl20bnr/spacemacs</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (add-to-load-path &#34;~/.spacemacs.d/package/mu4e&#34;)</span>

<span class="c1">;; (require &#39;mu4e)</span>

<span class="c1">;; (setq mu4e-account-alist</span>
<span class="c1">;;       &#39;((&#34;Gmail&#34;</span>
<span class="c1">;;          ;; Under each account, set the account-specific variables you want.</span>
<span class="c1">;;          (mu4e-sent-messages-behavior delete)</span>
<span class="c1">;;          (mu4e-sent-folder &#34;/Gmail/[Gmail].Sent Mail&#34;)</span>
<span class="c1">;;          (mu4e-drafts-folder &#34;/Gmail/[Gmail].Drafts&#34;)</span>
<span class="c1">;;          (user-mail-address &#34;maoxiaoweihl@gmail.com&#34;)</span>
<span class="c1">;;          (user-full-name &#34;Mao Xiaowei&#34;)</span>
<span class="c1">;;          (smtpmail-stream-type ssl)</span>
<span class="c1">;;          (smtpmail-smtp-service 465)</span>
<span class="c1">;;          )</span>
<span class="c1">;;         (&#34;Foxmail&#34;</span>
<span class="c1">;;          (mu4e-sent-messages-behavior sent)</span>
<span class="c1">;;          (mu4e-sent-folder &#34;/Foxmail/Sent Messages&#34;)</span>
<span class="c1">;;          (mu4e-drafts-folder &#34;/Foxmail/Drafts&#34;)</span>
<span class="c1">;;          (user-mail-address &#34;maoxiaowei1988@foxmail.com&#34;)</span>
<span class="c1">;;          (user-full-name &#34;Mao Xiaowei&#34;)</span>
<span class="c1">;;          (smtpmail-stream-type ssl)</span>
<span class="c1">;;          (smtpmail-smtp-service 465)</span>
<span class="c1">;;          )</span>
<span class="c1">;;         ;; (&#34;Lengyue-163&#34;</span>
<span class="c1">;;         ;;  (mu4e-sent-messages-behavior sent)</span>
<span class="c1">;;         ;;  (mu4e-sent-folder &#34;/Lengyue-163/Sent Items&#34;)</span>
<span class="c1">;;         ;;  (mu4e-drafts-folder &#34;/Lengyue-163/Drafts&#34;)</span>
<span class="c1">;;         ;;  (user-mail-address &#34;zanghuahong@163.com&#34;)</span>
<span class="c1">;;         ;;  (user-full-name &#34;Mao Xiaowei&#34;))</span>
<span class="c1">;;        )</span>
<span class="c1">;; )</span>

<span class="c1">;; ;;(mu4e/mail-account-reset)</span>

<span class="c1">;; ;;; Set up some common mu4e variables</span>
<span class="c1">;; (setq mu4e-maildir &#34;~/MEGA/Emacs-lengyue/Data Collection/Mu4e&#34;</span>
<span class="c1">;;       mu4e-trash-folder &#34;/Gmail/Trash&#34;</span>
<span class="c1">;;       mu4e-refile-folder &#34;/Gmail/Archive&#34;</span>
<span class="c1">;;       ;; mu4e-get-mail-command &#34;mbsync -a&#34;</span>
<span class="c1">;;       mu4e-update-interval nil</span>
<span class="c1">;;       mu4e-compose-signature-auto-include nil</span>
<span class="c1">;;       mu4e-view-show-images t</span>
<span class="c1">;;       mu4e-view-show-addresses t)</span>

<span class="c1">;; ;;; Mail directory shortcuts</span>
<span class="c1">;; (setq mu4e-maildir-shortcuts</span>
<span class="c1">;;       &#39;(</span>
<span class="c1">;;         (&#34;/Foxmail/INBOX&#34; . ?f)</span>
<span class="c1">;;         (&#34;/Foxmail/Drafts&#34; . ?d)</span>
<span class="c1">;;         (&#34;/Foxmail/Sent Messages&#34; . ?s)</span>
<span class="c1">;;         (&#34;/Gmail/INBOX&#34; . ?g)</span>
<span class="c1">;;         ;; (&#34;/Gmail/[Gmail].All Mail&#34; . ?a)</span>
<span class="c1">;;         (&#34;/Gmail/[Gmail].Drafts&#34; . ?r)</span>
<span class="c1">;;         (&#34;/Gmail/[Gmail].Sent Mail&#34; . ?e)</span>
<span class="c1">;;         ;;(&#34;/Gmail/[Gmail].Trash&#34; . ?t)</span>
<span class="c1">;;         ;; (&#34;/Lengyue-163/INBOX&#34; . ?i)</span>
<span class="c1">;;         ))</span>

<span class="c1">;; ;;; Bookmarks</span>
<span class="c1">;; (setq mu4e-bookmarks</span>
<span class="c1">;;       `((&#34;flag:unread AND NOT flag:trashed&#34; &#34;Unread messages&#34; ?u)</span>
<span class="c1">;;         (&#34;date:today..now&#34; &#34;Today&#39;s messages&#34; ?t)</span>
<span class="c1">;;         (&#34;date:7d..now&#34; &#34;Last 7 days&#34; ?w)</span>
<span class="c1">;;         (&#34;mime:image/*&#34; &#34;Messages with images&#34; ?p)</span>
<span class="c1">;;         (,(mapconcat &#39;identity</span>
<span class="c1">;;                      (mapcar</span>
<span class="c1">;;                       (lambda (maildir)</span>
<span class="c1">;;                         (concat &#34;maildir:&#34; (car maildir)))</span>
<span class="c1">;;                       mu4e-maildir-shortcuts) &#34; OR &#34;)</span>
<span class="c1">;;          &#34;All inboxes&#34; ?i)))</span>

<span class="c1">;; (mu4e-alert-set-default-style &#39;libnotify)</span>
<span class="c1">;; (alert-add-rule :category &#34;mu4e-alert&#34; :style &#39;fringe :predicate (lambda (_) (string-match-p &#34;^mu4e-&#34; (symbol-name major-mode))) :continue t)</span>
<span class="c1">;; (mu4e-alert-enable-notifications)</span>
<span class="c1">;; ;; (setq mu4e-alert-email-notification-types &#39;(count))</span>
<span class="c1">;; (setq mu4e-alert-email-notification-types &#39;(subjects))</span>

<span class="c1">;; ;; (setq mu4e-enable-notifications t)</span>
<span class="c1">;; ;; (with-eval-after-load &#39;mu4e-alert</span>
<span class="c1">;;   ;; Enable Desktop notifications</span>
<span class="c1">;;   ;; (mu4e-alert-set-default-style &#39;notifications)) ; For linux</span>
<span class="c1">;;   ;; (mu4e-alert-set-default-style &#39;libnotify))  ; Alternative for linux</span>
<span class="c1">;;   ;; (mu4e-alert-set-default-style &#39;notifier))   ; For Mac OSX (through the</span>
<span class="c1">;;                                         ; terminal notifier app)</span>
<span class="c1">;; ;; (mu4e-alert-set-default-style &#39;growl))      ; Alternative for Mac OSX</span>

<span class="c1">;; ;; (setq mu4e-enable-mode-line t)</span>

<span class="c1">;; (setq mu4e-get-mail-command &#34;offlineimap&#34;)</span>
<span class="c1">;; ;; Fetch mail in 60 sec interval</span>
<span class="c1">;; (setq mu4e-update-interval 1200)</span>

<span class="c1">;; (require &#39;mu4e-contrib)</span>
<span class="c1">;; (setq mu4e-html2text-command &#39;mu4e-shr2text)</span>
<span class="c1">;; ;; try to emulate some of the eww key-bindings</span>
<span class="c1">;; (add-hook &#39;mu4e-view-mode-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (local-set-key (kbd &#34;&lt;tab&gt;&#34;) &#39;shr-next-link)</span>
<span class="c1">;;             (local-set-key (kbd &#34;&lt;backtab&gt;&#34;) &#39;shr-previous-link)))</span>

<span class="c1">;; ;; something about ourselves</span>
<span class="c1">;; (require &#39;smtpmail)</span>
<span class="c1">;; (setq user-mail-address &#34;maoxiaowei1988@foxmail.com&#34;</span>
<span class="c1">;;       user-full-name &#34;Xiaowei, Mao&#34;</span>
<span class="c1">;;       smtpmail-stream-type &#39;starttls</span>
<span class="c1">;;       starttls-use-gnutls t</span>
<span class="c1">;;       mu4e-compose-signature</span>
<span class="c1">;;       (concat</span>
<span class="c1">;;        &#34;Xiaowei Mao\n&#34;</span>
<span class="c1">;;        &#34;Email: maoxiaoweihl@gmail.com\n&#34;</span>
<span class="c1">;;        &#34;Email: maoxiaowei1988@foxmail.com\n&#34;</span>
<span class="c1">;;        &#34;Blog: http://lengyueyang.github.io\n&#34;</span>
<span class="c1">;;        &#34;\n&#34;)</span>
<span class="c1">;;       mu4e-compose-signature-auto-include t</span>
<span class="c1">;;       )</span>

<span class="c1">;; (setq send-mail-function            &#39;smtpmail-send-it</span>
<span class="c1">;;       message-send-mail-function    &#39;smtpmail-send-it</span>
<span class="c1">;;       smtpmail-auth-credentials     (expand-file-name &#34;~/.authinfo&#34;)</span>
<span class="c1">;;       smtpmail-stream-type          &#39;ssl</span>
<span class="c1">;;       smtpmail-smtp-server          &#34;smtp.qq.com&#34;</span>
<span class="c1">;;       smtpmail-smtp-service         465</span>
<span class="c1">;;       smtpmail-smtp-user &#34;maoxiaowei1988@qq.com&#34;)</span>

<span class="c1">;; ;; (mu4e/mail-account-reset)</span>
<span class="c1">;; (setq message-kill-buffer-on-exit t)</span>

<span class="c1">;; ;; save attachment to my desktop (this can also be a function)</span>
<span class="c1">;; (setq mu4e-attachment-dir &#34;/home/lengyue/Documents/Mu4e/Attachment&#34;)</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="configuration-with-mu4e-1-dot-0"><span class="section-num">3.8.2</span> Configuration with Mu4e 1.0</h4>

<ul>
<li><a href="https://www.djcbsoftware.nl/code/mu/mu4e/index.html#SEC%5FContents">https://www.djcbsoftware.nl/code/mu/mu4e/index.html#SEC%5FContents</a></li>
<li><a href="http://cachestocaches.com/2017/3/complete-guide-email-emacs-using-mu-and-/">http://cachestocaches.com/2017/3/complete-guide-email-emacs-using-mu-and-/</a></li>
<li><a href="https://vxlabs.com/2017/02/07/mu4e-0-9-18-e-mailing-with-emacs-now-even-better/">https://vxlabs.com/2017/02/07/mu4e-0-9-18-e-mailing-with-emacs-now-even-better/</a></li>
<li><a href="http://kitchingroup.cheme.cmu.edu/blog/2016/10/29/Sending-html-emails-from-org-mode-with-org-mime/">http://kitchingroup.cheme.cmu.edu/blog/2016/10/29/Sending-html-emails-from-org-mode-with-org-mime/</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (add-to-load-path &#34;~/.spacemacs.d/package/mu4e&#34;)</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;mu4e</span><span class="p">)</span>

<span class="c1">;; I want my format=flowed thank you very much</span>
<span class="c1">;; mu4e sets up visual-line-mode and also fill (M-q) to do the right thing</span>
<span class="c1">;; each paragraph is a single long line; at sending, emacs will add the</span>
<span class="c1">;; special line continuation characters.</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-compose-format-flowed</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;; every new email composition gets its own frame! (window)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-compose-in-new-frame</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;; give me ISO(ish) format date-time stamps in the header list</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-headers-date-format</span> <span class="s">&#34;%Y-%m-%d %H:%M&#34;</span><span class="p">)</span>

<span class="c1">;; show full addresses in view message (instead of just names)</span>
<span class="c1">;; toggle per name with M-RET</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-view-show-addresses</span> <span class="ss">&#39;t</span><span class="p">)</span>

<span class="c1">;;; Set up some common mu4e variables</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-maildir</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Data-collection/Mu4e&#34;</span>
      <span class="nv">mu4e-trash-folder</span> <span class="s">&#34;/Gmail/Trash&#34;</span>
      <span class="nv">mu4e-refile-folder</span> <span class="s">&#34;/Gmail/Archive&#34;</span>
      <span class="nv">mu4e-sent-folder</span>   <span class="s">&#34;/Foxmail/Sent Messages&#34;</span>
      <span class="nv">mu4e-drafts-folder</span> <span class="s">&#34;/Foxmail/Drafts&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;smtpmail</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span>
 <span class="nv">send-mail-function</span> <span class="ss">&#39;smtpmail-send-it</span>
 <span class="nv">message-send-mail-function</span> <span class="ss">&#39;smtpmail-send-it</span>
 <span class="nv">smtpmail-auth-credentials</span>     <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/.authinfo&#34;</span><span class="p">)</span>
 <span class="nv">smtpmail-smtp-server</span> <span class="s">&#34;smtp.qq.com&#34;</span>
 <span class="nv">smtpmail-smtp-service</span> <span class="mi">465</span>
 <span class="nv">smtpmail-stream-type</span> <span class="ss">&#39;ssl</span>
 <span class="p">)</span>

<span class="c1">;; don&#39;t keep message buffers around</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">message-kill-buffer-on-exit</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;;; Mail directory shortcuts</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-maildir-shortcuts</span>
      <span class="o">&#39;</span><span class="p">(</span>
        <span class="p">(</span><span class="s">&#34;/Foxmail/INBOX&#34;</span> <span class="o">.</span> <span class="sc">?f</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;/Foxmail/Drafts&#34;</span> <span class="o">.</span> <span class="sc">?d</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;/Foxmail/Sent Messages&#34;</span> <span class="o">.</span> <span class="sc">?s</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;/Gmail/INBOX&#34;</span> <span class="o">.</span> <span class="sc">?g</span><span class="p">)</span>
        <span class="c1">;; (&#34;/Gmail/[Gmail].All Mail&#34; . ?a)</span>
        <span class="p">(</span><span class="s">&#34;/Gmail/[Gmail].Drafts&#34;</span> <span class="o">.</span> <span class="sc">?r</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;/Gmail/[Gmail].Sent Mail&#34;</span> <span class="o">.</span> <span class="sc">?e</span><span class="p">)</span>
        <span class="c1">;;(&#34;/Gmail/[Gmail].Trash&#34; . ?t)</span>
        <span class="c1">;; (&#34;/Lengyue-163/INBOX&#34; . ?i)</span>
        <span class="p">))</span>

<span class="c1">;; the list of all of my e-mail addresses</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-user-mail-address-list</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;maoxiaowei1988@foxmail.com&#34;</span>
                                    <span class="s">&#34;maoxiaoweihl@gmail.com&#34;</span><span class="p">))</span>

<span class="c1">;; the headers to show in the headers list -- a pair of a field</span>
<span class="c1">;; and its width, with `nil&#39; meaning &#39;unlimited&#39;</span>
<span class="c1">;; (better only use that for the last field.</span>
<span class="c1">;; These are the defaults:</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-headers-fields</span>
      <span class="o">&#39;</span><span class="p">(</span> <span class="p">(</span><span class="nb">:date</span>          <span class="o">.</span>  <span class="mi">25</span><span class="p">)</span>    <span class="c1">;; alternatively, use :human-date</span>
         <span class="p">(</span><span class="nb">:flags</span>         <span class="o">.</span>   <span class="mi">6</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">:from</span>          <span class="o">.</span>  <span class="mi">22</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">:subject</span>       <span class="o">.</span>  <span class="no">nil</span><span class="p">)))</span> <span class="c1">;; alternatively, use :thread-subject</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-get-mail-command</span> <span class="s">&#34;proxychains offlineimap&#34;</span><span class="p">)</span>
<span class="c1">;; Fetch mail in 60 sec interval</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-update-interval</span> <span class="mi">1200</span><span class="p">)</span>


<span class="c1">;; (mu4e/mail-account-reset)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">message-kill-buffer-on-exit</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;; save attachment to my desktop (this can also be a function)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-attachment-dir</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Data-collection/Mu4e/Attachment&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-contexts</span>
      <span class="o">`</span><span class="p">(</span>
        <span class="o">,</span><span class="p">(</span><span class="nv">make-mu4e-context</span>
           <span class="nb">:name</span> <span class="s">&#34;Foxmail_lengyue&#34;</span>
           <span class="nb">:enter-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">mu4e-message</span> <span class="s">&#34;Enter maoxiaowei1988@foxmail.com.com context&#34;</span><span class="p">))</span>
           <span class="nb">:leave-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">mu4e-message</span> <span class="s">&#34;Leave maoxiaowei1988@foxmail.com.com context&#34;</span><span class="p">))</span>
           <span class="nb">:match-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">msg</span><span class="p">)</span>
                         <span class="p">(</span><span class="nb">when</span> <span class="nv">msg</span>
                           <span class="p">(</span><span class="nv">mu4e-message-contact-field-matches</span> <span class="nv">msg</span>
                                                               <span class="nb">:to</span> <span class="s">&#34;maoxiaowei1988@foxmail.com&#34;</span><span class="p">)))</span>
           <span class="nb">:vars</span> <span class="o">&#39;</span><span class="p">(</span> <span class="p">(</span> <span class="nv">user-mail-address</span>       <span class="o">.</span> <span class="s">&#34;maoxiaowei1988@foxmail.com&#34;</span> <span class="p">)</span>
                    <span class="p">(</span> <span class="nf">user-full-name</span>          <span class="o">.</span> <span class="s">&#34;Mao Xiaowei&#34;</span> <span class="p">)</span>
                    <span class="p">(</span> <span class="nv">smtpmail-smtp-server</span>    <span class="o">.</span> <span class="s">&#34;smtp.qq.com&#34;</span> <span class="p">)</span>
                    <span class="p">(</span> <span class="nv">mu4e-compose-signature</span>  <span class="o">.</span>
                                              <span class="p">(</span><span class="nf">concat</span>
                                               <span class="s">&#34;Xiaowei Mao\n&#34;</span>
                                               <span class="s">&#34;Email: maoxiaoweihl@gmail.com\n&#34;</span>
                                               <span class="s">&#34;Email: maoxiaowei1988@foxmail.com\n&#34;</span>
                                               <span class="s">&#34;Blog: http://lengyueyang.github.io\n&#34;</span>
                                               <span class="s">&#34;Github: https://github.com/lengyueyang\n&#34;</span><span class="p">))))</span>
        <span class="o">,</span><span class="p">(</span><span class="nv">make-mu4e-context</span>
           <span class="nb">:name</span> <span class="s">&#34;Gmail_lengyue&#34;</span>
           <span class="nb">:enter-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">mu4e-message</span> <span class="s">&#34;Enter maoxiaoweihl@gmail.com context&#34;</span><span class="p">))</span>
           <span class="nb">:leave-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">mu4e-message</span> <span class="s">&#34;Leave maoxiaoweihl@gmail.com context&#34;</span><span class="p">))</span>
           <span class="c1">;; we match based on the contact-fields of the message (that we are replying to)</span>
           <span class="c1">;; https://www.djcbsoftware.nl/code/mu/mu4e/What-are-contexts.html#What-are-contexts</span>
           <span class="nb">:match-func</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">msg</span><span class="p">)</span>
                         <span class="p">(</span><span class="nb">when</span> <span class="nv">msg</span>
                           <span class="p">(</span><span class="nv">mu4e-message-contact-field-matches</span> <span class="nv">msg</span>
                                                               <span class="nb">:to</span> <span class="s">&#34;maoxiaoweihl@gmail.com&#34;</span><span class="p">)))</span>
           <span class="nb">:vars</span> <span class="o">&#39;</span><span class="p">(</span> <span class="p">(</span> <span class="nv">user-mail-address</span>      <span class="o">.</span> <span class="s">&#34;maoxiaoweihl@gmail.com&#34;</span>  <span class="p">)</span>
                    <span class="p">(</span> <span class="nf">user-full-name</span>         <span class="o">.</span> <span class="s">&#34;Mao Xiaowei&#34;</span> <span class="p">)</span>
                    <span class="p">(</span> <span class="nv">smtpmail-smtp-server</span>   <span class="o">.</span> <span class="s">&#34;smtp.gmail.com&#34;</span> <span class="p">)</span>
                    <span class="p">(</span> <span class="nv">mu4e-compose-signature</span> <span class="o">.</span>
                                             <span class="p">(</span><span class="nf">concat</span>
                                              <span class="s">&#34;Xiaowei Mao\n&#34;</span>
                                              <span class="s">&#34;Email: maoxiaoweihl@gmail.com\n&#34;</span>
                                              <span class="s">&#34;Email: maoxiaowei1988@foxmail.com\n&#34;</span>
                                              <span class="s">&#34;Blog: http://lengyueyang.github.io\n&#34;</span>
                                              <span class="s">&#34;Github: https://github.com/lengyueyang\n&#34;</span><span class="p">))))</span>
       <span class="p">)</span>
<span class="p">)</span>

<span class="c1">;;; Bookmarks</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-bookmarks</span>
      <span class="o">`</span><span class="p">((</span><span class="s">&#34;flag:unread AND NOT flag:trashed&#34;</span> <span class="s">&#34;Unread messages&#34;</span> <span class="sc">?u</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;date:today..now&#34;</span> <span class="s">&#34;Today&#39;s messages&#34;</span> <span class="sc">?t</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;date:7d..now&#34;</span> <span class="s">&#34;Last 7 days&#34;</span> <span class="sc">?w</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;mime:image/*&#34;</span> <span class="s">&#34;Messages with images&#34;</span> <span class="sc">?p</span><span class="p">)</span>
        <span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nf">mapconcat</span> <span class="ss">&#39;identity</span>
                     <span class="p">(</span><span class="nf">mapcar</span>
                      <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">maildir</span><span class="p">)</span>
                        <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;maildir:&#34;</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">maildir</span><span class="p">)))</span>
                      <span class="nv">mu4e-maildir-shortcuts</span><span class="p">)</span> <span class="s">&#34; OR &#34;</span><span class="p">)</span>
         <span class="s">&#34;All inboxes&#34;</span> <span class="sc">?i</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">mu4e-alert-set-default-style</span> <span class="ss">&#39;libnotify</span><span class="p">)</span>
<span class="p">(</span><span class="nv">alert-add-rule</span> <span class="nb">:category</span> <span class="s">&#34;mu4e-alert&#34;</span> <span class="nb">:style</span> <span class="ss">&#39;fringe</span> <span class="nb">:predicate</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">_</span><span class="p">)</span> <span class="p">(</span><span class="nv">string-match-p</span> <span class="s">&#34;^mu4e-&#34;</span> <span class="p">(</span><span class="nf">symbol-name</span> <span class="nv">major-mode</span><span class="p">)))</span> <span class="nb">:continue</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nv">mu4e-alert-enable-notifications</span><span class="p">)</span>
<span class="c1">;; (setq mu4e-alert-email-notification-types &#39;(count))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-alert-email-notification-types</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">subjects</span><span class="p">))</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-enable-mode-line</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;; start with the first (default) context;</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-context-policy</span> <span class="ss">&#39;pick-first</span><span class="p">)</span>

<span class="c1">;; compose with the current context if no context matches;</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-compose-context-policy</span> <span class="no">nil</span><span class="p">)</span>

<span class="c1">;; don&#39;t save messages to Sent Messages, Gmail/IMAP takes care of this</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-sent-messages-behavior</span> <span class="ss">&#39;delete</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;message-mode-hook</span> <span class="ss">&#39;turn-on-flyspell</span> <span class="ss">&#39;append</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;mu4e-view-mode-hook</span>
          <span class="p">(</span><span class="nb">lambda</span><span class="p">()</span>
            <span class="p">(</span><span class="nv">mu4e-view-toggle-hide-cited</span><span class="p">)</span>
            <span class="c1">;; try to emulate some of the eww key-bindings</span>
            <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;tab&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;shr-next-link</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;backtab&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;shr-previous-link</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="org-mime-and-org-contacts-configuration"><span class="section-num">3.8.3</span> Org-mime and Org-contacts configuration</h4>

<p><a href="https://github.com/org-mime/org-mime/blob/master/org-mime.el">https://github.com/org-mime/org-mime/blob/master/org-mime.el</a>
<a href="http://kitchingroup.cheme.cmu.edu/blog/2016/10/29/Sending-html-emails-from-org-mode-with-org-mime/">http://kitchingroup.cheme.cmu.edu/blog/2016/10/29/Sending-html-emails-from-org-mode-with-org-mime/</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-org-contacts-file</span>  <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Contacts.org&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;mu4e-headers-actions</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;org-contact-add&#34;</span> <span class="o">.</span> <span class="nv">mu4e-action-add-org-contact</span><span class="p">)</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;mu4e-view-actions</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;org-contact-add&#34;</span> <span class="o">.</span> <span class="nv">mu4e-action-add-org-contact</span><span class="p">)</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ivy</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/org-mime&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-mime</span><span class="p">)</span>
<span class="c1">;; for gnus – this is set by default</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-mime-library</span> <span class="ss">&#39;mml</span><span class="p">)</span>
<span class="c1">;; OR for Wanderlust (WL)</span>
<span class="c1">;; (setq org-mime-library &#39;semi)</span>
<span class="c1">;; OR for VM – not yet supported</span>
<span class="c1">;; (setq org-mime-library &#39;vm)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;message-mode-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c M-o&#34;</span><span class="p">)</span> <span class="ss">&#39;org-mime-htmlize</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c M-o&#34;</span><span class="p">)</span> <span class="ss">&#39;org-mime-org-buffer-htmlize</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mime-html-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nv">org-mime-change-element-style</span>
             <span class="s">&#34;pre&#34;</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;color: %s; background-color: %s; padding: 0.5em;&#34;</span>
                           <span class="s">&#34;#E6E1DC&#34;</span> <span class="s">&#34;#232323&#34;</span><span class="p">))))</span>

<span class="c1">;; the following can be used to nicely offset block quotes in email bodies</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mime-html-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nv">org-mime-change-element-style</span>
             <span class="s">&#34;blockquote&#34;</span> <span class="s">&#34;border-left: 2px solid gray; padding-left: 4px;&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mime-html-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&#34;@\\([^@]*\\)@&#34;</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)</span>
              <span class="p">(</span><span class="nf">replace-match</span> <span class="s">&#34;&lt;span style=\&#34;color:red\&#34;&gt;\\1&lt;/span&gt;&#34;</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-mime-export-options</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:section-numbers</span> <span class="no">nil</span>
                                                 <span class="nb">:with-author</span> <span class="no">nil</span>
                                                 <span class="nb">:with-toc</span> <span class="no">nil</span><span class="p">))</span>
<span class="c1">;; here we set aliases for groups.</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">email-groups</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;ms&#34;</span> <span class="o">.</span> <span class="s">&#34;email1, email2&#34;</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;phd&#34;</span> <span class="o">.</span> <span class="s">&#34;email3, email4&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">mu4e-compose-complete-only-personal</span> <span class="no">nil</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-contacts-open-from-email</span> <span class="p">(</span><span class="nv">email</span><span class="p">)</span>
  <span class="s">&#34;Open org-contact with matching EMAIL. If no match, create new
</span><span class="s">entry with prompts for first and last name.&#34;</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">contact</span> <span class="p">(</span><span class="nb">catch</span> <span class="ss">&#39;contact</span>
       <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">contact</span> <span class="nv">in</span>  <span class="p">(</span><span class="nv">org-contacts-db</span><span class="p">)</span>
       <span class="nb">do</span>
       <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">string=</span> <span class="nv">email</span> <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;EMAIL&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">))))</span>
         <span class="p">(</span><span class="nb">throw</span> <span class="ss">&#39;contact</span> <span class="nv">contact</span><span class="p">))))))</span>

    <span class="p">(</span><span class="nb">unless</span> <span class="nv">contact</span>
    <span class="p">(</span><span class="nf">set-buffer</span> <span class="p">(</span><span class="nv">find-file-noselect</span> <span class="p">(</span><span class="nv">ido-completing-read</span>
             <span class="s">&#34;Select org-contact file: &#34;</span>
             <span class="nv">org-contacts-files</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span>  <span class="s">&#34;\n* %s %s\n&#34;</span>
         <span class="p">(</span><span class="nv">read-input</span> <span class="s">&#34;First name: &#34;</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">read-input</span> <span class="s">&#34;Last name: &#34;</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">org-entry-put</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="s">&#34;EMAIL&#34;</span> <span class="nv">email</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>

    <span class="p">(</span><span class="nb">when</span> <span class="nv">contact</span>
      <span class="p">(</span><span class="nv">find-file</span>  <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;FILE&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">))))</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">1</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">show-subtree</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-contacts-tag-selection</span> <span class="p">(</span><span class="nv">selection</span><span class="p">)</span>
  <span class="s">&#34;Prompts you for a tag, and tags each entry in org-contacts
</span><span class="s">that has a matching email in </span><span class="ss">`helm-marked-candidates&#39;</span><span class="s">. Ignore
</span><span class="s">emails that are not in an org-contact file. I am not sure what
</span><span class="s">the best thing to do there is. Probably prompt for a file, and
</span><span class="s">add an entry to the end of it.&#34;</span>
  <span class="p">(</span><span class="nb">save-excursion</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">tag</span> <span class="p">(</span><span class="nv">read-input</span> <span class="s">&#34;Tag: &#34;</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">email</span> <span class="nv">in</span> <span class="p">(</span><span class="nv">helm-marked-candidates</span><span class="p">)</span>
      <span class="nb">do</span>
      <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">contact</span> <span class="p">(</span><span class="nb">catch</span> <span class="ss">&#39;contact</span>
           <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">contact</span> <span class="nv">in</span>  <span class="p">(</span><span class="nv">org-contacts-db</span><span class="p">)</span>
           <span class="nb">do</span>
           <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">string=</span>
            <span class="nv">email</span>
            <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span>
            <span class="s">&#34;EMAIL&#34;</span>
            <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">))))</span>
             <span class="p">(</span><span class="nb">throw</span> <span class="ss">&#39;contact</span> <span class="nv">contact</span><span class="p">))))))</span>
        <span class="c1">;; add new contact and tag it</span>
        <span class="p">(</span><span class="nb">unless</span> <span class="nv">contact</span>
    <span class="p">(</span><span class="nf">set-buffer</span> <span class="p">(</span><span class="nv">find-file-noselect</span> <span class="p">(</span><span class="nv">ido-completing-read</span>
             <span class="s">&#34;Select org-contact file: &#34;</span>
             <span class="nv">org-contacts-files</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span>  <span class="s">&#34;\n* %s %s\n&#34;</span>
         <span class="p">(</span><span class="nv">read-input</span> <span class="s">&#34;First name: &#34;</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">read-input</span> <span class="s">&#34;Last name: &#34;</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">org-entry-put</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="s">&#34;EMAIL&#34;</span> <span class="nv">email</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-set-tags-to</span> <span class="p">(</span><span class="nf">list</span> <span class="nv">tag</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>
        <span class="c1">;; update tags on existing entry</span>
        <span class="p">(</span><span class="nb">when</span> <span class="nv">contact</span>
    <span class="p">(</span><span class="nv">find-file-noselect</span>  <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;FILE&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">))))</span>
                <span class="p">(</span><span class="nf">set-buffer</span> <span class="p">(</span><span class="nf">marker-buffer</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">org-set-tags-to</span> <span class="p">(</span><span class="nf">append</span> <span class="p">(</span><span class="nv">org-get-tags</span><span class="p">)</span> <span class="p">(</span><span class="nf">list</span> <span class="nv">tag</span><span class="p">)))))))))</span>


<span class="p">(</span><span class="nb">defun</span> <span class="nv">j-insert-emails</span> <span class="p">()</span>
  <span class="s">&#34;Helm interface to email addresses&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">helm</span> <span class="nb">:sources</span> <span class="o">`</span><span class="p">(((</span><span class="nv">name</span> <span class="o">.</span> <span class="s">&#34;Email address candidates&#34;</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">candidates</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nf">append</span>
           <span class="c1">;; my aliases</span>
           <span class="nv">email-groups</span>
           <span class="c1">;; org-contacts</span>
           <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">contact</span> <span class="nv">in</span> <span class="p">(</span><span class="nv">org-contacts-db</span><span class="p">)</span>
           <span class="nv">collect</span>
           <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nf">format</span>
            <span class="s">&#34;%s %s %s &lt;%s&gt; org-contact&#34;</span>
            <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;FIRSTNAME&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;LASTNAME&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;TAGS&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;EMAIL&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">))))</span>
                 <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;EMAIL&#34;</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">contact</span> <span class="mi">2</span><span class="p">)))))</span>
           <span class="c1">;; mu contacts</span>
           <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">contact</span> <span class="nv">in</span> <span class="nv">mu4e~contacts-for-completion</span>
           <span class="nv">collect</span> <span class="p">(</span><span class="nf">cons</span> <span class="nv">contact</span> <span class="nv">contact</span><span class="p">))))</span>
       <span class="c1">;; only action is to insert string at point.</span>
       <span class="p">(</span><span class="nv">action</span> <span class="o">.</span> <span class="p">((</span><span class="s">&#34;insert&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span>
              <span class="p">(</span><span class="nf">insert</span>
               <span class="p">(</span><span class="nf">mapconcat</span>
                <span class="ss">&#39;identity</span>
                <span class="p">(</span><span class="nv">helm-marked-candidates</span><span class="p">)</span>
                <span class="s">&#34;,&#34;</span><span class="p">))))</span>
            <span class="p">(</span><span class="s">&#34;open&#34;</span> <span class="o">.</span> <span class="nv">org-contacts-open-from-email</span><span class="p">)</span>
            <span class="p">(</span><span class="s">&#34;tag&#34;</span>  <span class="o">.</span> <span class="nv">org-contacts-tag-selection</span><span class="p">)))))))</span>

<span class="c1">;; Finally, let us bind this to something probably convenient. I use c-c ] for</span>
<span class="c1">;; citations. Lets try that in compose mode.</span>
<span class="p">(</span><span class="nf">define-key</span> <span class="nv">mu4e-compose-mode-map</span> <span class="s">&#34;\C-c]&#34;</span> <span class="ss">&#39;j-insert-emails</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (require &#39;org-mu4e)</span>
<span class="c1">;; ;; (require &#39;org-mime)</span>

<span class="c1">;; ;; Use org-mode(mine) to html</span>
<span class="c1">;; (defun mu4e-toggle-org-mode ()</span>
<span class="c1">;;   (interactive)</span>
<span class="c1">;;   (cond</span>
<span class="c1">;;    ((eq major-mode &#39;mu4e-view-mode) (mu4e-org-mode))</span>
<span class="c1">;;    ((eq major-mode &#39;mu4e-org-mode) (mu4e-view-mode))</span>
<span class="c1">;;    ((eq major-mode &#39;mu4e-compose-mode) (org-mu4e-compose-org-mode))</span>
<span class="c1">;;    ((eq major-mode &#39;org-mu4e-compose-org-mode) (mu4e-compose-mode))))</span>


<span class="c1">;; (with-eval-after-load &#39;mu4e-view</span>
<span class="c1">;;   (spacemacs/set-leader-keys-for-major-mode &#39;mu4e-view-mode</span>
<span class="c1">;;     &#34;to&#34; &#39;mu4e-toggle-org-mode))</span>


<span class="c1">;; (with-eval-after-load &#39;mu4e-utils</span>
<span class="c1">;;   (spacemacs/set-leader-keys-for-major-mode &#39;mu4e-org-mode</span>
<span class="c1">;;     &#34;to&#34; &#39;mu4e-toggle-org-mode))</span>

<span class="c1">;; (with-eval-after-load &#39;mu4e-compose</span>
<span class="c1">;;   (spacemacs/set-leader-keys-for-major-mode &#39;mu4e-compose-mode &#34;to&#34; &#39;mu4e-toggle-org-mode))</span>


<span class="c1">;; (with-eval-after-load &#39;org-mu4e</span>
<span class="c1">;;   (setq org-mu4e-convert-to-html t)</span>
<span class="c1">;;   (spacemacs/set-leader-keys-for-major-mode &#39;org-mu4e-compose-org-mode &#34;to&#34; &#39;mu4e-toggle-org-mode)</span>
<span class="c1">;;   (defun org~mu4e-mime-convert-to-html ()</span>
<span class="c1">;;     &#34;Convert the current body to html.&#34;</span>
<span class="c1">;;     (unless (fboundp &#39;org-export-string-as)</span>
<span class="c1">;;       (mu4e-error &#34;require function &#39;org-export-string-as not found.&#34;))</span>
<span class="c1">;;     (let* ((begin</span>
<span class="c1">;;             (save-excursion</span>
<span class="c1">;;               (goto-char (point-min))</span>
<span class="c1">;;               (search-forward mail-header-separator)))</span>
<span class="c1">;;            (end (point-max))</span>
<span class="c1">;;            (raw-body (buffer-substring begin end))</span>
<span class="c1">;;            (tmp-file (make-temp-name (expand-file-name &#34;mail&#34;</span>
<span class="c1">;;                                                        temporary-file-directory)))</span>
<span class="c1">;;            (org-export-skip-text-before-1st-heading nil)</span>
<span class="c1">;;            (org-export-htmlize-output-type &#39;inline-css)</span>
<span class="c1">;;            (org-export-preserve-breaks t)</span>
<span class="c1">;;            (org-export-with-LaTeX-fragments</span>
<span class="c1">;;             (if (executable-find &#34;dvipng&#34;) &#39;dvipng</span>
<span class="c1">;;               (mu4e-message &#34;Cannot find dvipng, ignore inline LaTeX&#34;) nil))</span>
<span class="c1">;;            (html-and-images</span>
<span class="c1">;;             (org~mu4e-mime-replace-images</span>
<span class="c1">;;              (org-export-string-as raw-body &#39;html nil)</span>
<span class="c1">;;              tmp-file))</span>
<span class="c1">;;            (html-images (cdr html-and-images))</span>
<span class="c1">;;            (html (car html-and-images)))</span>
<span class="c1">;;       (delete-region begin end)</span>
<span class="c1">;;       (save-excursion</span>
<span class="c1">;;         (goto-char begin)</span>
<span class="c1">;;         (newline)</span>
<span class="c1">;;         (insert (org~mu4e-mime-multipart</span>
<span class="c1">;;                  raw-body html (mapconcat &#39;identity html-images &#34;\n&#34;)))))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="magit"><span class="section-num">3.9</span> Magit</h3>

<h4 id="magit-auto-complete"><span class="section-num">3.9.1</span> Magit auto complete</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">my/dabbrev-friend-buffer</span> <span class="p">(</span><span class="nf">other-buffer</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">cond</span> <span class="p">(</span> <span class="c1">;; ignore very large files</span>
         <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">buffer-size</span> <span class="nf">other-buffer</span><span class="p">)</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))</span>
         <span class="no">nil</span><span class="p">)</span>
        <span class="p">(</span> <span class="c1">;; doing a magit commit - use the magit status buffer</span>
         <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">boundp</span> <span class="nv">git-commit-mode</span><span class="p">)</span> <span class="nv">git-commit-mode</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">with-current-buffer</span> <span class="nf">other-buffer</span>
           <span class="p">(</span><span class="nf">eq</span> <span class="nv">major-mode</span> <span class="ss">&#39;magit-status-mode</span><span class="p">)))</span>
        <span class="p">(</span> <span class="c1">;; in projectile project - use projectile buffers</span>
         <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="nf">other-buffer</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nv">file-remote-p</span> <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="nf">other-buffer</span><span class="p">)))</span>
              <span class="p">(</span><span class="nv">projectile-project-p</span><span class="p">))</span>
         <span class="p">(</span><span class="nv">string=</span> <span class="p">(</span><span class="nv">projectile-project-name</span><span class="p">)</span>
                  <span class="p">(</span><span class="nb">with-current-buffer</span> <span class="nf">other-buffer</span>
                    <span class="p">(</span><span class="nv">projectile-project-name</span><span class="p">))))</span>
        <span class="p">(</span><span class="no">t</span> <span class="c1">;; fallback - same mod</span>
         <span class="p">(</span><span class="nv">dabbrev--same-major-mode-p</span> <span class="nf">other-buffer</span><span class="p">))))</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;text-mode-hook</span> <span class="ss">&#39;company-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;text-mode-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;company-backends</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">company-files</span> <span class="nv">company-en-words</span> <span class="nv">company-dabbrev</span><span class="p">)))</span>
          <span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="basic-setup"><span class="section-num">4</span> Basic setup</h2>

<p>Some basic customizaton</p>

<p>In emacs, we can use <code>M-x</code> to execute interactive commands, I
implement some of them to make my emacs more easy to use.</p>

<h3 id="personal-information-setup"><span class="section-num">4.1</span> Personal information setup</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nf">user-full-name</span> <span class="s">&#34;lengyuyang&#34;</span>
      <span class="nv">user-mail-address</span> <span class="s">&#34;maoxiaoweihl@gmail.com&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="don-t-ask-me-when-kill-process-buffer"><span class="section-num">4.2</span> Don&rsquo;t ask me when kill process buffer</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">kill-buffer-query-functions</span>
      <span class="p">(</span><span class="nv">remq</span> <span class="ss">&#39;process-kill-buffer-query-function</span>
            <span class="nv">kill-buffer-query-functions</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="set-the-chinese-font-alignment"><span class="section-num">4.3</span> Set the chinese font alignment</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">if</span> <span class="nf">window-system</span>
    <span class="c1">;; (spacemacs//set-monospaced-font &#34;Inconsolata&#34; &#34;Source Han Sans CN&#34; 16 20)</span>
    <span class="c1">;; (spacemacs//set-monospaced-font &#34;Fira Mono&#34; &#34;Source Han Sans CN&#34; 16 20)</span>
    <span class="p">(</span><span class="nv">spacemacs//set-monospaced-font</span> <span class="s">&#34;Fira Mono&#34;</span> <span class="s">&#34;Wenquanyi Micro Hei&#34;</span> <span class="mi">16</span> <span class="mi">20</span><span class="p">)</span>
  <span class="c1">;; (spacemacs//set-monospaced-font &#34;DejaVu Sans Mono&#34; &#34;Source Han Sans CN&#34; 16 20)</span>
    <span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="add-auto-format-paste-code"><span class="section-num">4.4</span> Add auto format paste code</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">command</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">yank</span> <span class="nv">yank-pop</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">eval</span>
   <span class="o">`</span><span class="p">(</span><span class="nb">defadvice</span> <span class="o">,</span><span class="nv">command</span> <span class="p">(</span><span class="nv">after</span> <span class="nv">indent-region</span> <span class="nv">activate</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">not</span> <span class="nv">current-prefix-arg</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">member</span> <span class="nv">major-mode</span>
                   <span class="o">&#39;</span><span class="p">(</span><span class="nv">emacs-lisp-mode</span>
                     <span class="nv">lisp-mode</span>
                     <span class="nv">clojure-mode</span>
                     <span class="nv">scheme-mode</span>
                     <span class="nv">haskell-mode</span>
                     <span class="nv">ruby-mode</span>
                     <span class="nv">rspec-mode</span>
                     <span class="nv">python-mode</span>
                     <span class="nv">c-mode</span>
                     <span class="nv">c++-mode</span>
                     <span class="nv">objc-mode</span>
                     <span class="nv">latex-mode</span>
                     <span class="nv">js-mode</span>
                     <span class="nv">plain-tex-mode</span><span class="p">))</span>
           <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">mark-even-if-inactive</span> <span class="nv">transient-mark-mode</span><span class="p">))</span>
             <span class="p">(</span><span class="nv">indent-region</span> <span class="p">(</span><span class="nf">region-beginning</span><span class="p">)</span> <span class="p">(</span><span class="nf">region-end</span><span class="p">)</span> <span class="no">nil</span><span class="p">))))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="simple-better-defaults"><span class="section-num">4.5</span> Simple better defaults</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-prettify-symbols-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">;; (setq-default fill-column 80)</span>
<span class="p">(</span><span class="nb">defadvice</span> <span class="nv">find-file</span> <span class="p">(</span><span class="nv">before</span> <span class="nv">make-directory-maybe</span>
                             <span class="p">(</span><span class="nv">filename</span> <span class="kp">&amp;optional</span> <span class="nv">wildcards</span><span class="p">)</span> <span class="nv">activate</span><span class="p">)</span>
  <span class="s">&#34;Create parent directory if not exists while visiting file.&#34;</span>
  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">filename</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">dir</span> <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">filename</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">when</span> <span class="nv">dir</span>
        <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">dir</span><span class="p">)</span>
          <span class="p">(</span><span class="nv">make-directory</span> <span class="nv">dir</span> <span class="no">t</span><span class="p">))))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="large-file-handle"><span class="section-num">4.6</span> Large file handle</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">large-file-warning-threshold</span> <span class="mi">300000000</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">spacemacs/check-large-file</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">buffer-size</span><span class="p">)</span> <span class="mi">50000000</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">progn</span> <span class="p">(</span><span class="nv">fundamental-mode</span><span class="p">)</span>
           <span class="p">(</span><span class="nv">hl-line-mode</span> <span class="mi">-1</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">executable-find</span> <span class="s">&#34;wc&#34;</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">string-to-number</span> <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;wc -l %s&#34;</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))))</span>
              <span class="mi">5000</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">linum-mode</span> <span class="mi">-1</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;find-file-hook</span> <span class="ss">&#39;spacemacs/check-large-file</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="buffers"><span class="section-num">4.7</span> Buffers</h3>

<h4 id="indent-whole-buffer"><span class="section-num">4.7.1</span> Indent whole buffer</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">indent-whole-buffer</span> <span class="p">()</span>
  <span class="s">&#34;Indent whole buffer.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">save-excursion</span>
    <span class="p">(</span><span class="nv">indent-region</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="quick-folding-source-block"><span class="section-num">4.7.2</span> Quick folding source block</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">quick-folding-source</span> <span class="p">()</span>
  <span class="s">&#34;Use emacs buildin easy to folding code.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-selective-display</span>
   <span class="p">(</span><span class="nb">if</span> <span class="nv">selective-display</span> <span class="no">nil</span> <span class="mi">1</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="edit--insert-remove"><span class="section-num">4.8</span> Edit (Insert/Remove)</h3>

<h4 id="insert-u200b-char"><span class="section-num">4.8.1</span> Insert U200B char</h4>

<p><code>&lt;U200B&gt;</code> character is a <code>zero width space character</code> which is nice to
use under org-mode.</p>

<p>For more info, please see: <a href="https://lists.gnu.org/archive/html/emacs-orgmode/2012-09/msg00155.html">suggestion for org-emphasis-regexp-components: *U*nited *N*ations</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">insert-U200B-char</span> <span class="p">()</span>
  <span class="s">&#34;Insert &lt;U200B&gt; char, this character is nice use in org-mode.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;\ufeff&#34;</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="insert-empty-line-after-current-line"><span class="section-num">4.8.2</span> Insert empty line after current line</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">insert-empty-line</span> <span class="p">()</span>
  <span class="s">&#34;Insert an empty line after current line and position cursor on newline.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">move-end-of-line</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">open-line</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">next-line</span> <span class="mi">1</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="file-handle"><span class="section-num">4.9</span> File Handle</h3>

<h4 id="reopen-file-as-root"><span class="section-num">4.9.1</span> Reopen file as root</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">file-reopen-as-root</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nf">buffer-file-name</span>
    <span class="p">(</span><span class="nv">find-alternate-file</span>
     <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;/sudo:root@localhost:&#34;</span>
             <span class="nf">buffer-file-name</span><span class="p">))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="delete-current-buffer-file"><span class="section-num">4.9.2</span> Delete current buffer file</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">delete-current-buffer-file</span> <span class="p">()</span>
  <span class="s">&#34;Removes file connected to current buffer and kills buffer.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">filename</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">buffer</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">name</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nb">and</span> <span class="nv">filename</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">filename</span><span class="p">)))</span>
        <span class="p">(</span><span class="nv">ido-kill-buffer</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">yes-or-no-p</span> <span class="s">&#34;Are you sure you want to remove this file? &#34;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">delete-file</span> <span class="nv">filename</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">kill-buffer</span> <span class="nv">buffer</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;File &#39;%s&#39; successfully removed&#34;</span> <span class="nv">filename</span><span class="p">)))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="rename-current-buffer-and-file"><span class="section-num">4.9.3</span> Rename current Buffer and file</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">rename-current-buffer-file</span> <span class="p">()</span>
  <span class="s">&#34;Renames current buffer and file it is visiting.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">name</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">filename</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nb">and</span> <span class="nv">filename</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">filename</span><span class="p">)))</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;Buffer &#39;%s&#39; is not visiting a file!&#34;</span> <span class="nv">name</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">new-name</span> <span class="p">(</span><span class="nv">read-file-name</span> <span class="s">&#34;New name: &#34;</span> <span class="nv">filename</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">get-buffer</span> <span class="nv">new-name</span><span class="p">)</span>
            <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;A buffer named &#39;%s&#39; already exists!&#34;</span> <span class="nv">new-name</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">rename-file</span> <span class="nv">filename</span> <span class="nv">new-name</span> <span class="mi">1</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">rename-buffer</span> <span class="nv">new-name</span><span class="p">)</span>
          <span class="p">(</span><span class="nv">set-visited-file-name</span> <span class="nv">new-name</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">set-buffer-modified-p</span> <span class="no">nil</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;File &#39;%s&#39; successfully renamed to &#39;%s&#39;&#34;</span>
                   <span class="nv">name</span> <span class="p">(</span><span class="nf">file-name-nondirectory</span> <span class="nv">new-name</span><span class="p">)))))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="add-executable-attribute-to-file"><span class="section-num">4.9.4</span> Add executable attribute to file</h4>

<p>Actually this command is the same as <code>chmod +x</code> but it doesn&rsquo;t use any shell
command, it use emacs&rsquo;s logior function to change file attribute.</p>

<p>I only make <code>owener</code> can has executable permission, not change it for gourp or
others user.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">set-file-executable</span><span class="p">()</span>
  <span class="s">&#34;Add executable permissions on current file.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">set-file-modes</span> <span class="nf">buffer-file-name</span>
                    <span class="p">(</span><span class="nf">logior</span> <span class="p">(</span><span class="nf">file-modes</span> <span class="nf">buffer-file-name</span><span class="p">)</span> <span class="mo">#o100</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">message</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;Made &#34;</span> <span class="nf">buffer-file-name</span> <span class="s">&#34; executable&#34;</span><span class="p">))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="clone-current-file-to-new-one"><span class="section-num">4.9.5</span> Clone current file to new one</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">clone-file-and-open</span> <span class="p">(</span><span class="nv">filename</span><span class="p">)</span>
  <span class="s">&#34;Clone the current buffer writing it into FILENAME and open it&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;FClone to file: &#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">save-restriction</span>
    <span class="p">(</span><span class="nf">widen</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">write-region</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">)</span> <span class="nv">filename</span> <span class="no">nil</span> <span class="no">nil</span> <span class="no">nil</span> <span class="ss">&#39;confirm</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">find-file</span> <span class="nv">filename</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="keeping-files-in-sync"><span class="section-num">4.10</span> Keeping files in sync</h3>

<p>By default, Emacs will not update the contents of open buffers when a file
changes on disk. This is inconvenient when switching branches in Git - as you’d
risk editing stale buffers.</p>

<p>This problem can be solved by:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-auto-revert-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">global-auto-revert-non-file-buffers</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-revert-verbose</span> <span class="no">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">revert-without-query</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;.*&#34;</span><span class="p">))</span> <span class="c1">;; disable revert query</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="snippet-handle-by-yasnippet"><span class="section-num">4.11</span> Snippet handle by yasnippet</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">req-package</span> <span class="nv">yasnippet</span>
  <span class="nb">:init</span> <span class="p">(</span><span class="nv">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>
  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;emacs.+/snippets/&#34;</span> <span class="o">.</span> <span class="nv">snippet-mode</span><span class="p">)</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">progn</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">yas/prompt-functions</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">yas-dropdown-prompt</span>
                                 <span class="nv">yas-completing-prompt</span>
                                 <span class="nv">yas-ido-prompt</span><span class="p">))</span>

    <span class="p">(</span><span class="nb">setq</span> <span class="nv">yas/snippet-dirs</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&#34;snippets&#34;</span><span class="p">))))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="implement-org-mode-s-easy-template-like-function"><span class="section-num">4.11.1</span> Implement org-mode&rsquo;s easy-template like function</h4>

<p>I really like org-mode&rsquo;s <code>easy-template</code> function, so I implement one called
<code>major-mode-expand</code> which will let you use easy-template like function in any
major-mode.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;yasnippet</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nb">progn</span>
     <span class="p">(</span><span class="nb">defadvice</span> <span class="nv">yas-expand</span> <span class="p">(</span><span class="nv">around</span> <span class="nv">major-mode-expand</span> <span class="nv">activate</span><span class="p">)</span>
       <span class="s">&#34;Try to complete a structure template before point like org-mode does.
</span><span class="s">  This looks for strings like \&#34;&lt;e\&#34; on an otherwise empty line and
</span><span class="s">  expands them.
</span><span class="s">  Before use this function, you must setup </span><span class="ss">`major-mode-name&#39;</span><span class="s">-expand-alist variable.
</span><span class="s">
</span><span class="s">  Take emacs-lisp-mode as example, if you wand to use &lt;r to expand your snippet </span><span class="ss">`require&#39;</span><span class="s">
</span><span class="s">  in yasnippet, you muse setup the emacs-lisp-mode-expand-alist variable.
</span><span class="s">
</span><span class="s">   (setq emacs-lisp-expand-alist &#39;((\&#34;r\&#34; . \&#34;require\&#34;)))&#34;</span>
       <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">l</span> <span class="p">(</span><span class="nf">buffer-substring</span> <span class="p">(</span><span class="nv">point-at-bol</span><span class="p">)</span> <span class="p">(</span><span class="nf">point</span><span class="p">)))</span>
              <span class="p">(</span><span class="nv">expand-symbol</span> <span class="p">(</span><span class="nf">intern</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">symbol-name</span> <span class="nv">major-mode</span><span class="p">)</span> <span class="s">&#34;-expand-alist&#34;</span><span class="p">)))</span>
              <span class="p">(</span><span class="nv">expand-alist</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">boundp</span> <span class="nv">expand-symbol</span><span class="p">)</span> <span class="p">(</span><span class="nf">symbol-value</span> <span class="nv">expand-symbol</span><span class="p">)</span> <span class="no">nil</span><span class="p">))</span>
              <span class="nv">a</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">looking-at</span> <span class="s">&#34;[ \t]*$&#34;</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;^[ \t]*&lt;\\([a-zA-Z]+\\)$&#34;</span> <span class="nv">l</span><span class="p">)</span>
                    <span class="p">(</span><span class="nb">setq</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">assoc</span> <span class="p">(</span><span class="nv">match-string</span> <span class="mi">1</span> <span class="nv">l</span><span class="p">)</span> <span class="nv">expand-alist</span><span class="p">)))</span>
           <span class="p">(</span><span class="nv">backward-delete-char</span> <span class="p">(</span><span class="nf">1+</span> <span class="p">(</span><span class="nf">length</span> <span class="p">(</span><span class="nf">car-safe</span> <span class="nv">a</span><span class="p">))))</span>
           <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">symbolp</span> <span class="p">(</span><span class="nf">cdr-safe</span> <span class="nv">a</span><span class="p">))</span>
               <span class="p">(</span><span class="nf">funcall</span> <span class="p">(</span><span class="nf">cdr-safe</span> <span class="nv">a</span><span class="p">))</span>
             <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">cdr-safe</span> <span class="nv">a</span><span class="p">)))</span>
           <span class="no">t</span><span class="p">)</span>
         <span class="nv">ad-do-it</span><span class="p">))</span>
     <span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<p>Take emacs-lisp-mode as example, if I want to use <code>&lt;r</code> and press <code>TAB</code>
then yasnippet will expand the command, just add following code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">emacs-lisp-mode-expand-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;r&#34;</span> <span class="o">.</span> <span class="s">&#34;require&#34;</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<p>For c-mode, just do the same but change the relative
<strong>major-mode-expand-alist</strong> like following</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">c-mode-expand-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;i&#34;</span> <span class="o">.</span> <span class="s">&#34;include&#34;</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="debug"><span class="section-num">4.12</span> Debug</h3>

<h4 id="eval-emacs-buffer-until-error"><span class="section-num">4.12.1</span> Eval emacs buffer until error</h4>

<p>A really nice command help me to find error on elisp buffer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">eval-buffer-until-error</span> <span class="p">()</span>
  <span class="s">&#34;Evaluate emacs buffer until error occured.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">while</span> <span class="no">t</span> <span class="p">(</span><span class="nf">eval</span> <span class="p">(</span><span class="nf">read</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">)))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="emacs-socks-proxy"><span class="section-num">4.13</span> Emacs socks proxy</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (setq url-gateway-method &#39;socks)</span>
<span class="c1">;; (setq socks-server &#39;(&#34;Default server&#34; &#34;127.0.0.1&#34; 1080 5))</span>
<span class="p">(</span><span class="nb">defcustom</span> <span class="nv">my-proxy</span> <span class="s">&#34;127.0.0.1:8118&#34;</span>
  <span class="s">&#34;Set network proxy.&#34;</span>
  <span class="nb">:type</span> <span class="ss">&#39;string</span><span class="p">)</span>
<span class="c1">;; Configure network proxy</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">show-proxy</span> <span class="p">()</span>
  <span class="s">&#34;Show http/https proxy.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">if</span> <span class="nv">url-proxy-services</span>
      <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Current proxy is \&#34;%s\&#34;&#34;</span> <span class="nv">my-proxy</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;No proxy&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">set-proxy</span> <span class="p">()</span>
  <span class="s">&#34;Set http/https proxy.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">url-proxy-services</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;http&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">my-proxy</span><span class="p">)</span>
                             <span class="p">(</span><span class="s">&#34;https&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">my-proxy</span><span class="p">)))</span>
  <span class="p">(</span><span class="nv">show-proxy</span><span class="p">))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">unset-proxy</span> <span class="p">()</span>
  <span class="s">&#34;Unset http/https proxy.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">url-proxy-services</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">show-proxy</span><span class="p">))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">toggle-proxy</span> <span class="p">()</span>
  <span class="s">&#34;Toggle http/https proxy.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">if</span> <span class="nv">url-proxy-services</span>
      <span class="p">(</span><span class="nv">unset-proxy</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">set-proxy</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="highlight"><span class="section-num">4.14</span> Highlight</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/ov-highlighter&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ov-highlighter</span><span class="p">)</span>
<span class="c1">;; (use-package ov-highlighter</span>
<span class="c1">;;   :config</span>
<span class="c1">;;   (progn</span>
<span class="c1">;;     (setq ov-highlight-disable-save t)</span>
<span class="c1">;;     ;; Gruvbox scheme</span>
<span class="c1">;;     (ov-make-highlight &#34;red&#34; &#39;(:background &#34;#9d0006&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;green&#34; &#39;(:background &#34;#79740e&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;yellow&#34; &#39;(:background &#34;#b57614&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;blue&#34; &#39;(:background &#34;#076678&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;purple&#34; &#39;(:background &#34;#8f3f71&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;aqua&#34; &#39;(:background &#34;#427b58&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;orange&#34; &#39;(:background &#34;#af3a03&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;red-fg&#34; &#39;(:foreground &#34;red&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;green-fg&#34; &#39;(:foreground &#34;green&#34;))</span>
<span class="c1">;;     (ov-make-highlight &#34;blue-fg&#34; &#39;(:foreground &#34;blue&#34;))</span>
<span class="c1">;;     (defhydra yxl-ov-highlighter (:hint nil :color blue)</span>
<span class="c1">;;       (&#34;r&#34; ov-highlight-red)</span>
<span class="c1">;;       (&#34;g&#34; ov-highlight-green)</span>
<span class="c1">;;       (&#34;y&#34; ov-highlight-yellow)</span>
<span class="c1">;;       (&#34;b&#34; ov-highlight-blue)</span>
<span class="c1">;;       (&#34;p&#34; ov-highlight-purple)</span>
<span class="c1">;;       (&#34;a&#34; ov-highlight-aqua)</span>
<span class="c1">;;       (&#34;o&#34; ov-highlight-orange)</span>

<span class="c1">;;       (&#34;c&#34; ov-highlight-color)</span>
<span class="c1">;;       (&#34;f&#34; ov-highlight-foreground)</span>

<span class="c1">;;       (&#34;[&#34; ov-highlight-decrease-font-size :color red)</span>
<span class="c1">;;       (&#34;]&#34; ov-highlight-increase-font-size :color red)</span>
<span class="c1">;;       (&#34;F&#34; ov-highlight-font)</span>

<span class="c1">;;       (&#34;B&#34; ov-highlight-bold)</span>
<span class="c1">;;       (&#34;I&#34; ov-highlight-italic)</span>
<span class="c1">;;       (&#34;U&#34; ov-highlight-underline)</span>
<span class="c1">;;       (&#34;S&#34; ov-highlight-strikethrough)</span>
<span class="c1">;;       (&#34;X&#34; ov-highlight-box)</span>

<span class="c1">;;       (&#34;k&#34; ov-highlight-clear)</span>
<span class="c1">;;       (&#34;K&#34; ov-highlight-clear-all)</span>
<span class="c1">;;       (&#34;q&#34; nil &#34;quit&#34;))))</span>
<span class="p">(</span><span class="nv">ov-make-highlight</span> <span class="s">&#34;green-fg&#34;</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">ov-make-highlight</span> <span class="s">&#34;blue-fg&#34;</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;blue&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;ov&#34;</span> <span class="s">&#34;ov-highlighter&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ovo&#34;</span> <span class="ss">&#39;ov-highlighter/body</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ovr&#34;</span> <span class="ss">&#39;ov-highlight-red-fg</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ovb&#34;</span> <span class="ss">&#39;ov-highlight-blue-fg</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ovg&#34;</span> <span class="ss">&#39;ov-highlight-green-fg</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ovc&#34;</span> <span class="ss">&#39;ov-highlight-clear</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="org-mode-configuration"><span class="section-num">5</span> Org-mode configuration</h2>

<p>This part is the customization to org-mode.</p>

<h3 id="better-defaults-to-org"><span class="section-num">5.1</span> Better defaults to org</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"> <span class="c1">;; (add-to-list &#39;auto-mode-alist &#39;(&#34;\\.\\(org\\|org_archive\\|txt\\)$&#34; . org-mode))</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-habit</span><span class="p">)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-startup-indented</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-mode-my-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">org-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;×&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;*&#34;</span><span class="p">))</span>
  <span class="c1">;;(define-key org-mode-map (kbd &#34;－&#34;) (kbd &#34;-&#34;))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">org-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;（&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;(&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">org-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;）&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;)&#34;</span><span class="p">))</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;org-mode-my-init</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;smartparens-strict-mode</span><span class="p">)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-startup-with-inline-images</span> <span class="no">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-image-actual-width</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">(</span><span class="mi">600</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-format-latex-options</span> <span class="p">(</span><span class="nf">plist-put</span> <span class="nv">org-format-latex-options</span> <span class="nb">:scale</span> <span class="mf">2.0</span><span class="p">))</span>

<span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/ox-ipynb&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ox-ipynb</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;turn-off-auto-fill</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-latex-configuration"><span class="section-num">5.2</span> Org latex configuration</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (add-to-load-path &#34;~/.spacemacs.d/package/org-edit-latex&#34;)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-edit-latex</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;org-edit-latex-mode</span><span class="p">)</span>

<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;ou&#34;</span> <span class="s">&#34;Org-latex&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ouu&#34;</span> <span class="ss">&#39;org-toggle-latex-fragment</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oui&#34;</span> <span class="ss">&#39;org-edit-special</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ouo&#34;</span> <span class="ss">&#39;org-preview-latex-fragment</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-mode-auto-complete"><span class="section-num">5.3</span> Org-mode auto complete</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">company-math</span>
  <span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">company-auctex</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:config</span> <span class="p">(</span><span class="nb">progn</span>
            <span class="p">(</span><span class="nb">defun</span> <span class="nv">company-auctex-labels</span> <span class="p">(</span><span class="nv">command</span> <span class="kp">&amp;optional</span> <span class="nv">arg</span> <span class="kp">&amp;rest</span> <span class="nv">ignored</span><span class="p">)</span>
              <span class="s">&#34;company-auctex-labels backend&#34;</span>
              <span class="p">(</span><span class="nb">interactive</span> <span class="p">(</span><span class="nf">list</span> <span class="ss">&#39;interactive</span><span class="p">))</span>
              <span class="p">(</span><span class="nb">case</span> <span class="nv">command</span>
                <span class="p">(</span><span class="nb">interactive</span> <span class="p">(</span><span class="nv">company-begin-backend</span> <span class="ss">&#39;company-auctex-labels</span><span class="p">))</span>
                <span class="p">(</span><span class="nv">prefix</span> <span class="p">(</span><span class="nv">company-auctex-prefix</span> <span class="s">&#34;\\\\.*ref{\\([^}]*\\)\\=&#34;</span><span class="p">))</span>
                <span class="p">(</span><span class="nv">candidates</span> <span class="p">(</span><span class="nv">company-auctex-label-candidates</span> <span class="nv">arg</span><span class="p">))))</span>

            <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;company-backends</span>
                         <span class="o">&#39;</span><span class="p">(</span><span class="nv">company-auctex-macros</span>
                           <span class="nv">company-auctex-environments</span>
                           <span class="nv">company-math-symbols-unicode</span>
                           <span class="nv">company-math-symbols-latex</span><span class="p">))</span>

            <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;company-backends</span> <span class="nf">#&#39;</span><span class="nv">company-auctex-labels</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;company-backends</span> <span class="nf">#&#39;</span><span class="nv">company-auctex-bibs</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">load</span> <span class="s">&#34;~/.spacemacs.d/package/emacscompanywords/company-words-discn&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;company-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span>
          <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;company-backends</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">company-math-symbols-unicode</span> <span class="nv">company-math-symbols-latex</span> <span class="nv">company-files</span> <span class="nv">company-en-words</span> <span class="nv">company-dabbrev</span><span class="p">)))</span>
          <span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-agenda-font-size"><span class="section-num">5.4</span> Org-agenda font size</h3>

<p>Changed the org-agenda font size with the below link methods
<a href="https://emacs-china.org/t/agenda-view/1392">https://emacs-china.org/t/agenda-view/1392</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">custom-set-faces</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-done</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#86dc2f&#34;</span> <span class="nb">:height</span> <span class="mf">1.0</span><span class="p">)))))</span>

<span class="p">(</span><span class="nv">custom-set-faces</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-scheduled-today</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#bc6ec5&#34;</span> <span class="nb">:height</span> <span class="mf">1.0</span><span class="p">)))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="extend-org-mode-s-easy-templates"><span class="section-num">5.5</span> Extend org-mode&rsquo;s easy templates</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;org</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nb">progn</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span>
                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;el&#34;</span> <span class="s">&#34;#+BEGIN_SRC emacs-lisp\n\n?\n\n #+END_SRC&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span>
                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;sh&#34;</span> <span class="s">&#34;#+BEGIN_SRC sh\n\n?\n\n #+END_SRC&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span>
                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;pl&#34;</span> <span class="s">&#34;#+BEGIN_SRC :file \n\n?\n\n #+END_SRC&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span>
                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;ipa&#34;</span> <span class="s">&#34;#+BEGIN_SRC ipython :session :exports both :results output \n\n?\n\n #+END_SRC&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-structure-template-alist</span>
                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;ipb&#34;</span> <span class="s">&#34;#+BEGIN_SRC ipython :session :exports both :file \n\n?\n\n#+END_SRC&#34;</span><span class="p">))</span>
    <span class="c1">;; (add-to-list &#39;org-structure-template-alist</span>
    <span class="c1">;;              &#39;(&#34;p&#34; &#34;#+BEGIN_SRC plantuml :file uml.png \n\n?\n\n#+END_SRC&#34;))</span>
    <span class="c1">;; (add-to-list &#39;org-structure-template-alist</span>
    <span class="c1">;;              &#39;(&#34;p&#34; &#34;#+BEGIN_SRC plantuml :file uml.png \n\n?\n\n#+END_SRC&#34;))</span>
    <span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-columns-and-properties"><span class="section-num">5.6</span> Org columns and properties</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;org</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nb">progn</span>
     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-columns-default-format</span> <span class="s">&#34;%50ITEM(Task) %CATEGORY %SCHEDULED %5Effort %5CLOCKSUM %PRIORITY&#34;</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-global-properties</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">((</span><span class="s">&#34;Effort_ALL&#34;</span> <span class="o">.</span> <span class="s">&#34;0:15 0:30 0:45 1:00 2:00 3:00 4:00 5:00 6:00 0:00&#34;</span><span class="p">)</span>
                                         <span class="p">(</span><span class="s">&#34;STYLE_ALL&#34;</span> <span class="o">.</span> <span class="s">&#34;habit&#34;</span><span class="p">))))</span>
     <span class="p">)</span>
  <span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-ispell"><span class="section-num">5.7</span> Org-ispell</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/org-ispell</span> <span class="p">()</span>
  <span class="s">&#34;Configure </span><span class="ss">`ispell-skip-region-alist&#39;</span><span class="s"> for </span><span class="ss">`org-mode&#39;</span><span class="s">.&#34;</span>
  <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;ispell-skip-region-alist</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;ispell-skip-region-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-property-drawer-re</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;ispell-skip-region-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~&#34;</span> <span class="s">&#34;~&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;ispell-skip-region-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;=&#34;</span> <span class="s">&#34;=&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;ispell-skip-region-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;^#\\+BEGIN_SRC&#34;</span> <span class="o">.</span> <span class="s">&#34;^#\\+END_SRC&#34;</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">lengyueyang/org-ispell</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-notify"><span class="section-num">5.8</span> Org-notify</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-notify</span><span class="p">)</span>
<span class="p">(</span><span class="nv">org-notify-start</span><span class="p">)</span>
<span class="p">(</span><span class="nv">org-notify-add</span> <span class="ss">&#39;appt</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;-1s&#34;</span> <span class="nb">:period</span> <span class="s">&#34;20s&#34;</span> <span class="nb">:duration</span> <span class="mi">10</span>
                        <span class="nb">:actions</span> <span class="p">(</span><span class="nv">-message</span> <span class="nv">-ding</span><span class="p">))</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;15m&#34;</span> <span class="nb">:period</span> <span class="s">&#34;2m&#34;</span> <span class="nb">:duration</span> <span class="mi">100</span>
                        <span class="nb">:actions</span> <span class="nv">-notify</span><span class="p">)</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;2h&#34;</span> <span class="nb">:period</span> <span class="s">&#34;10m&#34;</span> <span class="nb">:actions</span> <span class="nv">-message</span><span class="p">)</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;3d&#34;</span> <span class="nb">:period</span> <span class="s">&#34;12h&#34;</span> <span class="nb">:actions</span> <span class="nv">-message</span><span class="p">)</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;7d&#34;</span> <span class="nb">:period</span> <span class="s">&#34;24h&#34;</span> <span class="nb">:actions</span> <span class="nv">-message</span><span class="p">)</span>
                <span class="o">&#39;</span><span class="p">(</span><span class="nb">:time</span> <span class="s">&#34;30d&#34;</span> <span class="nb">:actions</span> <span class="nv">-email</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-pomodoro"><span class="section-num">5.9</span> Org-pomodoro</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; [[https://www.reddit.com/r/emacs/comments/5ayjjl/pomodoro_in_emacs/][Pomodoro in Emacs : emacs]]</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-pomodoro</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:commands</span> <span class="p">(</span><span class="nv">org-pomodoro</span><span class="p">)</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">alert-user-configuration</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">((((</span><span class="nb">:category</span> <span class="o">.</span> <span class="s">&#34;org-pomodoro&#34;</span><span class="p">))</span> <span class="nv">libnotify</span> <span class="no">nil</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-pomodoro-length</span> <span class="mi">50</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-pomodoro-short-break-length</span> <span class="mi">10</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-pomodoro-long-break-length</span> <span class="mi">30</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1">;; (add-hook &#39;org-pomodoro-break-finished-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (interactive)</span>
<span class="c1">;;             (org-pomodoro &#39;(16)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-journal"><span class="section-num">5.10</span> Org-journal</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-journal</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:defer</span> <span class="no">t</span>
  <span class="nb">:custom</span>
  <span class="p">(</span><span class="nv">org-journal-dir</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue/journal/&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-journal-file-type</span> <span class="ss">&#39;monthly</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-journal-file-format</span> <span class="s">&#34;%Y-%m.org&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-journal-time-format</span> <span class="s">&#34;TODO &#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-journal-enable-agenda-integration</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-journal-date-format</span> <span class="s">&#34;%A, %B %d %Y&#34;</span><span class="p">))</span>


<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-journal-date-format-func</span> <span class="p">(</span><span class="nv">time</span><span class="p">)</span>
  <span class="s">&#34;Custom function to insert journal date header,
</span><span class="s">and some custom text on a newly created journal file.&#34;</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">buffer-size</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">insert</span>
     <span class="p">(</span><span class="nb">pcase</span> <span class="nv">org-journal-file-type</span>
       <span class="p">(</span><span class="o">`</span><span class="nv">daily</span> <span class="s">&#34;#+TITLE: Daily Journal&#34;</span><span class="p">)</span>
       <span class="p">(</span><span class="o">`</span><span class="nv">weekly</span> <span class="s">&#34;#+TITLE: Weekly Journal&#34;</span><span class="p">)</span>
       <span class="p">(</span><span class="o">`</span><span class="nv">monthly</span> <span class="s">&#34;#+TITLE: Monthly Journal\n#+AUTHOR: lengyue\n#+FILETAGS: Journal \n\n\n&#34;</span><span class="p">)</span>
       <span class="p">(</span><span class="o">`</span><span class="nv">yearly</span> <span class="s">&#34;#+TITLE: Yearly Journal&#34;</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-journal-date-prefix</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%A, %x&#34;</span> <span class="nv">time</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-journal-date-format</span> <span class="ss">&#39;org-journal-date-format-func</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-journal-find-location</span> <span class="p">()</span>
  <span class="c1">;; Open today&#39;s journal, but specify a non-nil prefix argument in order to</span>
  <span class="c1">;; inhibit inserting the heading; org-capture will insert the heading.</span>
  <span class="p">(</span><span class="nv">org-journal-new-entry</span> <span class="no">t</span><span class="p">)</span>
  <span class="c1">;; Position point on the journal&#39;s top-level heading so that org-capture</span>
  <span class="c1">;; will add the new entry as a child entry.</span>
  <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-agenda-and-capture"><span class="section-num">5.11</span> Org-agenda and capture</h3>

<h4 id="org-agenda"><span class="section-num">5.11.1</span> Org-agenda</h4>

<p>The first agenda configuration, which is not complete.</p>

<p>A complete agenda and capture configuration</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;org</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nb">progn</span>
     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-agenda-files</span> <span class="p">(</span><span class="nb">quote</span> <span class="p">(</span><span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue&#34;</span>
                                    <span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue/journal&#34;</span>
                                    <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue&#34;</span>
                                    <span class="s">&#34;~/MEGA/Baidu-lengyue/Projects&#34;</span>
                                    <span class="s">&#34;~/MEGA/Baidu-lengyue/Personal&#34;</span><span class="p">)))</span>

     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-todo-keywords</span>
           <span class="p">(</span><span class="nb">quote</span> <span class="p">((</span><span class="nv">sequence</span> <span class="s">&#34;TODO(t)&#34;</span> <span class="s">&#34;STARTED(s)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;CANCELLED(c@/!)&#34;</span> <span class="s">&#34;DONE(d!/!)&#34;</span><span class="p">)</span>
                   <span class="p">(</span><span class="nv">sequence</span> <span class="s">&#34;SOMEDAY(S)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;WAITING(w@/!)&#34;</span>  <span class="s">&#34;MEETING(m)&#34;</span> <span class="s">&#34;PHONE(p)&#34;</span><span class="p">)</span>
                   <span class="p">(</span><span class="nv">sequence</span> <span class="s">&#34;REPORT(r)&#34;</span> <span class="s">&#34;BUG(b)&#34;</span> <span class="s">&#34;KNOWNCAUSE(k)&#34;</span> <span class="s">&#34;|&#34;</span> <span class="s">&#34;FIXED(f)&#34;</span><span class="p">)</span>
                   <span class="p">)))</span>

     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-todo-keyword-faces</span>
           <span class="p">(</span><span class="nb">quote</span> <span class="p">(</span>
                   <span class="p">(</span><span class="s">&#34;STARTED&#34;</span> <span class="nb">:foreground</span> <span class="s">&#34;magenta&#34;</span> <span class="nb">:weight</span> <span class="nv">bold</span><span class="p">)</span>
     <span class="c1">;;               (&#34;NEXT&#34; :foreground &#34;blue&#34; :weight bold)</span>
     <span class="c1">;;               (&#34;DONE&#34; :foreground &#34;forest green&#34; :weight bold)</span>
                   <span class="p">(</span><span class="s">&#34;WAITING&#34;</span> <span class="nb">:foreground</span> <span class="s">&#34;red&#34;</span> <span class="nb">:weight</span> <span class="nv">bold</span><span class="p">)</span>
     <span class="c1">;;               (&#34;HOLD&#34; :foreground &#34;magenta&#34; :weight bold)</span>
     <span class="c1">;;               (&#34;CANCELLED&#34; :foreground &#34;forest green&#34; :weight bold)</span>
     <span class="c1">;;               (&#34;MEETING&#34; :foreground &#34;forest green&#34; :weight bold)</span>
                   <span class="c1">;;               (&#34;PHONE&#34; :foreground &#34;forest green&#34; :weight bold)</span>
                   <span class="p">)))</span>

     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-refile-targets</span>
           <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org&#34;</span> <span class="nb">:maxlevel</span> <span class="o">.</span> <span class="mi">1</span><span class="p">)))</span>

     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-log-into-drawer</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-agenda-custom-commands</span>
        <span class="o">&#39;</span><span class="p">(</span>
          <span class="p">(</span><span class="s">&#34;b&#34;</span> <span class="s">&#34;Blog idea&#34;</span> <span class="nv">tags-todo</span> <span class="s">&#34;BLOG&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;s&#34;</span> <span class="s">&#34;Someday&#34;</span> <span class="nv">todo</span> <span class="s">&#34;SOMEDAY&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;S&#34;</span> <span class="s">&#34;Started&#34;</span> <span class="nv">todo</span> <span class="s">&#34;STARTED&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;w&#34;</span> <span class="s">&#34;Waiting&#34;</span> <span class="nv">todo</span> <span class="s">&#34;WAITING&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;d&#34;</span> <span class="o">.</span> <span class="s">&#34; 任务安排 &#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;da&#34;</span> <span class="s">&#34; 重要且紧急的任务 &#34;</span> <span class="nv">tags-todo</span> <span class="s">&#34;+PRIORITY=\&#34;A\&#34;&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;db&#34;</span> <span class="s">&#34; 重要且不紧急的任务 &#34;</span> <span class="nv">tags-todo</span> <span class="s">&#34;+PRIORITY=\&#34;B\&#34;&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;dc&#34;</span> <span class="s">&#34; 不重要且紧急的任务 &#34;</span> <span class="nv">tags-todo</span> <span class="s">&#34;+PRIORITY=\&#34;C\&#34;&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;p&#34;</span> <span class="o">.</span> <span class="s">&#34; 项目安排 &#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;W&#34;</span> <span class="s">&#34;Weekly Review&#34;</span> <span class="nv">tags-todo</span> <span class="s">&#34;PROJECT&#34;</span><span class="p">)</span>
            <span class="p">))</span>
     <span class="p">)</span>
  <span class="p">)</span>

<span class="c1">;; (defun org-summary-todo (n-done n-not-done)</span>
<span class="c1">;;   &#34;Switch entry to DONE when all subentries are done, to TODO otherwise.&#34;</span>
<span class="c1">;;   (let (org-log-done org-log-states)  ; turn off logging</span>
<span class="c1">;;     (org-todo (if (= n-not-done 0) &#34;DONE&#34; &#34;TODO&#34;))))</span>

<span class="c1">;; (add-hook&#39;org-after-todo-statistics-hook &#39;org-summary-todo)</span>

<span class="c1">;;   ;;used by org-clock-sum-today-by-tags</span>
<span class="c1">;; (defun filter-by-tags ()</span>
<span class="c1">;;     (let ((head-tags (org-get-tags-at)))</span>
<span class="c1">;;       (member current-tag head-tags)))</span>


<span class="c1">;; (defun org-clock-sum-today-by-tags (timerange &amp;optional tstart tend noinsert)</span>
<span class="c1">;;     (interactive &#34;P&#34;)</span>
<span class="c1">;;     (let* ((timerange-numeric-value (prefix-numeric-value timerange))</span>
<span class="c1">;;            (files (org-add-archive-files (org-agenda-files)))</span>
<span class="c1">;;            (include-tags&#39;(&#34;PROG&#34; &#34;EMACS&#34; &#34;DREAM&#34; &#34;WRITING&#34; &#34;MEETING&#34; &#34;BLOG&#34; &#34;LIFE&#34; &#34;PROJECT&#34;))</span>
<span class="c1">;;            (tags-time-alist (mapcar (lambda (tag) `(,tag . 0)) include-tags))</span>
<span class="c1">;;            (output-string &#34;&#34;)</span>
<span class="c1">;;            (tstart (or tstart</span>
<span class="c1">;;                        (and timerange (equal timerange-numeric-value 4) (- (org-time-today) 86400))</span>
<span class="c1">;;                        (and timerange (equal timerange-numeric-value 16) (org-read-date nil nil nil &#34;Start Date/Time:&#34;))</span>
<span class="c1">;;                        (org-time-today)))</span>
<span class="c1">;;            (tend (or tend</span>
<span class="c1">;;                      (and timerange (equal timerange-numeric-value 16) (org-read-date nil nil nil &#34;End Date/Time:&#34;))</span>
<span class="c1">;;                      (+ tstart 86400)))</span>
<span class="c1">;;            h m file item prompt donesomething)</span>
<span class="c1">;;       (while (setq file (pop files))</span>
<span class="c1">;;         (setq org-agenda-buffer (if (file-exists-p file)</span>
<span class="c1">;;                                     (org-get-agenda-file-buffer file)</span>
<span class="c1">;;                                   (error &#34;No such file %s&#34; file)))</span>
<span class="c1">;;         (with-current-buffer org-agenda-buffer</span>
<span class="c1">;;           (dolist (current-tag include-tags)</span>
<span class="c1">;;             (org-clock-sum tstart tend&#39;filter-by-tags)</span>
<span class="c1">;;             (setcdr (assoc current-tag tags-time-alist)</span>
<span class="c1">;;                     (+ org-clock-file-total-minutes (cdr (assoc current-tag tags-time-alist)))))))</span>
<span class="c1">;;       (while (setq item (pop tags-time-alist))</span>
<span class="c1">;;         (unless (equal (cdr item) 0)</span>
<span class="c1">;;           (setq donesomething t)</span>
<span class="c1">;;           (setq h (/ (cdr item) 60)</span>
<span class="c1">;;                 m (- (cdr item) (* 60 h)))</span>
<span class="c1">;;           (setq output-string (concat output-string (format &#34;[-%s-] %.2d:%.2d\n&#34; (car item) h m)))))</span>
<span class="c1">;;       (unless donesomething</span>
<span class="c1">;;         (setq output-string (concat output-string &#34;[-Nothing-] Done nothing!!!\n&#34;)))</span>
<span class="c1">;;       (unless noinsert</span>
<span class="c1">;;         (insert output-string))</span>
<span class="c1">;;       output-string))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="org-capture"><span class="section-num">5.11.2</span> Org-capture</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp">  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f9&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;org-capture</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oc&#34;</span> <span class="ss">&#39;org-capture</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-capture-templates</span>
        <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;b&#34;</span> <span class="s">&#34;Blog Ideas&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Notes.org&#34;</span> <span class="s">&#34;Blog Ideas&#34;</span><span class="p">)</span>
           <span class="s">&#34;* TODO %?\n%i%U&#34;</span>
           <span class="nb">:empty-lines</span> <span class="mi">1</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;c&#34;</span> <span class="s">&#34;Contacts&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Contacts.org&#34;</span><span class="p">)</span>
           <span class="s">&#34;* %(org-contacts-template-name)
</span><span class="s">:PROPERTIES:
</span><span class="s">:EMAIL: %(org-contacts-template-email)
</span><span class="s">:PHONE:
</span><span class="s">:ALIAS:
</span><span class="s">:NICKNAME:
</span><span class="s">:IGNORE:
</span><span class="s">:ICON:
</span><span class="s">:NOTE:
</span><span class="s">:ADDRESS:
</span><span class="s">:BIRTHDAY:
</span><span class="s">:END:&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;s&#34;</span> <span class="s">&#34;Someday/Maybe&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Notes.org&#34;</span> <span class="s">&#34;Someday/Maybe&#34;</span><span class="p">)</span>
           <span class="s">&#34;* SOMEDAY %?\n%i%U&#34;</span>
           <span class="nb">:empty-lines</span> <span class="mi">1</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;m&#34;</span> <span class="s">&#34;Myself Tasks&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org&#34;</span> <span class="s">&#34;Myself Tasks&#34;</span><span class="p">)</span>
           <span class="s">&#34;* TODO %?\n%i%U&#34;</span>
           <span class="nb">:empty-lines</span> <span class="mi">1</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;w&#34;</span> <span class="s">&#34;Work Related Tasks&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/GTD-lengyue/GTD-lengyue.org&#34;</span> <span class="s">&#34;Work Related Tasks&#34;</span><span class="p">)</span>
           <span class="s">&#34;* TODO %?\n%i%U&#34;</span>
           <span class="nb">:empty-lines</span> <span class="mi">1</span><span class="p">)</span>
          <span class="p">(</span><span class="s">&#34;e&#34;</span> <span class="s">&#34;Web site&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Wiki-lengyue/Bookmark.org&#34;</span><span class="p">)</span>
           <span class="s">&#34;* %c :website:\n%?\n%U %:initial&#34;</span>
           <span class="nb">:empty-lines</span> <span class="mi">1</span><span class="p">)</span>
          <span class="c1">;; (&#34;j&#34; &#34;Journal entry&#34; entry (function org-journal-find-location)</span>
          <span class="c1">;;  &#34;** %(format-time-string org-journal-time-format)^{}\n%i%?&#34;</span>
          <span class="c1">;;  :empty-lines 1)</span>
          <span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="add-bookmark-to-orgmode"><span class="section-num">5.12</span> Add bookmark to orgmode</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/org-protocol-capture-html&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">server-start</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-protocol</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-protocol-capture-html</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-babel-customizaton"><span class="section-num">5.13</span> Org-babel customizaton</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-plantuml-jar-path</span>
      <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/.spacemacs.d/package/plantuml.jar&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-ditta-jar-path</span>
      <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/.spacemacs.d/package/ditaa.jar&#34;</span><span class="p">))</span>


<span class="p">(</span><span class="nv">eval-after-load</span> <span class="ss">&#39;org</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nb">progn</span>
     <span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/org-insert-src-block</span> <span class="p">(</span><span class="nv">src-code-type</span><span class="p">)</span>
       <span class="s">&#34;Insert a </span><span class="ss">`SRC-CODE-TYPE&#39;</span><span class="s"> type source code block in org-mode.&#34;</span>
       <span class="p">(</span><span class="nb">interactive</span>
        <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">src-code-types</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;emacs-lisp&#34;</span> <span class="s">&#34;python&#34;</span> <span class="s">&#34;C&#34;</span> <span class="s">&#34;sh&#34;</span> <span class="s">&#34;java&#34;</span> <span class="s">&#34;js&#34;</span> <span class="s">&#34;clojure&#34;</span> <span class="s">&#34;C++&#34;</span> <span class="s">&#34;css&#34;</span>
                 <span class="s">&#34;calc&#34;</span> <span class="s">&#34;asymptote&#34;</span> <span class="s">&#34;dot&#34;</span> <span class="s">&#34;gnuplot&#34;</span> <span class="s">&#34;ledger&#34;</span> <span class="s">&#34;lilypond&#34;</span> <span class="s">&#34;mscgen&#34;</span>
                 <span class="s">&#34;octave&#34;</span> <span class="s">&#34;oz&#34;</span> <span class="s">&#34;plantuml&#34;</span> <span class="s">&#34;R&#34;</span> <span class="s">&#34;sass&#34;</span> <span class="s">&#34;screen&#34;</span> <span class="s">&#34;sql&#34;</span> <span class="s">&#34;awk&#34;</span> <span class="s">&#34;ditaa&#34;</span>
                 <span class="s">&#34;haskell&#34;</span> <span class="s">&#34;latex&#34;</span> <span class="s">&#34;lisp&#34;</span> <span class="s">&#34;matlab&#34;</span> <span class="s">&#34;ocaml&#34;</span> <span class="s">&#34;org&#34;</span> <span class="s">&#34;perl&#34;</span> <span class="s">&#34;ruby&#34;</span>
                 <span class="s">&#34;scheme&#34;</span> <span class="s">&#34;sqlite&#34;</span> <span class="s">&#34;ipython&#34;</span><span class="p">)))</span>
          <span class="p">(</span><span class="nf">list</span> <span class="p">(</span><span class="nv">ido-completing-read</span> <span class="s">&#34;Source code type: &#34;</span> <span class="nv">src-code-types</span><span class="p">))))</span>
       <span class="p">(</span><span class="nb">progn</span>
         <span class="p">(</span><span class="nv">newline-and-indent</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;#+BEGIN_SRC %s\n&#34;</span> <span class="nv">src-code-type</span><span class="p">))</span>
         <span class="p">(</span><span class="nv">newline-and-indent</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">newline-and-indent</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">newline-and-indent</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;#+END_SRC\n&#34;</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">previous-line</span> <span class="mi">2</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">org-edit-src-code</span><span class="p">)))</span>

     <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
                                 <span class="c1">;; keybinding for editing source code blocks</span>
                                 <span class="c1">;; keybinding for inserting code blocks</span>
                                 <span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c i s&#34;</span><span class="p">)</span>
                                                <span class="ss">&#39;lengyueyang/org-insert-src-block</span><span class="p">)</span>
                                 <span class="p">))</span>

     <span class="p">(</span><span class="nv">org-babel-do-load-languages</span>
      <span class="ss">&#39;org-babel-load-languages</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nv">perl</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">ruby</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">shell</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">js</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">python</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">ipython</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">emacs-lisp</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">http</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">plantuml</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">R</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">dot</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">gnuplot</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">latex</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">C</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">octave</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">ditaa</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span>
     <span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oi&#34;</span> <span class="ss">&#39;lengyueyang/org-insert-src-block</span><span class="p">)</span>


<span class="c1">;; Resume clocking task when emacs is restarted</span>
<span class="p">(</span><span class="nv">org-clock-persistence-insinuate</span><span class="p">)</span>
<span class="c1">;; Save the running clock and all clock history when exiting Emacs, load it on startup</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-clock-persist</span> <span class="no">t</span><span class="p">)</span>
<span class="c1">;; Do not prompt to resume an active clock</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-clock-persist-query-resume</span> <span class="no">nil</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="ob-ipython-and-jupter-notebook"><span class="section-num">5.14</span> Ob-ipython and Jupter notebook</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ob-ipython</span><span class="p">)</span>
<span class="c1">;; (setq org-babel-python-command &#34;/usr/bin/ipython --pylab --pdb --nosep&#34;)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">python-shell-prompt-detect-failure-warning</span> <span class="no">nil</span><span class="p">)</span>

<span class="c1">;; (add-hook &#39;org-babel-after-execute-hook &#39;org-display-inline-images &#39;append)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-bullets-customization"><span class="section-num">5.15</span> Org bullets customization</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/post-init-org-bullets</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-bullets-bullet-list</span> <span class="o">&#39;</span><span class="p">(</span>
                                  <span class="s">&#34;☰&#34;</span> <span class="s">&#34;☷&#34;</span> <span class="s">&#34;⋗&#34;</span> <span class="s">&#34;⇀&#34;</span>
                                  <span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">lengyueyang/post-init-org-bullets</span><span class="p">)</span>

<span class="c1">;; (require &#39;org-bullets)</span>

<span class="c1">;; ;; make available &#34;org-bullet-face&#34; such that I can control the font size individually</span>
<span class="c1">;; (setq org-bullets-face-name (quote org-bullet-face))</span>
<span class="c1">;; (add-hook &#39;org-mode-hook (lambda () (org-bullets-mode 1)))</span>
<span class="c1">;; (setq org-bullets-bullet-list &#39;(&#34;☰&#34; &#34;☷&#34; &#34;⋗&#34; &#34;⇀&#34; &#34;✙&#34; &#34;♱&#34; &#34;♰&#34; &#34;☥&#34; &#34;✞&#34; &#34;✟&#34; &#34;✝&#34; &#34;†&#34; &#34;✠&#34; &#34;✚&#34; &#34;✜&#34; &#34;✛&#34; &#34;✢&#34; &#34;✣&#34; &#34;✤&#34; &#34;✥&#34;))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-latex-to-pdf"><span class="section-num">5.16</span> Org-latex to pdf</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;;org-mode export to latex</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ox-latex</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-export-latex-listings</span> <span class="no">t</span><span class="p">)</span>

<span class="c1">;;org-mode source code setup in exporting to latex</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-listings</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;listings&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-listings</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;color&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;xcolor&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;listings&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="c1">;;(add-to-list &#39;org-latex-packages-alist</span>
<span class="c1">;;             &#39;(&#34;&#34; &#34;fontspec&#34; t))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;indentfirst&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="c1">;;(add-to-list &#39;org-latex-packages-alist</span>
<span class="c1">;;             &#39;(&#34;&#34; &#34;xunicode&#34; t))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;geometry&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;float&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;longtable&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;tikz&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;fancyhdr&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;textcomp&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;amsmath&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;amsthm&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;tabularx&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;booktabs&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;grffile&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;wrapfig&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;normalem&#34;</span> <span class="s">&#34;ulem&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;amssymb&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;extarrows&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="s">&#34;capt-of&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;figuresright&#34;</span> <span class="s">&#34;rotating&#34;</span> <span class="no">t</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-packages-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;Lenny&#34;</span> <span class="s">&#34;fncychap&#34;</span> <span class="no">t</span><span class="p">))</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;lengyue-org-book&#34;</span>
               <span class="s">&#34;\\documentclass{book}
</span><span class="s">\\usepackage[slantfont, boldfont]{xeCJK}
</span><span class="s">% chapter set
</span><span class="s">\\usepackage{titlesec}
</span><span class="s">\\usepackage{hyperref}
</span><span class="s">\\hypersetup{colorlinks,linkcolor=black,filecolor=black,urlcolor=blue,citecolor=black}
</span><span class="s">\\usepackage{fontspec}
</span><span class="s">\\usepackage{xunicode}
</span><span class="s">\\titleformat{\\paragraph}{\\normalfont\\normalsize\\bfseries}{\\theparagraph}{1em}{}
</span><span class="s">[NO-DEFAULT-PACKAGES]
</span><span class="s">[PACKAGES]
</span><span class="s">
</span><span class="s">
</span><span class="s">\\setCJKmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">\\setCJKsansfont{WenQuanYi Micro Hei}
</span><span class="s">\\setCJKmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">\\setmainfont{DejaVu Sans} % 英文衬线字体
</span><span class="s">\\setsansfont{DejaVu Serif} % 英文无衬线字体
</span><span class="s">\\setmonofont{DejaVu Sans Mono}
</span><span class="s">%\\setmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">%\\setsansfont{WenQuanYi Micro Hei}
</span><span class="s">%\\setmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">%如果没有它，会有一些 tex 特殊字符无法正常使用，比如连字符。
</span><span class="s">\\defaultfontfeatures{Mapping=tex-text}
</span><span class="s">
</span><span class="s">% 中文断行
</span><span class="s">\\XeTeXlinebreaklocale \&#34;zh\&#34;
</span><span class="s">\\XeTeXlinebreakskip = 0pt plus 1pt minus 0.1pt
</span><span class="s">
</span><span class="s">% 代码设置
</span><span class="s">\\lstset{numbers=left,
</span><span class="s">numberstyle= \\tiny,
</span><span class="s">keywordstyle= \\color{ blue!70},commentstyle=\\color{red!50!green!50!blue!50},
</span><span class="s">frame=shadowbox,
</span><span class="s">breaklines=true,
</span><span class="s">rulesepcolor= \\color{ red!20!green!20!blue!20}
</span><span class="s">}
</span><span class="s">
</span><span class="s">[EXTRA]
</span><span class="s">&#34;</span>
                 <span class="p">(</span><span class="s">&#34;\\chapter{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\chapter*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\section{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\section*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsubsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsubsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\paragraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\paragraph*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subparagraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subparagraph*{%s}&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;lengyue-org-article&#34;</span>
               <span class="s">&#34;\\documentclass{article}
</span><span class="s">\\usepackage[slantfont, boldfont]{xeCJK}
</span><span class="s">\\usepackage{titlesec}
</span><span class="s">\\usepackage{hyperref}
</span><span class="s">\\hypersetup{colorlinks,linkcolor=black,filecolor=black,urlcolor=blue,citecolor=black}
</span><span class="s">\\usepackage{fontspec}
</span><span class="s">\\usepackage{xunicode}
</span><span class="s">\\titleformat{\\paragraph}{\\normalfont\\normalsize\\bfseries}{\\theparagraph}{1em}{}
</span><span class="s">
</span><span class="s">[NO-DEFAULT-PACKAGES]
</span><span class="s">[PACKAGES]
</span><span class="s">
</span><span class="s">\\parindent 2em
</span><span class="s">
</span><span class="s">\\setCJKmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">\\setCJKsansfont{WenQuanYi Micro Hei}
</span><span class="s">\\setCJKmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">\\setmainfont{DejaVu Sans} % 英文衬线字体
</span><span class="s">\\setsansfont{DejaVu Serif} % 英文无衬线字体
</span><span class="s">\\setmonofont{DejaVu Sans Mono}
</span><span class="s">%\\setmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">%\\setsansfont{WenQuanYi Micro Hei}
</span><span class="s">%\\setmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">%如果没有它，会有一些 tex 特殊字符无法正常使用，比如连字符。
</span><span class="s">\\defaultfontfeatures{Mapping=tex-text}
</span><span class="s">
</span><span class="s">% 中文断行
</span><span class="s">\\XeTeXlinebreaklocale \&#34;zh\&#34;
</span><span class="s">\\XeTeXlinebreakskip = 0pt plus 1pt minus 0.1pt
</span><span class="s">
</span><span class="s">% 代码设置
</span><span class="s">\\lstset{numbers=left,
</span><span class="s">numberstyle= \\tiny,
</span><span class="s">keywordstyle= \\color{ blue!70},commentstyle=\\color{red!50!green!50!blue!50},
</span><span class="s">frame=shadowbox,
</span><span class="s">breaklines=true,
</span><span class="s">rulesepcolor= \\color{ red!20!green!20!blue!20}
</span><span class="s">}
</span><span class="s">
</span><span class="s">[EXTRA]
</span><span class="s">&#34;</span>
                 <span class="p">(</span><span class="s">&#34;\\section{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\section*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsubsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsubsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\paragraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\paragraph*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subparagraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subparagraph*{%s}&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;lengyue-org-beamer&#34;</span>
               <span class="s">&#34;\\documentclass{beamer}
</span><span class="s">\\usepackage[slantfont, boldfont]{xeCJK}
</span><span class="s">% beamer set
</span><span class="s">\\usepackage[none]{hyphenat}
</span><span class="s">\\usepackage[abs]{overpic}
</span><span class="s">\\usepackage{fontspec}
</span><span class="s">\\usepackage{xunicode}
</span><span class="s">
</span><span class="s">
</span><span class="s">[NO-DEFAULT-PACKAGES]
</span><span class="s">[PACKAGES]
</span><span class="s">
</span><span class="s">\\setCJKmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">\\setCJKsansfont{WenQuanYi Micro Hei}
</span><span class="s">\\setCJKmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">\\setmainfont{DejaVu Sans} % 英文衬线字体
</span><span class="s">\\setsansfont{DejaVu Serif} % 英文无衬线字体
</span><span class="s">\\setmonofont{DejaVu Sans Mono}
</span><span class="s">%\\setmainfont{WenQuanYi Micro Hei} % 设置缺省中文字体
</span><span class="s">%\\setsansfont{WenQuanYi Micro Hei}
</span><span class="s">%\\setmonofont{WenQuanYi Micro Hei Mono}
</span><span class="s">
</span><span class="s">%如果没有它，会有一些 tex 特殊字符无法正常使用，比如连字符。
</span><span class="s">\\defaultfontfeatures{Mapping=tex-text}
</span><span class="s">
</span><span class="s">% 中文断行
</span><span class="s">\\XeTeXlinebreaklocale \&#34;zh\&#34;
</span><span class="s">\\XeTeXlinebreakskip = 0pt plus 1pt minus 0.1pt
</span><span class="s">
</span><span class="s">% 代码设置
</span><span class="s">\\lstset{numbers=left,
</span><span class="s">numberstyle= \\tiny,
</span><span class="s">keywordstyle= \\color{ blue!70},commentstyle=\\color{red!50!green!50!blue!50},
</span><span class="s">frame=shadowbox,
</span><span class="s">breaklines=true,
</span><span class="s">rulesepcolor= \\color{ red!20!green!20!blue!20}
</span><span class="s">}
</span><span class="s">
</span><span class="s">[EXTRA]
</span><span class="s">&#34;</span>
                 <span class="p">(</span><span class="s">&#34;\\section{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\section*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subsubsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsubsection*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\paragraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\paragraph*{%s}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&#34;\\subparagraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subparagraph*{%s}&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-pdf-process</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
          <span class="c1">;; &#34;biber %b&#34; &#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
          <span class="s">&#34;bibtex %b&#34;</span>
          <span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
          <span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="setup-link-abbreviations"><span class="section-num">5.17</span> Setup link abbreviations</h3>

<p><a href="https://www.gnu.org/software/emacs/manual/html%5Fnode/org/Link-abbreviations.html">Link abbreviations</a></p>

<p>An abbreviated link looks like</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">[[linkword:tag][description]]</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">org-link-abbrev-alist</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;google&#34;</span> <span class="o">.</span> <span class="s">&#34;http://www.google.com/search?q=&#34;</span><span class="p">)</span>
        <span class="p">(</span><span class="s">&#34;google-map&#34;</span> <span class="o">.</span> <span class="s">&#34;http://maps.google.com/maps?q=%s&#34;</span><span class="p">)</span>
        <span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-subtask-and-org-checklist"><span class="section-num">5.18</span> Org-subtask and org-checklist</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/org-subtask-reset&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-subtask-reset</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/org-checklist&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-checklist</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-archive-all-tasks"><span class="section-num">5.19</span> Org-archive-all-tasks</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang//org-archive-tasks</span> <span class="p">(</span><span class="nv">prefix</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">org-map-entries</span>
   <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
     <span class="p">(</span><span class="nv">org-archive-subtree</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-map-continue-from</span> <span class="p">(</span><span class="nv">outline-previous-heading</span><span class="p">)))</span>
   <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;/%s&#34;</span> <span class="nv">prefix</span><span class="p">)</span> <span class="ss">&#39;file</span><span class="p">))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/org-archive-all-tasks</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">lengyueyang//org-archive-tasks</span> <span class="s">&#34;DONE&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">lengyueyang//org-archive-tasks</span> <span class="s">&#34;CANCELLED&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">lengyueyang//org-archive-tasks</span> <span class="s">&#34;FIXED&#34;</span><span class="p">)</span>
  <span class="p">)</span>

<span class="c1">;; org-archive-subtree-hierarchical.el</span>
<span class="c1">;; modified from https://lists.gnu.org/archive/html/emacs-orgmode/2014-08/msg00109.html</span>

<span class="c1">;; In orgmode</span>
<span class="c1">;; * A</span>
<span class="c1">;; ** AA</span>
<span class="c1">;; *** AAA</span>
<span class="c1">;; ** AB</span>
<span class="c1">;; *** ABA</span>
<span class="c1">;; Archiving AA will remove the subtree from the original file and create</span>
<span class="c1">;; it like that in archive target:</span>

<span class="c1">;; * AA</span>
<span class="c1">;; ** AAA</span>

<span class="c1">;; And this give you</span>
<span class="c1">;; * A</span>
<span class="c1">;; ** AA</span>
<span class="c1">;; *** AAA</span>


<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-archive</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-archive-subtree-hierarchical--line-content-as-string</span> <span class="p">()</span>
  <span class="s">&#34;Returns the content of the current line as a string&#34;</span>
  <span class="p">(</span><span class="nb">save-excursion</span>
    <span class="p">(</span><span class="nf">beginning-of-line</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">buffer-substring-no-properties</span>
     <span class="p">(</span><span class="nf">line-beginning-position</span><span class="p">)</span> <span class="p">(</span><span class="nf">line-end-position</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-archive-subtree-hierarchical--org-child-list</span> <span class="p">()</span>
  <span class="s">&#34;This function returns all children of a heading as a list. &#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">save-excursion</span>
    <span class="c1">;; this only works with org-version &gt; 8.0, since in previous</span>
    <span class="c1">;; org-mode versions the function (org-outline-level) returns</span>
    <span class="c1">;; gargabe when the point is not on a heading.</span>
    <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nv">org-outline-level</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">outline-next-visible-heading</span> <span class="mi">1</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">org-goto-first-child</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">child-list</span> <span class="p">(</span><span class="nf">list</span> <span class="p">(</span><span class="nv">org-archive-subtree-hierarchical--line-content-as-string</span><span class="p">))))</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nv">org-goto-sibling</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">setq</span> <span class="nv">child-list</span> <span class="p">(</span><span class="nf">cons</span> <span class="p">(</span><span class="nv">org-archive-subtree-hierarchical--line-content-as-string</span><span class="p">)</span> <span class="nv">child-list</span><span class="p">)))</span>
      <span class="nv">child-list</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-archive-subtree-hierarchical--org-struct-subtree</span> <span class="p">()</span>
  <span class="s">&#34;This function returns the tree structure in which a subtree
</span><span class="s">belongs as a list.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">archive-tree</span> <span class="no">nil</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">save-excursion</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nv">org-up-heading-safe</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">heading</span>
               <span class="p">(</span><span class="nf">buffer-substring-no-properties</span>
                <span class="p">(</span><span class="nf">line-beginning-position</span><span class="p">)</span> <span class="p">(</span><span class="nf">line-end-position</span><span class="p">))))</span>
          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">archive-tree</span> <span class="no">nil</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">setq</span> <span class="nv">archive-tree</span> <span class="p">(</span><span class="nf">list</span> <span class="nv">heading</span><span class="p">))</span>
            <span class="p">(</span><span class="nb">setq</span> <span class="nv">archive-tree</span> <span class="p">(</span><span class="nf">cons</span> <span class="nv">heading</span> <span class="nv">archive-tree</span><span class="p">))))))</span>
    <span class="nv">archive-tree</span><span class="p">))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-archive-subtree-hierarchical</span> <span class="p">()</span>
  <span class="s">&#34;This function archives a subtree hierarchical&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">org-tree</span> <span class="p">(</span><span class="nv">org-archive-subtree-hierarchical--org-struct-subtree</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">this-buffer</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">file</span> <span class="p">(</span><span class="nv">abbreviate-file-name</span>
               <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="p">(</span><span class="nf">buffer-base-buffer</span><span class="p">))</span>
                   <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;No file associated to buffer&#34;</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nb">save-excursion</span>
      <span class="p">(</span><span class="nb">setq</span> <span class="nv">location</span> <span class="p">(</span><span class="nv">org-get-local-archive-location</span><span class="p">)</span>
            <span class="nv">afile</span> <span class="p">(</span><span class="nv">org-extract-archive-file</span> <span class="nv">location</span><span class="p">)</span>
            <span class="nv">heading</span> <span class="p">(</span><span class="nv">org-extract-archive-heading</span> <span class="nv">location</span><span class="p">)</span>
            <span class="nv">infile-p</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">file</span> <span class="p">(</span><span class="nv">abbreviate-file-name</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">afile</span> <span class="s">&#34;&#34;</span><span class="p">))))</span>
      <span class="p">(</span><span class="nb">unless</span> <span class="nv">afile</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;Invalid </span><span class="ss">`org-archive-location&#39;</span><span class="s">&#34;</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">afile</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
          <span class="p">(</span><span class="nb">setq</span> <span class="nv">newfile-p</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">afile</span><span class="p">))</span>
                <span class="nv">visiting</span> <span class="p">(</span><span class="nv">find-buffer-visiting</span> <span class="nv">afile</span><span class="p">)</span>
                <span class="nv">buffer</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">visiting</span> <span class="p">(</span><span class="nv">find-file-noselect</span> <span class="nv">afile</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">setq</span> <span class="nv">buffer</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">unless</span> <span class="nv">buffer</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;Cannot access file \&#34;%s\&#34;&#34;</span> <span class="nv">afile</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">org-cut-subtree</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">set-buffer</span> <span class="nv">buffer</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">org-mode</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">org-tree</span> <span class="no">nil</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">child-list</span> <span class="p">(</span><span class="nv">org-archive-subtree-hierarchical--org-child-list</span><span class="p">)))</span>
          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">member</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">org-tree</span><span class="p">)</span> <span class="nv">child-list</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">progn</span>
                <span class="p">(</span><span class="nf">search-forward</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">org-tree</span><span class="p">)</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-tree</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">org-tree</span><span class="p">)))</span>
            <span class="p">(</span><span class="nb">progn</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
              <span class="p">(</span><span class="nv">newline</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">org-insert-struct</span> <span class="nv">org-tree</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-tree</span> <span class="no">nil</span><span class="p">)))))</span>
      <span class="p">(</span><span class="nv">newline</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">org-yank</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">this-buffer</span> <span class="nv">buffer</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Subtree archived %s&#34;</span>
               <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;in file: &#34;</span> <span class="p">(</span><span class="nv">abbreviate-file-name</span> <span class="nv">afile</span><span class="p">))))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-insert-struct</span> <span class="p">(</span><span class="nv">struct</span><span class="p">)</span>
  <span class="s">&#34;TODO&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nv">struct</span>
    <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">struct</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">newline</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">org-insert-struct</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">struct</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-archive-subtree</span> <span class="p">()</span>
  <span class="p">(</span><span class="nv">org-archive-subtree-hierarchical</span><span class="p">)</span>
<span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-ref-customize"><span class="section-num">5.20</span> Org-ref customize</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">reftex-default-bibliography</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~/MEGA/Emacs-lengyue/Papers/references.bib&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-ref-default-bibliography</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~/MEGA/Emacs-lengyue/Papers/references.bib&#34;</span><span class="p">)</span>
      <span class="nv">org-ref-pdf-directory</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Papers/bibtex-pdfs/&#34;</span>
      <span class="nv">org-ref-bibliography-notes</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Papers/notes.org&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-ref-completion-library</span> <span class="ss">&#39;org-ref-ivy-cite</span><span class="p">)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">bibtex-autokey-year-length</span> <span class="mi">4</span>
      <span class="nv">bibtex-autokey-name-year-separator</span> <span class="s">&#34;-&#34;</span>
      <span class="nv">bibtex-autokey-year-title-separator</span> <span class="s">&#34;-&#34;</span>
      <span class="nv">bibtex-autokey-titleword-separator</span> <span class="s">&#34;-&#34;</span>
      <span class="nv">bibtex-autokey-titlewords</span> <span class="mi">3</span>
      <span class="nv">bibtex-autokey-titlewords-stretch</span> <span class="mi">1</span>
      <span class="nv">bibtex-autokey-titleword-length</span> <span class="mi">5</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="org-project"><span class="section-num">5.21</span> Org-project</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-agenda</span>
  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org-projectile</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">mapcar</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">file</span><span class="p">)</span>
             <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">file</span><span class="p">)</span>
               <span class="p">(</span><span class="nb">push</span> <span class="nv">file</span> <span class="nv">org-agenda-files</span><span class="p">)))</span>
          <span class="p">(</span><span class="nv">org-projectile-todo-files</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="better-equation-numbering-in-latex-fragments-in-org-mode"><span class="section-num">5.22</span> Better equation numbering in LaTeX fragments in org-mode</h3>

<p><a href="https://www.youtube.com/embed/pcMuJlUvKCw">https://www.youtube.com/embed/pcMuJlUvKCw</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">org-renumber-environment</span> <span class="p">(</span><span class="nv">orig-func</span> <span class="kp">&amp;rest</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">results</span> <span class="o">&#39;</span><span class="p">())</span>
  <span class="p">(</span><span class="nv">counter</span> <span class="mi">-1</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">numberp</span><span class="p">))</span>

    <span class="p">(</span><span class="nb">setq</span> <span class="nv">results</span> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="p">(</span><span class="nv">begin</span> <span class="o">.</span>  <span class="nv">env</span><span class="p">)</span> <span class="nv">in</span>
      <span class="p">(</span><span class="nv">org-element-map</span> <span class="p">(</span><span class="nv">org-element-parse-buffer</span><span class="p">)</span> <span class="ss">&#39;latex-environment</span>
        <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">env</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">cons</span>
           <span class="p">(</span><span class="nv">org-element-property</span> <span class="nb">:begin</span> <span class="nv">env</span><span class="p">)</span>
           <span class="p">(</span><span class="nv">org-element-property</span> <span class="nb">:value</span> <span class="nv">env</span><span class="p">))))</span>
      <span class="nv">collect</span>
      <span class="p">(</span><span class="nb">cond</span>
       <span class="p">((</span><span class="nb">and</span> <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;\\\\begin{equation}&#34;</span> <span class="nv">env</span><span class="p">)</span>
             <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;\\\\tag{&#34;</span> <span class="nv">env</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">incf</span> <span class="nv">counter</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">cons</span> <span class="nv">begin</span> <span class="nv">counter</span><span class="p">))</span>
       <span class="p">((</span><span class="nf">string-match</span> <span class="s">&#34;\\\\begin{align}&#34;</span> <span class="nv">env</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">prog2</span>
            <span class="p">(</span><span class="nb">incf</span> <span class="nv">counter</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">cons</span> <span class="nv">begin</span> <span class="nv">counter</span><span class="p">)</span>
          <span class="p">(</span><span class="nb">with-temp-buffer</span>
            <span class="p">(</span><span class="nf">insert</span> <span class="nv">env</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
            <span class="c1">;; \\ is used for a new line. Each one leads to a number</span>
            <span class="p">(</span><span class="nb">incf</span> <span class="nv">counter</span> <span class="p">(</span><span class="nv">count-matches</span> <span class="s">&#34;\\\\$&#34;</span><span class="p">))</span>
            <span class="c1">;; unless there are nonumbers.</span>
            <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
            <span class="p">(</span><span class="nb">decf</span> <span class="nv">counter</span> <span class="p">(</span><span class="nv">count-matches</span> <span class="s">&#34;\\nonumber&#34;</span><span class="p">)))))</span>
       <span class="p">(</span><span class="no">t</span>
        <span class="p">(</span><span class="nf">cons</span> <span class="nv">begin</span> <span class="no">nil</span><span class="p">)))))</span>

    <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">setq</span> <span class="nf">numberp</span> <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="nv">results</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">setf</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">args</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">concat</span>
       <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;\\setcounter{equation}{%s}\n&#34;</span> <span class="nf">numberp</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">car</span> <span class="nv">args</span><span class="p">)))))</span>

  <span class="p">(</span><span class="nf">apply</span> <span class="nv">orig-func</span> <span class="nv">args</span><span class="p">))</span>

<span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;org-create-formula-image</span> <span class="nb">:around</span> <span class="nf">#&#39;</span><span class="nv">org-renumber-environment</span><span class="p">)</span>

<span class="c1">;; (advice-remove &#39;org-create-formula-image #&#39;org-renumber-environment)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="justifying-latex-preview-fragments-in-org-mode"><span class="section-num">5.23</span> Justifying LaTeX preview fragments in org-mode</h3>

<p><a href="https://www.youtube.com/embed/nA9YzooqpWY">https://www.youtube.com/embed/nA9YzooqpWY</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; specify the justification you want</span>
<span class="p">(</span><span class="nf">plist-put</span> <span class="nv">org-format-latex-options</span> <span class="nb">:justify</span> <span class="ss">&#39;center</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-justify-fragment-overlay</span> <span class="p">(</span><span class="nv">beg</span> <span class="nv">end</span> <span class="nv">image</span> <span class="nv">imagetype</span><span class="p">)</span>
  <span class="s">&#34;Adjust the justification of a LaTeX fragment.
</span><span class="s">The justification is set by :justify in
</span><span class="s"></span><span class="ss">`org-format-latex-options&#39;</span><span class="s">. Only equations at the beginning of a
</span><span class="s">line are justified.&#34;</span>
  <span class="p">(</span><span class="nb">cond</span>
   <span class="c1">;; Centered justification</span>
   <span class="p">((</span><span class="nb">and</span> <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;center</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">org-format-latex-options</span> <span class="nb">:justify</span><span class="p">))</span>
   <span class="p">(</span><span class="nf">=</span> <span class="nv">beg</span> <span class="p">(</span><span class="nf">line-beginning-position</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">img</span> <span class="p">(</span><span class="nv">create-image</span> <span class="nv">image</span> <span class="ss">&#39;imagemagick</span> <span class="no">t</span><span class="p">))</span>
     <span class="p">(</span><span class="nv">width</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nf">image-size</span> <span class="nv">img</span><span class="p">)))</span>
     <span class="p">(</span><span class="nv">offset</span> <span class="p">(</span><span class="nf">floor</span> <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nf">/</span> <span class="p">(</span><span class="nf">window-text-width</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">/</span> <span class="nv">width</span> <span class="mi">2</span><span class="p">)))))</span>
      <span class="p">(</span><span class="nf">overlay-put</span> <span class="p">(</span><span class="nv">ov-at</span><span class="p">)</span> <span class="ss">&#39;before-string</span> <span class="p">(</span><span class="nf">make-string</span> <span class="nv">offset</span> <span class="sc">? </span><span class="p">))))</span>
   <span class="c1">;; Right justification</span>
   <span class="p">((</span><span class="nb">and</span> <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;right</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">org-format-latex-options</span> <span class="nb">:justify</span><span class="p">))</span>
   <span class="p">(</span><span class="nf">=</span> <span class="nv">beg</span> <span class="p">(</span><span class="nf">line-beginning-position</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">img</span> <span class="p">(</span><span class="nv">create-image</span> <span class="nv">image</span> <span class="ss">&#39;imagemagick</span> <span class="no">t</span><span class="p">))</span>
     <span class="p">(</span><span class="nv">width</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nv">image-display-size</span> <span class="p">(</span><span class="nf">overlay-get</span> <span class="p">(</span><span class="nv">ov-at</span><span class="p">)</span> <span class="ss">&#39;display</span><span class="p">))))</span>
     <span class="p">(</span><span class="nv">offset</span> <span class="p">(</span><span class="nf">floor</span> <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nf">window-text-width</span><span class="p">)</span> <span class="nv">width</span> <span class="p">(</span><span class="nf">-</span> <span class="p">(</span><span class="nf">line-end-position</span><span class="p">)</span> <span class="nv">end</span><span class="p">)))))</span>
      <span class="p">(</span><span class="nf">overlay-put</span> <span class="p">(</span><span class="nv">ov-at</span><span class="p">)</span> <span class="ss">&#39;before-string</span> <span class="p">(</span><span class="nf">make-string</span> <span class="nv">offset</span> <span class="sc">? </span><span class="p">))))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-latex-fragment-tooltip</span> <span class="p">(</span><span class="nv">beg</span> <span class="nv">end</span> <span class="nv">image</span> <span class="nv">imagetype</span><span class="p">)</span>
  <span class="s">&#34;Add the fragment tooltip to the overlay and set click function to toggle it.&#34;</span>
  <span class="p">(</span><span class="nf">overlay-put</span> <span class="p">(</span><span class="nv">ov-at</span><span class="p">)</span> <span class="ss">&#39;help-echo</span>
         <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">buffer-substring</span> <span class="nv">beg</span> <span class="nv">end</span><span class="p">)</span>
           <span class="s">&#34;mouse-1 to toggle.&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">overlay-put</span> <span class="p">(</span><span class="nv">ov-at</span><span class="p">)</span> <span class="ss">&#39;local-map</span> <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">map</span> <span class="p">(</span><span class="nf">make-sparse-keymap</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">define-key</span> <span class="nv">map</span> <span class="p">[</span><span class="nv">mouse-1</span><span class="p">]</span>
              <span class="o">`</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
           <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
           <span class="p">(</span><span class="nv">org-remove-latex-fragment-image-overlays</span> <span class="o">,</span><span class="nv">beg</span> <span class="o">,</span><span class="nv">end</span><span class="p">)))</span>
            <span class="nv">map</span><span class="p">)))</span>

<span class="c1">;; advise the function to a</span>
<span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;org--format-latex-make-overlay</span> <span class="nb">:after</span> <span class="ss">&#39;org-justify-fragment-overlay</span><span class="p">)</span>
<span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;org--format-latex-make-overlay</span> <span class="nb">:after</span> <span class="ss">&#39;org-latex-fragment-tooltip</span><span class="p">)</span>

<span class="c1">;; (advice-remove &#39;org--format-latex-make-overlay &#39;org-justify-fragment-overlay)</span>
<span class="c1">;; (advice-remove &#39;org--format-latex-make-overlay &#39;org-latex-fragment-tooltip)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="programming-languages"><span class="section-num">6</span> Programming Languages</h2>

<p>This part is the customization to programming languages.</p>

<h3 id="yasnippet"><span class="section-num">6.1</span> Yasnippet</h3>

<p>Yasnippet allows you to type an abbreviation and then expand it into a template. We can look at yasnippet’s documentation on github.</p>

<p>Yasnippet by default checks for snippets in two places: a path relative to yasnippet.el (these are the default snippets that come with the package). If I want to make my own, I can put then in .spacemacs.d/snippets and it should find them there as well.</p>

<p>I downloads some snippets from web like <a href="https://github.com/AndreaCrotti/yasnippet-snippets">yasnippet-snippet</a> and <a href="https://github.com/howardabrams/dot-files">dot-files</a>, then I defined some snippets of mine.</p>

<p>You can use the tab key to expand a snippet once you’ve typed in the “key”. It’s pretty smart in that if tab fails for yasnippet, it then checks for whatever tab was originally bound to.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">yas-snippet-dirs</span>
      <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~/.spacemacs.d/snippets/lengyueyang-snippets&#34;</span>
        <span class="s">&#34;~/.spacemacs.d/snippets/dot-files-snippets/&#34;</span>
        <span class="s">&#34;~/.spacemacs.d/snippets/yasnippet-snippets/&#34;</span>
        <span class="s">&#34;~/.spacemacs.d/snippets/lengyueyang-snippets/&#34;</span>
        <span class="p">))</span>
<span class="p">(</span><span class="nv">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>

<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c y i&#34;</span><span class="p">)</span> <span class="ss">&#39;yas-insert-snippet</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c y n&#34;</span><span class="p">)</span> <span class="ss">&#39;yas-new-snippet</span><span class="p">)</span>
<span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c y t&#34;</span><span class="p">)</span> <span class="ss">&#39;yas-expand-from-trigger-key</span><span class="p">)</span>
<span class="c1">;;(global-set-key (kbd &#34;C-c i e&#34;) &#39;spacemacs/auto-yasnippet-expand)</span>

<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;oy&#34;</span> <span class="s">&#34;Yasnippet&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oyi&#34;</span> <span class="ss">&#39;yas-insert-snippet</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oyn&#34;</span> <span class="ss">&#39;yas-new-snippet</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oyt&#34;</span> <span class="ss">&#39;yas-expand-from-trigger-key</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="add-support-for-editorconfig"><span class="section-num">6.2</span> Add support for editorconfig</h3>

<p><a href="http://editorconfig.org/">EditorConfig</a> helps developers define and maintain consistent coding
styles between different editors and IDEs. The EditorConfig project
consists of a file format for defining coding styles and a collection
of text editor plugins that enable editors to read the file format and
adhere to defined styles. EditorConfig files are easily readable and
they work nicely with version control systems.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">editorconfig</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span> <span class="p">(</span><span class="nv">editorconfig-mode</span> <span class="mi">1</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;text-mode-hook</span> <span class="p">(</span><span class="nv">editorconfig-mode</span> <span class="mi">1</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="ess-and-r"><span class="section-num">6.3</span> Ess and R</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (defun add-ess-smart-S-assign ()</span>
<span class="c1">;;   (interactive)</span>
<span class="c1">;;   (insert &#34; &lt;- &#34;))</span>

<span class="c1">;; (global-set-key (kbd &#34;C-;&#34;) &#39;add-ess-smart-S-assign)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;R-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;R-mode-hook</span> <span class="ss">&#39;smartparens-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;R-mode-hook</span> <span class="ss">&#39;flycheck-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;R-mode-hook</span> <span class="ss">&#39;flyspell-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-ess-mode-hook</span> <span class="ss">&#39;company-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-ess-mode-hook</span> <span class="ss">&#39;smartparens-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-ess-mode-hook</span> <span class="ss">&#39;flycheck-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-ess-mode-hook</span> <span class="ss">&#39;flyspell-mode</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="python"><span class="section-num">6.4</span> Python</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">python-fill-column</span> <span class="mi">80</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-python-mode-hook</span> <span class="ss">&#39;flycheck-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;inferior-python-mode-hook</span> <span class="ss">&#39;flyspell-mode</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="js-2-mode"><span class="section-num">6.5</span> JS-2 mode</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">nodejs-repl</span>
  <span class="nb">:init</span>
  <span class="nb">:defer</span> <span class="no">t</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-to-load-path</span> <span class="s">&#34;~/.spacemacs.d/package/nodejs-repl-eval&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">nodejs-repl-eval</span>
  <span class="nb">:commands</span> <span class="p">(</span><span class="nv">nodejs-repl-eval-buffer</span> <span class="nv">nodejs-repl-eval-dwim</span> <span class="nv">nodejs-repl-eval-function</span><span class="p">)</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nb">progn</span>
    <span class="p">(</span><span class="nv">spacemacs/declare-prefix-for-mode</span> <span class="ss">&#39;js2-mode</span>
                                       <span class="s">&#34;mo&#34;</span> <span class="s">&#34;Nodejs-repl&#34;</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">spacemacs/set-leader-keys-for-major-mode</span> <span class="ss">&#39;js2-mode</span>
      <span class="s">&#34;oo&#34;</span> <span class="ss">&#39;nodejs-repl</span>
      <span class="s">&#34;ob&#34;</span> <span class="ss">&#39;nodejs-repl-eval-buffer</span>
      <span class="s">&#34;of&#34;</span> <span class="ss">&#39;nodejs-repl-eval-function</span>
      <span class="s">&#34;od&#34;</span> <span class="ss">&#39;nodejs-repl-eval-dwim</span><span class="p">))</span>
  <span class="nb">:defer</span> <span class="no">t</span>
  <span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="elisp-enhanced"><span class="section-num">6.6</span> Elisp enhanced</h3>

<h4 id="emacs-lisp-自动配对问题"><span class="section-num">6.6.1</span> Emacs Lisp 自动配对问题</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">sp-local-pair</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">emacs-lisp-mode</span> <span class="nv">lisp-interaction-mode</span><span class="p">)</span> <span class="s">&#34;&#39;&#34;</span> <span class="no">nil</span> <span class="nb">:actions</span> <span class="no">nil</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="external-package-besides-spacemacs"><span class="section-num">7</span> External package besides spacemacs</h2>

<h3 id="use-emmet-mode-to-add-zen-coding-support"><span class="section-num">7.1</span> Use emmet-mode to add Zen Coding support</h3>

<p><a href="https://github.com/smihica/emmet-mode">emmet-mode</a> is a fork of <a href="https://github.com/rooney/zencoding">zencoding-mode</a> which add minor mode providing support
for Zen Coding by producing HTML from CSS-like selectors.</p>

<p>GitHub: <a href="https://github.com/smihica/emmet-mode">https://github.com/smihica/emmet-mode</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">req-package</span> <span class="nv">emmet-mode</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">progn</span>
    <span class="c1">;; Following mode support emmet-mode</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;html-mode-hook</span> <span class="ss">&#39;emmet-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;sgml-mode-hook</span> <span class="ss">&#39;emmet-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;nxml-mode-hook</span> <span class="ss">&#39;emmet-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;css-mode-hook</span>  <span class="ss">&#39;emmet-mode</span><span class="p">)</span>

    <span class="c1">;; Move cursor between quotes after expand</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;emmt-mode-hook</span>
              <span class="o">&#39;</span><span class="p">(</span><span class="nb">lambda</span><span class="p">()</span>
                 <span class="p">(</span><span class="nb">setq</span> <span class="nv">emmet-move-cursor-between-quotes</span> <span class="no">t</span><span class="p">)))</span>

    <span class="c1">;; Make tab can also expand emmt instead of use yasnippet directly</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emmt-mode-keymap</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;TAB&#34;</span><span class="p">)</span> <span class="ss">&#39;emmt-expand-yas</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emmt-mode-keymap</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;tab&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;emmt-expand-yas</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="hungry-delete"><span class="section-num">7.2</span> Hungry-delete</h3>

<p><a href="https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-hungry-delete.el">https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-hungry-delete.el</a></p>

<p><a href="https://github.com/nflath/hungry-delete">hungry-delete</a> borrows hungry deletion from <code>cc-mode</code>, which will causes deletion
to delete all whitespace in the direction you are deleting.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">hungry-delete</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">progn</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">hungry-delete-chars-to-skip</span> <span class="s">&#34; \t\r\f\v&#34;</span><span class="p">)</span>

    <span class="c1">;; Mon Nov 21 08:45:42 EST 2016 - kmodi</span>
    <span class="c1">;; Override the default definitions of `hungry-delete-skip-ws-forward&#39; and</span>
    <span class="c1">;; `hungry-delete-skip-ws-backward&#39;; do not delete back-slashes at EOL.</span>
    <span class="p">(</span><span class="nb">defun</span> <span class="nv">hungry-delete-skip-ws-forward</span> <span class="p">()</span>
      <span class="s">&#34;Skip over any whitespace following point.
</span><span class="s">This function skips over horizontal and vertical whitespace.&#34;</span>
      <span class="p">(</span><span class="nf">skip-chars-forward</span> <span class="nv">hungry-delete-chars-to-skip</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">get-text-property</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="ss">&#39;read-only</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">backward-char</span><span class="p">)))</span>

    <span class="p">(</span><span class="nb">defun</span> <span class="nv">hungry-delete-skip-ws-backward</span> <span class="p">()</span>
      <span class="s">&#34;Skip over any whitespace preceding point.
</span><span class="s">This function skips over horizontal and vertical whitespace.&#34;</span>
      <span class="p">(</span><span class="nf">skip-chars-backward</span> <span class="nv">hungry-delete-chars-to-skip</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">get-text-property</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="ss">&#39;read-only</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">forward-char</span><span class="p">)))</span>

    <span class="p">(</span><span class="nb">defun</span> <span class="nv">modi/turn-off-hungry-delete-mode</span> <span class="p">()</span>
      <span class="s">&#34;Turn off hungry delete mode.&#34;</span>
      <span class="p">(</span><span class="nv">hungry-delete-mode</span> <span class="mi">-1</span><span class="p">))</span>

    <span class="c1">;; Enable `hungry-delete-mode&#39; everywhere ..</span>
    <span class="p">(</span><span class="nv">global-hungry-delete-mode</span><span class="p">)</span>

    <span class="c1">;; Except ..</span>
    <span class="c1">;; `hungry-delete-mode&#39;-loaded backspace does not work in `wdired-mode&#39;,</span>
    <span class="c1">;; i.e. when editing file names in the *Dired* buffer.</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;wdired-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">modi/turn-off-hungry-delete-mode</span><span class="p">)</span>
    <span class="c1">;; and in python-mode-hook</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">modi/turn-off-hungry-delete-mode</span><span class="p">)</span>
    <span class="c1">;; and in minibuffer</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;minibuffer-setup-hook</span> <span class="nf">#&#39;</span><span class="nv">modi/turn-off-hungry-delete-mode</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="pangu-spacing"><span class="section-num">7.3</span> Pangu-spacing</h3>

<p><code>pangu-spcing</code> is an minor-mode to auto add space between Chinese and English characters. Note that these white-space characters are not really added to the contents, it just like to do so.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">req-package</span> <span class="nv">pangu-spacing</span>
  <span class="nb">:init</span>
  <span class="p">(</span><span class="nb">progn</span>
    <span class="c1">;; start pangu-spacing globally</span>
    <span class="p">(</span><span class="nv">global-pangu-spacing-mode</span> <span class="mi">-1</span><span class="p">)</span>
    <span class="c1">;; Always insert `real&#39; space in org-mode.</span>
    <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span>
              <span class="o">&#39;</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
                 <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;pangu-spacing-real-insert-separtor</span><span class="p">)</span> <span class="no">t</span><span class="p">)))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="blog-setting"><span class="section-num">7.4</span> Blog setting</h3>

<h4 id="hugo"><span class="section-num">7.4.1</span> Hugo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/easy-hugo</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">evil-define-key</span>
    <span class="p">(</span><span class="nf">list</span> <span class="ss">&#39;normal</span> <span class="ss">&#39;insert</span> <span class="ss">&#39;visual</span> <span class="ss">&#39;motion</span><span class="p">)</span>
    <span class="nv">easy-hugo-mode-map</span>
    <span class="s">&#34;n&#34;</span> <span class="ss">&#39;easy-hugo-newpost</span>
    <span class="s">&#34;D&#34;</span> <span class="ss">&#39;easy-hugo-article</span>
    <span class="s">&#34;p&#34;</span> <span class="ss">&#39;easy-hugo-preview</span>
    <span class="s">&#34;P&#34;</span> <span class="ss">&#39;easy-hugo-publish</span>
    <span class="s">&#34;o&#34;</span> <span class="ss">&#39;easy-hugo-open</span>
    <span class="s">&#34;d&#34;</span> <span class="ss">&#39;easy-hugo-delete</span>
    <span class="s">&#34;e&#34;</span> <span class="ss">&#39;easy-hugo-open</span>
    <span class="s">&#34;c&#34;</span> <span class="ss">&#39;easy-hugo-open-config</span>
    <span class="s">&#34;f&#34;</span> <span class="ss">&#39;easy-hugo-open</span>
    <span class="s">&#34;N&#34;</span> <span class="ss">&#39;easy-hugo-no-help</span>
    <span class="s">&#34;v&#34;</span> <span class="ss">&#39;easy-hugo-view</span>
    <span class="s">&#34;r&#34;</span> <span class="ss">&#39;easy-hugo-refresh</span>
    <span class="s">&#34;g&#34;</span> <span class="ss">&#39;easy-hugo-refresh</span>
    <span class="s">&#34;s&#34;</span> <span class="ss">&#39;easy-hugo-sort-time</span>
    <span class="s">&#34;S&#34;</span> <span class="ss">&#39;easy-hugo-sort-char</span>
    <span class="s">&#34;G&#34;</span> <span class="ss">&#39;easy-hugo-github-deploy</span>
    <span class="s">&#34;A&#34;</span> <span class="ss">&#39;easy-hugo-amazon-s3-deploy</span>
    <span class="s">&#34;C&#34;</span> <span class="ss">&#39;easy-hugo-google-cloud-storage-deploy</span>
    <span class="s">&#34;q&#34;</span> <span class="ss">&#39;evil-delete-buffer</span>
    <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;TAB&#34;</span><span class="p">)</span> <span class="ss">&#39;easy-hugo-open</span>
    <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;RET&#34;</span><span class="p">)</span> <span class="ss">&#39;easy-hugo-preview</span><span class="p">)</span>
  <span class="p">)</span>

<span class="c1">;; (add-hook &#39;org-mode-hook &#39;org-hugo-auto-export-mode)</span>
<span class="p">(</span><span class="nb">use-package</span> <span class="nv">easy-hugo</span>
  <span class="c1">;; :after (helm-ag)</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:config</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">easy-hugo-basedir</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Blog-lengyue/&#34;</span>
        <span class="nv">easy-hugo-postdir</span> <span class="s">&#34;content/zh-cn&#34;</span>
        <span class="nv">easy-hugo-url</span> <span class="s">&#34;http://127.0.0.1:1313&#34;</span>
        <span class="nv">easy-hugo-preview-url</span> <span class="s">&#34;http://127.0.0.1:1313&#34;</span>
        <span class="nv">easy-hugo-sshdomain</span> <span class="s">&#34;me&#34;</span>
        <span class="nv">easy-hugo-root</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Blog-lengyue/&#34;</span>
        <span class="nv">easy-hugo-default-text</span> <span class="s">&#34;.md&#34;</span>
        <span class="nv">easy-hugo-previewtime</span> <span class="s">&#34;20&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;easy-hugo-mode-hook</span> <span class="ss">&#39;lengyueyang/easy-hugo</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ob&#34;</span> <span class="ss">&#39;easy-hugo</span><span class="p">))</span>


<span class="p">(</span><span class="nb">setq</span> <span class="nv">hugo-dir</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Blog-lengyue/public&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/hugo-publish</span> <span class="p">(</span><span class="nv">commit-msg</span><span class="p">)</span>
  <span class="s">&#34;git add . &amp; git commit &amp; git push&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;sInput commit message:&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">async-shell-command</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;cd %s ; rm -rf * ; hugo ; git add . ; git commit -m \&#34;update\&#34; ; git push&#34;</span>
                               <span class="nv">hugo-dir</span>
                               <span class="nv">commit-msg</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h4 id="bolg-admin"><span class="section-num">7.4.2</span> Bolg-admin</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; (add-to-load-path &#34;~/.spacemacs.d/package/blog-admin&#34;)</span>

<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;blog-admin</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;ob&#34;</span> <span class="ss">&#39;blog-admin-start</span><span class="p">)</span>

<span class="c1">;;  (setq blog-admin-backend-type &#39;org-page)</span>
<span class="c1">;;  (setq blog-admin-backend-path &#34;~/MEGA/Emacs-lengyue/Blog-lengyue/source&#34;)</span>
<span class="c1">;;  (setq blog-admin-backend-new-post-in-drafts t)</span>
<span class="c1">;;  (setq blog-admin-backend-new-post-with-same-name-dir t)</span>
<span class="c1">;;  (setq blog-admin-backend-org-page-drafts &#34;_drafts&#34;)</span>

<span class="c1">;;  (setq op/repository-directory &#34;~/MEGA/Emacs-lengyue/Blog-lengyue/source&#34;)</span>
<span class="c1">;;  (setq op/site-domain &#34;http://lengyueyang.github.io&#34;)</span>
<span class="c1">;;  (setq op/personal-disqus-shortname &#34;lengyueyang&#34;)</span>

<span class="c1">;; (setq blog-admin-backend-type &#39;hexo)</span>
<span class="c1">;; (setq blog-admin-backend-path &#34;~/MEGA/Emacs-lengyue/Blog-lengyue/&#34;)</span>
<span class="c1">;; (setq blog-admin-backend-new-post-in-drafts t)</span>
<span class="c1">;; (setq blog-admin-backend-new-post-with-same-name-dir t)</span>

<span class="p">(</span><span class="nb">setq</span> <span class="nv">blog-admin-backend-type</span> <span class="ss">&#39;nikola</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">blog-admin-backend-path</span> <span class="s">&#34;~/MEGA/Emacs-lengyue/Blog-lengyue&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">blog-admin-backend-new-post-in-drafts</span> <span class="no">t</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">blog-admin-backend-nikola-executable</span> <span class="s">&#34;/usr/bin/nikola&#34;</span><span class="p">)</span> <span class="c1">;; path to nikola executable</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">blog-admin-backend-nikola-config-file</span> <span class="s">&#34;conf.py&#34;</span><span class="p">)</span> <span class="c1">;; conf.py is default</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="use-emms-to-play-music"><span class="section-num">7.5</span> Use emms to play music</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; https://github.com/tumashu/emacs-helper/blob/master/eh-emms.el</span>

<span class="p">(</span><span class="nb">use-package</span> <span class="nv">emms</span>
  <span class="nb">:config</span>

  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">emms-setup</span>
    <span class="nb">:ensure</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">emms-info-libtag</span>
    <span class="nb">:ensure</span> <span class="no">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">dired</span>
    <span class="nb">:ensure</span> <span class="no">nil</span><span class="p">)</span>
  <span class="c1">;; (use-package chinese-pyim)</span>

  <span class="p">(</span><span class="nv">emms-devel</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">emms-default-players</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;emms-cache</span><span class="p">)</span> <span class="p">(</span><span class="nv">emms-cache</span> <span class="mi">1</span><span class="p">))</span>

  <span class="p">(</span><span class="nv">emms-history-load</span><span class="p">)</span>
  <span class="c1">;; EMMS 目录</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-source-file-default-directory</span> <span class="s">&#34;~/Music/Lengyueyang-music&#34;</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="nv">emms-source-file-default-directory</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">make-directory</span> <span class="p">(</span><span class="nf">file-name-as-directory</span> <span class="nv">emms-source-file-default-directory</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-directory</span> <span class="s">&#34;~/Music/.emms/&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-history-file</span> <span class="s">&#34;~/Music/.emms/history&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-cache-file</span> <span class="s">&#34;~/Music/.emms/cache&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-stream-bookmarks-file</span> <span class="s">&#34;~/Music/.emms/streams&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-score-file</span> <span class="s">&#34;~/Music/.emms/scores&#34;</span><span class="p">)</span>

  <span class="c1">;; 设定 EMMS 主模式为 Playlist 模式</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-playlist-default-major-mode</span> <span class="ss">&#39;emms-playlist-mode</span><span class="p">)</span>

  <span class="c1">;; 修复播放完后的 BUG</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-player-next-function</span> <span class="ss">&#39;emms-next</span><span class="p">)</span>

  <span class="c1">;; 设定音轨初始化信息</span>
  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;emms-track-initialize-functions</span> <span class="ss">&#39;emms-info-initialize-track</span><span class="p">)</span>

  <span class="c1">;; 关闭 EMMS 信息异步模式</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-info-asynchronously</span> <span class="no">nil</span><span class="p">)</span>

  <span class="c1">;; 设定 EMMS 启动列表循环播放</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-repeat-playlist</span> <span class="no">t</span><span class="p">)</span>

  <span class="c1">;; 排序方法: 艺术家 -&gt; 专辑 -&gt; 序号</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-playlist-sort-function</span>
        <span class="ss">&#39;emms-playlist-sort-by-natural-order</span><span class="p">)</span>

  <span class="c1">;; 使用 Gnu find 查找文件</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-source-file-directory-tree-function</span>
        <span class="ss">&#39;emms-source-file-directory-tree-find</span><span class="p">)</span>

  <span class="c1">;; 在 minibuffer 中显示播放信息(emms-show)</span>
  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;emms-player-started-hook</span> <span class="ss">&#39;emms-show</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-show-format</span> <span class="s">&#34;正在播放: [%s]&#34;</span><span class="p">)</span>

  <span class="c1">;;设置 Mode-line 的显示方式</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-mode-line-format</span> <span class="s">&#34;%s&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-playing-time-display-format</span> <span class="s">&#34;%s ]&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">global-mode-string</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34; &#34;</span> <span class="nv">emms-mode-line-string</span> <span class="s">&#34; &#34;</span> <span class="nv">emms-playing-time-string</span> <span class="s">&#34; &#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-mode-line-mode-line-function</span>
        <span class="ss">&#39;eh-emms-mode-line-playlist-current</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-mode-line-playlist-current</span> <span class="p">()</span>
    <span class="s">&#34;Format the currently playing.&#34;</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">track</span> <span class="p">(</span><span class="nv">emms-playlist-current-selected-track</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;file</span> <span class="p">(</span><span class="nv">emms-track-type</span> <span class="nv">track</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-artist</span><span class="p">)</span>
                   <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-title</span><span class="p">))</span>
              <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">art</span>  <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-artist</span><span class="p">))</span>
                    <span class="p">(</span><span class="nv">tit</span>  <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-title</span><span class="p">)))</span>
                <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;[ %s -- %s&#34;</span> <span class="nv">art</span> <span class="nv">tit</span><span class="p">))</span>
            <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;[ %s&#34;</span>
                    <span class="p">(</span><span class="nv">file-relative-name</span> <span class="p">(</span><span class="nv">emms-track-name</span> <span class="nv">track</span><span class="p">)</span>
                                        <span class="nv">emms-source-file-default-directory</span><span class="p">))))))</span>

  <span class="c1">;; 显示歌词</span>
  <span class="p">(</span><span class="nv">emms-lyrics</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-lyrics-display-on-modeline</span> <span class="no">t</span><span class="p">)</span>


  <span class="c1">;; Function used to format track</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-track-description-function</span>
        <span class="nf">#&#39;</span><span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">track</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34; &#34;</span> <span class="p">(</span><span class="nv">eh-emms-make-track-description</span> <span class="nv">track</span><span class="p">))))</span>

  <span class="c1">;; 设置 Playlist 的显示方式</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-last-played-format-alist</span>
        <span class="o">&#39;</span><span class="p">(((</span><span class="nv">emms-last-played-seconds-today</span><span class="p">)</span> <span class="o">.</span> <span class="s">&#34;%H:%M&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="mi">604800</span>                           <span class="o">.</span> <span class="s">&#34;%H:%M&#34;</span><span class="p">)</span>
          <span class="p">((</span><span class="nv">emms-last-played-seconds-month</span><span class="p">)</span> <span class="o">.</span> <span class="s">&#34;%d&#34;</span><span class="p">)</span>
          <span class="p">((</span><span class="nv">emms-last-played-seconds-year</span><span class="p">)</span>  <span class="o">.</span> <span class="s">&#34;%m-%d&#34;</span><span class="p">)</span>
          <span class="p">(</span><span class="no">t</span>                                <span class="o">.</span> <span class="s">&#34;%Y&#34;</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-make-track-description</span> <span class="p">(</span><span class="nv">track</span><span class="p">)</span>
    <span class="s">&#34;Return a description of the current track.&#34;</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">track-type</span> <span class="p">(</span><span class="nv">emms-track-type</span> <span class="nv">track</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">play-count</span> <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;play-count</span><span class="p">)</span> <span class="mi">0</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">last-played</span> <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;last-played</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)))</span>
          <span class="p">(</span><span class="nv">name</span> <span class="p">(</span><span class="nv">emms-track-name</span> <span class="nv">track</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">pmin</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-playing-time-min</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">psec</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-playing-time-sec</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">ptot</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-playing-time</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">title</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-title</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">artist</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-artist</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">album</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-album</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;file</span> <span class="nv">track-type</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%5s %3s |-&gt; %-s&#34;</span>
                  <span class="p">(</span><span class="nv">emms-last-played-format-date</span> <span class="nv">last-played</span><span class="p">)</span>
                  <span class="nv">play-count</span>
                  <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nb">and</span> <span class="nv">pmin</span> <span class="nv">psec</span><span class="p">)</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s %s -- %s [%02d:%02d]&#34;</span> <span class="nv">artist</span> <span class="nv">album</span> <span class="nv">title</span> <span class="nv">pmin</span> <span class="nv">psec</span><span class="p">))</span>
                        <span class="p">(</span><span class="nv">ptot</span> <span class="p">(</span><span class="nf">format</span>  <span class="s">&#34;%s %s -- %s [%02d:%02d]&#34;</span> <span class="nv">artist</span> <span class="nv">album</span> <span class="nv">title</span> <span class="p">(</span><span class="nf">/</span> <span class="nv">ptot</span> <span class="mi">60</span><span class="p">)</span> <span class="p">(</span><span class="nf">%</span> <span class="nv">ptot</span> <span class="mi">60</span><span class="p">)))</span>
                        <span class="p">(</span><span class="no">t</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s %s -- %s&#34;</span> <span class="nv">artist</span> <span class="nv">album</span>  <span class="nv">title</span><span class="p">)))))))</span>


  <span class="c1">;; Function used to get music tags, for example IDv2.3!</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-info-functions</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">eh-emms-info-libtag</span> <span class="nv">eh-emms-info-add-pinyin-alias</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-info-libtag</span> <span class="p">(</span><span class="nv">track</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;file</span> <span class="p">(</span><span class="nv">emms-track-type</span> <span class="nv">track</span><span class="p">))</span>
               <span class="p">(</span><span class="nf">string-match</span>
                <span class="s">&#34;\\.\\([Mm][Pp]3\\|[oO][gG][gG]\\|[fF][lL][aA][cC]\\|[sS][pP][xX]\\)\\&#39;&#34;</span>
                <span class="p">(</span><span class="nv">emms-track-name</span> <span class="nv">track</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">info-list</span>
             <span class="p">(</span><span class="nv">split-string</span> <span class="p">(</span><span class="nv">file-relative-name</span>
                            <span class="p">(</span><span class="nv">emms-track-name</span> <span class="nv">track</span><span class="p">)</span>
                            <span class="nv">emms-source-file-default-directory</span><span class="p">)</span> <span class="s">&#34;/&#34;</span> <span class="no">t</span><span class="p">)))</span>
        <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-artist</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">info-list</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">0</span> <span class="nv">info-list</span><span class="p">)</span> <span class="s">&#34;未知艺术家&#34;</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-album</span>  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">info-list</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">1</span> <span class="nv">info-list</span><span class="p">)</span> <span class="s">&#34;杂项&#34;</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-title</span> <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nf">reverse</span> <span class="nv">info-list</span><span class="p">))))</span>
      <span class="p">(</span><span class="nb">with-temp-buffer</span>
        <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">string=</span> <span class="s">&#34;0&#34;</span>
                       <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s&#34;</span> <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">coding-system-for-read</span> <span class="ss">&#39;utf-8</span><span class="p">))</span>
                                      <span class="p">(</span><span class="nf">call-process</span> <span class="nv">emms-info-libtag-program-name</span>
                                                    <span class="no">nil</span> <span class="o">&#39;</span><span class="p">(</span><span class="no">t</span> <span class="no">nil</span><span class="p">)</span> <span class="no">nil</span>
                                                    <span class="p">(</span><span class="nv">emms-track-name</span> <span class="nv">track</span><span class="p">)))))</span>
          <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
          <span class="c1">;; Crush the trailing whitespace</span>
          <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&#34;[[:space:]]+$&#34;</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">replace-match</span> <span class="s">&#34;&#34;</span> <span class="no">nil</span> <span class="no">nil</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">looking-at</span> <span class="s">&#34;^\\([^=\n]+\\)=\\(.*\\)$&#34;</span><span class="p">)</span>
            <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">name</span> <span class="p">(</span><span class="nf">intern-soft</span> <span class="p">(</span><span class="nv">match-string</span> <span class="mi">1</span><span class="p">)))</span>
                  <span class="p">(</span><span class="nv">value</span> <span class="p">(</span><span class="nv">match-string</span> <span class="mi">2</span><span class="p">)))</span>
              <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">value</span><span class="p">)</span>
                       <span class="mi">0</span><span class="p">)</span>
                <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span>
                                <span class="nv">name</span>
                                <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">name</span> <span class="ss">&#39;info-playing-time</span><span class="p">)</span>
                                    <span class="p">(</span><span class="nf">string-to-number</span> <span class="nv">value</span><span class="p">)</span>
                                  <span class="nv">value</span><span class="p">))))</span>
            <span class="p">(</span><span class="nf">forward-line</span> <span class="mi">1</span><span class="p">))))))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-info-add-pinyin-alias</span> <span class="p">(</span><span class="nv">track</span><span class="p">)</span>
    <span class="s">&#34;Add pinyin alias to the track&#34;</span>
    <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">featurep</span> <span class="ss">&#39;chinese-pyim</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">eq</span> <span class="ss">&#39;file</span> <span class="p">(</span><span class="nv">emms-track-type</span> <span class="nv">track</span><span class="p">)))</span>
      <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-artist-alias</span> <span class="p">(</span><span class="nv">pyim-hanzi2pinyin</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-artist</span><span class="p">)</span> <span class="no">t</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-album-alias</span> <span class="p">(</span><span class="nv">pyim-hanzi2pinyin</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-album</span><span class="p">)</span> <span class="no">t</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">emms-track-set</span> <span class="nv">track</span> <span class="ss">&#39;info-title-alias</span> <span class="p">(</span><span class="nv">pyim-hanzi2pinyin</span> <span class="p">(</span><span class="nv">emms-track-get</span> <span class="nv">track</span> <span class="ss">&#39;info-title</span><span class="p">)</span> <span class="no">t</span><span class="p">))))</span>

  <span class="c1">;; 设置 EMMS 浏览器, 默认显示方式为: 显示所有</span>
  <span class="p">(</span><span class="nv">emms-browser-set-filter</span> <span class="p">(</span><span class="nf">assoc</span> <span class="s">&#34;EVERYTHING&#34;</span> <span class="nv">emms-browser-filters</span><span class="p">))</span>
  <span class="c1">;; filter: 显示所有</span>
  <span class="p">(</span><span class="nv">emms-browser-make-filter</span> <span class="s">&#34;EVERYTHING&#34;</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
  <span class="c1">;; filter: 只显示文件</span>
  <span class="p">(</span><span class="nv">emms-browser-make-filter</span> <span class="s">&#34;ALL-FILES&#34;</span> <span class="p">(</span><span class="nv">emms-browser-filter-only-type</span> <span class="ss">&#39;file</span><span class="p">))</span>
  <span class="c1">;; filter: 最近一个星期播放的</span>
  <span class="p">(</span><span class="nv">emms-browser-make-filter</span> <span class="s">&#34;LAST-WEEK&#34;</span> <span class="p">(</span><span class="nv">emms-browser-filter-only-recent</span> <span class="mi">7</span><span class="p">))</span>
  <span class="c1">;; filter: 最近一个月都没有播放的</span>
  <span class="p">(</span><span class="nv">emms-browser-make-filter</span> <span class="s">&#34;LAST-MONTH-NOT-PLAYED&#34;</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">track</span><span class="p">)</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">funcall</span> <span class="p">(</span><span class="nv">emms-browser-filter-only-recent</span> <span class="mi">30</span><span class="p">)</span> <span class="nv">track</span><span class="p">))))</span>
  <span class="c1">;; EMMS 浏览器, 删除文件不提醒</span>
  <span class="p">(</span><span class="nf">put</span> <span class="ss">&#39;emms-browser-delete-files</span> <span class="ss">&#39;disabled</span> <span class="no">nil</span><span class="p">)</span>

  <span class="c1">;; 设置 emms buffer 显示格式</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-browser-info-artist-format</span> <span class="s">&#34;* %n&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-browser-info-album-format</span>  <span class="s">&#34;  - %n&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-browser-info-title-format</span>  <span class="s">&#34;    ♪. %n&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">emms-browser-playlist-info-title-format</span> <span class="s">&#34;%n&#34;</span><span class="p">)</span>

  <span class="c1">;; 自定义 emms-browser-add-tracks, 禁止在 playlist 文件中添加</span>
  <span class="c1">;; artist 行 和 album 行，同时使 emacs-browser-playlist-*-*-format</span>
  <span class="c1">;; 中 &#34;%i&#34;位置符失效</span>
  <span class="c1">;;</span>
  <span class="c1">;; 注: emms-browser-playlist-info-artist-format</span>
  <span class="c1">;;     emms-browser-playlist-info-album-format</span>
  <span class="c1">;;     两个变量设置在这里不起作用</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-add-tracks</span> <span class="p">()</span>
    <span class="s">&#34;Add all tracks at point.
</span><span class="s">Return the previous point-max before adding.&#34;</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">first-new-track</span> <span class="p">(</span><span class="nv">with-current-emms-playlist</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">)))</span>
          <span class="p">(</span><span class="nv">bdata</span> <span class="p">(</span><span class="nv">emms-browser-bdata-at-point</span><span class="p">)))</span>
      <span class="p">(</span><span class="nv">eh-emms-browser-playlist-insert-bdata</span> <span class="nv">bdata</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">run-hook-with-args</span> <span class="ss">&#39;emms-browser-tracks-added-hook</span>
                          <span class="nv">first-new-track</span><span class="p">)</span>
      <span class="nv">first-new-track</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-playlist-insert-bdata</span> <span class="p">(</span><span class="nv">bdata</span><span class="p">)</span>
    <span class="s">&#34;Add all tracks in BDATA to the playlist.&#34;</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">type</span> <span class="p">(</span><span class="nv">emms-browser-bdata-type</span> <span class="nv">bdata</span><span class="p">)))</span>
      <span class="c1">;; recurse or add tracks</span>
      <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">item</span> <span class="p">(</span><span class="nv">emms-browser-bdata-data</span> <span class="nv">bdata</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">type</span> <span class="ss">&#39;info-title</span><span class="p">))</span>
            <span class="p">(</span><span class="nv">eh-emms-browser-playlist-insert-bdata</span> <span class="nv">item</span><span class="p">)</span>
          <span class="p">(</span><span class="nv">emms-browser-playlist-insert-track</span> <span class="nv">bdata</span><span class="p">)))))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-make-name</span> <span class="p">(</span><span class="nv">entry</span> <span class="nv">type</span><span class="p">)</span>
    <span class="s">&#34;Override </span><span class="ss">`emms-browser-make-name&#39;</span><span class="s">. Return a name for ENTRY, used for making a bdata object.&#34;</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">key</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">entry</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">track</span> <span class="p">(</span><span class="nv">cadr</span> <span class="nv">entry</span><span class="p">))</span>
          <span class="nv">artist</span> <span class="nv">title</span><span class="p">)</span> <span class="c1">;; only the first track</span>
      <span class="p">(</span><span class="nb">cond</span>
       <span class="p">((</span><span class="nf">eq</span> <span class="nv">type</span> <span class="ss">&#39;info-title</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">eh-emms-make-track-description</span> <span class="nv">track</span><span class="p">))</span>
       <span class="p">(</span><span class="no">t</span> <span class="nv">key</span><span class="p">))))</span>

  <span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;emms-browser-make-name</span> <span class="nb">:override</span> <span class="nf">#&#39;</span><span class="nv">eh-emms-browser-make-name</span><span class="p">)</span>

  <span class="c1">;; 快捷函数</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-toggle-playing</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">if</span> <span class="nv">emms-player-playing-p</span>
        <span class="p">(</span><span class="nv">emms-pause</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">emms-start</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-search</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">call-interactively</span> <span class="ss">&#39;isearch-forward</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nf">null</span> <span class="nv">emms-playlist-buffer</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">buffer-live-p</span> <span class="nv">emms-playlist-buffer</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">playlist</span> <span class="p">(</span><span class="nf">concat</span>
                         <span class="p">(</span><span class="nf">file-name-as-directory</span> <span class="nv">emms-source-file-default-directory</span><span class="p">)</span>
                         <span class="s">&#34;default.playlist&#34;</span><span class="p">)))</span>
          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">file-readable-p</span> <span class="nv">playlist</span><span class="p">))</span>
              <span class="p">(</span><span class="nv">eh-emms-add-directory-tree</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">emms-add-playlist</span> <span class="nv">playlist</span><span class="p">))))</span>
    <span class="p">(</span><span class="nv">emms-playlist-mode-go</span><span class="p">))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-add-directory-tree</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">emms-add-directory-tree</span>
     <span class="p">(</span><span class="nv">ido-read-directory-name</span>
      <span class="s">&#34;Add directory tree:&#34;</span>
      <span class="nv">emms-source-file-default-directory</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-add-file</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">file</span> <span class="p">(</span><span class="nv">ido-read-file-name</span>
                 <span class="s">&#34;Add directory tree:&#34;</span>
                 <span class="nv">emms-source-file-default-directory</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">cond</span>
       <span class="p">((</span><span class="nf">string-match</span> <span class="s">&#34;\\.\\(m3u\\|pls\\)\\&#39;&#34;</span> <span class="nv">file</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">emms-add-playlist</span> <span class="nv">file</span><span class="p">))</span>
       <span class="p">(</span><span class="no">t</span> <span class="p">(</span><span class="nv">emms-add-file</span> <span class="nv">file</span><span class="p">)))))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-search-by-names</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">emms-browser-search</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">info-artist</span> <span class="nv">info-artist-alias</span> <span class="nv">info-title</span> <span class="nv">info-title-alias</span> <span class="nv">info-album</span> <span class="nv">info-album-alias</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-search-by-artist</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">emms-browser-search</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">info-artist</span> <span class="nv">info-artist-alias</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">eh-emms-browser-search-by-title</span> <span class="p">()</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">emms-browser-search</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">info-title</span> <span class="nv">info-title-alias</span><span class="p">)))</span>

  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;emms-info-functions</span> <span class="ss">&#39;emms-info-cueinfo</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">evil-add-hjkl-bindings</span> <span class="nv">emms-playlist-mode-map</span> <span class="ss">&#39;emacs</span><span class="p">)</span>
  <span class="c1">;; Global keybinding for emms</span>
  <span class="p">(</span><span class="nv">global-unset-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e e&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e d&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-add-directory-tree</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e f&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-add-file</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-toggle-playing</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e q&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-stop</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e n&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-next</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e p&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-previous</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e o&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-show</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e h&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-shuffle</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e H&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-sort</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e r&#34;</span><span class="p">)</span>   <span class="ss">&#39;emms-toggle-repeat-track</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e R&#34;</span><span class="p">)</span>   <span class="ss">&#39;emms-toggle-repeat-playlist</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e s u&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-up-playing</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e s d&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-down-playing</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c e s o&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-show-playing</span><span class="p">)</span>

  <span class="c1">;; browser mode map</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-next-non-track</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;return&gt;&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
                                                       <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
                                                       <span class="p">(</span><span class="nv">eh-emms-browser-add-tracks</span><span class="p">)</span>
                                                       <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Add current track to playlist&#34;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-next-non-track</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;tab&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-toggle-subitems</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;o&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-playlist-mode-go</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;w&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-show-LAST-WEEK</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;a&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-show-EVERYTHING</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;m&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-show-LAST-MONTH-NOT-PLAYED</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s s&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-browser-search-by-names</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s a&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-browser-search-by-artist</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-browser-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s t&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-browser-search-by-title</span><span class="p">)</span>

  <span class="c1">;; playlist-mode-map</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;o&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-browser-show-LAST-WEEK</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-pause</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;/&#34;</span><span class="p">)</span> <span class="ss">&#39;eh-emms-search</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;+&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-volume-raise</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;-&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-volume-lower</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-&lt;right&gt;&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">emms-seek</span> <span class="mi">+10</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-&lt;left&gt;&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">emms-seek</span> <span class="mi">-10</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-&lt;right&gt;&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">emms-seek</span> <span class="mi">+60</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-&lt;left&gt;&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">emms-seek</span> <span class="mi">-60</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S u&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-up-file-on-line</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S d&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-down-file-on-line</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S o&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-show-file-on-line</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S l&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-less-tolerant</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S m&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-more-tolerant</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S t&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-set-tolerance</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-key</span> <span class="nv">emms-playlist-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;S s&#34;</span><span class="p">)</span> <span class="ss">&#39;emms-score-show-playing</span><span class="p">))</span>

<span class="c1">;; https://www.gnu.org/software/emms/manual/#Introduction</span>
<span class="c1">;; (require &#39;emms-setup)</span>
<span class="c1">;; (emms-all)</span>
<span class="c1">;; (emms-default-players)</span>

<span class="c1">;; (setq emms-directory &#34;~/Music/.emms&#34;)</span>
<span class="c1">;; (setq emms-cache-file &#34;~/Music/.emms/cache&#34;)</span>
<span class="c1">;; (setq emms-score-file &#34;~/Music/.emms/scores&#34;)</span>
<span class="c1">;; (setq emms-history-file &#34;~/Music/.emms/history&#34;)</span>
<span class="c1">;; (setq emms-source-file-default-directory &#34;~/Music/&#34;)</span>
<span class="c1">;; (emms-history-load)</span>


<span class="p">(</span><span class="nv">spacemacs/declare-prefix</span> <span class="s">&#34;oe&#34;</span> <span class="s">&#34;Emms-Music&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oee&#34;</span> <span class="ss">&#39;emms</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oea&#34;</span> <span class="ss">&#39;emms-add-directory-tree</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oef&#34;</span> <span class="ss">&#39;emms-play-file</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oes&#34;</span> <span class="ss">&#39;emms-stop</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oen&#34;</span> <span class="ss">&#39;emms-next</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oep&#34;</span> <span class="ss">&#39;emms-previous</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="embrace-evil-embrace"><span class="section-num">7.6</span> Embrace/evil-embrace</h3>

<p><a href="https://github.com/cute-jumper/embrace.el">https://github.com/cute-jumper/embrace.el</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-,&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">embrace-commander</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;or&#34;</span> <span class="ss">&#39;embrace-commander</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;embrace-org-mode-hook</span><span class="p">)</span>
<span class="p">(</span><span class="nv">evil-embrace-enable-evil-surround-integration</span><span class="p">)</span>
<span class="c1">;; (add-hook &#39;org-mode-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (add-to-list &#39;embrace-semantic-units-alist &#39;(?e . er/mark-email))))</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">embrace-org-mode-hook</span> <span class="p">()</span>
  <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">lst</span> <span class="o">&#39;</span><span class="p">((</span><span class="sc">?b</span> <span class="s">&#34;{{{color(blue,&#34;</span> <span class="o">.</span> <span class="s">&#34;)}}}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="sc">?r</span> <span class="s">&#34;{{{color(red,&#34;</span> <span class="o">.</span> <span class="s">&#34;)}}}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="sc">?g</span> <span class="s">&#34;{{{color(green,&#34;</span> <span class="o">.</span> <span class="s">&#34;)}}}&#34;</span><span class="p">)</span>
                 <span class="p">(</span><span class="sc">?/</span> <span class="s">&#34;/&#34;</span> <span class="o">.</span> <span class="s">&#34;/&#34;</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">embrace-add-pair</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">lst</span><span class="p">)</span> <span class="p">(</span><span class="nv">cadr</span> <span class="nv">lst</span><span class="p">)</span> <span class="p">(</span><span class="nv">cddr</span> <span class="nv">lst</span><span class="p">))))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;embrace-org-mode-hook</span><span class="p">)</span>
<span class="c1">;; (embrace-add-pair key left right)</span>
<span class="c1">;; (add-hook &#39;org-mode-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (embrace-add-pair ?b &#34;{{{color(blue,&#34; . &#34;)}}}&#34;)</span>
<span class="c1">;;             (embrace-add-pair ?r &#34;{{{color(red,&#34; . &#34;)}}}&#34;)</span>
<span class="c1">;;             (embrace-add-pair ?g &#34;{{{color(greem,&#34; . &#34;)}}}&#34;)</span>
<span class="c1">;;             ))</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="other-customization"><span class="section-num">8</span> Other customization</h2>

<p>This part is some customization not belong to the anterior part.</p>

<h3 id="column-indicator"><span class="section-num">8.1</span> Column indicator</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;fill-column-indicator</span><span class="p">)</span>
<span class="p">(</span><span class="nb">setq</span> <span class="nv">fci-rule-column</span> <span class="mi">80</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span> <span class="ss">&#39;fci-mode</span><span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;git-commit-mode-hook</span> <span class="ss">&#39;fci-mode</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="disable-auto-paste-from-clipboard"><span class="section-num">8.2</span> Disable auto paste from clipboard</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;spacemacs-buffer-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
<span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;mouse-1-click-follows-link</span><span class="p">)</span> <span class="no">nil</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="truncate-lines-automatically"><span class="section-num">8.3</span> Truncate lines automatically</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;magit-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;R-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="hotspots"><span class="section-num">8.4</span> Hotspots</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/hotspots</span> <span class="p">()</span>
  <span class="s">&#34;helm interface to my hotspots, which includes my locations,
</span><span class="s">org-files and bookmarks&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">helm</span> <span class="nb">:buffer</span> <span class="s">&#34;*helm: utities*&#34;</span>
        <span class="nb">:sources</span> <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nv">lengyueyang//hotspots-sources</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang//hotspots-sources</span> <span class="p">()</span>
  <span class="s">&#34;Construct the helm sources for my hotspots&#34;</span>
  <span class="o">`</span><span class="p">((</span><span class="nv">name</span> <span class="o">.</span> <span class="s">&#34;lengyueyang&#39;s center&#34;</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">candidates</span> <span class="o">.</span> <span class="p">(</span>
                   <span class="p">(</span><span class="s">&#34;Agenda List&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">org-agenda</span> <span class="s">&#34;&#34;</span> <span class="s">&#34;a&#34;</span><span class="p">)))</span>
                   <span class="p">(</span><span class="s">&#34;Agenda Menu&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">org-agenda</span><span class="p">)))</span>
                   <span class="p">(</span><span class="s">&#34;Blog&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span><span class="p">()</span> <span class="p">(</span><span class="nv">easy-hugo</span><span class="p">)))</span>
                   <span class="p">(</span><span class="s">&#34;Elfeed&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">elfeed</span><span class="p">)))</span>
                   <span class="c1">;; (&#34;Agenda Next TODO&#34; . (lambda () (org-agenda &#34;&#34; &#34;t&#34;)))</span>
                   <span class="p">(</span><span class="s">&#34;Open Github&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span><span class="p">()</span> <span class="p">(</span><span class="nv">browse-url</span> <span class="s">&#34;https://github.com/lengyueyang&#34;</span><span class="p">)))</span>
                   <span class="p">(</span><span class="s">&#34;Open Blog&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span><span class="p">()</span> <span class="p">(</span><span class="nv">browse-url</span> <span class="s">&#34;http://lengyueyang.github.io&#34;</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nv">candidate-number-limit</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">action</span> <span class="o">.</span> <span class="p">((</span><span class="s">&#34;Open&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">x</span><span class="p">)))))))</span>

<span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;f1&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;lengyueyang/hotspots</span><span class="p">)</span>
<span class="p">(</span><span class="nv">spacemacs/set-leader-keys</span> <span class="s">&#34;oh&#34;</span> <span class="ss">&#39;lengyueyang/hotspots</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="count-chinese-word"><span class="section-num">8.5</span> Count chinese word</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defvar</span> <span class="nv">wc-regexp-chinese-char-and-punc</span>
  <span class="p">(</span><span class="nb">rx</span> <span class="p">(</span><span class="nv">category</span> <span class="nv">chinese</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">defvar</span> <span class="nv">wc-regexp-chinese-punc</span>
  <span class="s">&#34;[。，！？；：「」『』（）、【】《》〈〉※—]&#34;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defvar</span> <span class="nv">wc-regexp-english-word</span>
  <span class="s">&#34;[a-zA-Z0-9-]+&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">lengyueyang/word-count-for-chinese</span> <span class="p">()</span>
  <span class="s">&#34;「較精確地」統計中 / 日 / 英文字數。
</span><span class="s">- 文章中的註解不算在字數內。
</span><span class="s">- 平假名與片假名亦包含在「中日文字數」內，每個平 / 片假名都算單獨一個字（但片假
</span><span class="s">  名不含連音「ー」）。
</span><span class="s">- 英文只計算「單字數」，不含標點。
</span><span class="s">- 韓文不包含在內。
</span><span class="s">※計算標準太多種了，例如英文標點是否算入、以及可能有不太常用的標點符號沒算入等
</span><span class="s">。且中日文標點的計算標準要看 Emacs 如何定義特殊標點符號如ヴァランタン・アルカン
</span><span class="s">中間的點也被 Emacs 算為一個字而不是標點符號。&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">v-buffer-string</span>
          <span class="p">(</span><span class="nb">progn</span>
            <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">major-mode</span> <span class="ss">&#39;org-mode</span><span class="p">)</span> <span class="c1">; 去掉 org 文件的 OPTIONS（以 #+ 開頭）</span>
                <span class="p">(</span><span class="nb">setq</span> <span class="nv">v-buffer-string</span> <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="s">&#34;^#\\+.+&#34;</span> <span class="s">&#34;&#34;</span>
                                                                <span class="p">(</span><span class="nf">buffer-substring-no-properties</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))))</span>
              <span class="p">(</span><span class="nb">setq</span> <span class="nv">v-buffer-string</span> <span class="p">(</span><span class="nf">buffer-substring-no-properties</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))))</span>
            <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;^ *%s *.+&#34;</span> <span class="nv">comment-start</span><span class="p">)</span> <span class="s">&#34;&#34;</span> <span class="nv">v-buffer-string</span><span class="p">)))</span>
                                        <span class="c1">; 把註解行刪掉（不把註解算進字數）。</span>
         <span class="p">(</span><span class="nv">chinese-char-and-punc</span> <span class="mi">0</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">chinese-punc</span> <span class="mi">0</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">english-word</span> <span class="mi">0</span><span class="p">)</span>
         <span class="p">(</span><span class="nv">chinese-char</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">with-temp-buffer</span>
      <span class="p">(</span><span class="nf">insert</span> <span class="nv">v-buffer-string</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
      <span class="c1">;; 中文（含標點、片假名）</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="nv">wc-regexp-chinese-char-and-punc</span> <span class="no">nil</span> <span class="nb">:no-error</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-char-and-punc</span> <span class="p">(</span><span class="nf">1+</span> <span class="nv">chinese-char-and-punc</span><span class="p">)))</span>
      <span class="c1">;; 中文標點符號</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="nv">wc-regexp-chinese-punc</span> <span class="no">nil</span> <span class="nb">:no-error</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-punc</span> <span class="p">(</span><span class="nf">1+</span> <span class="nv">chinese-punc</span><span class="p">)))</span>
      <span class="c1">;; 英文字數（不含標點）</span>
      <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="nv">wc-regexp-english-word</span> <span class="no">nil</span> <span class="nb">:no-error</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">setq</span> <span class="nv">english-word</span> <span class="p">(</span><span class="nf">1+</span> <span class="nv">english-word</span><span class="p">))))</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-char</span> <span class="p">(</span><span class="nf">-</span> <span class="nv">chinese-char-and-punc</span> <span class="nv">chinese-punc</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">message</span>
     <span class="p">(</span><span class="nf">format</span> <span class="s">&#34; 中日文字數（不含標點）：%s
</span><span class="s"> 中日文字數（包含標點）：%s
</span><span class="s"> 英文字數（不含標點）：%s
</span><span class="s">=======================
</span><span class="s"> 中英文合計（不含標點）：%s&#34;</span>
             <span class="nv">chinese-char</span> <span class="nv">chinese-char-and-punc</span> <span class="nv">english-word</span>
             <span class="p">(</span><span class="nf">+</span> <span class="nv">chinese-char</span> <span class="nv">english-word</span><span class="p">)))))</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="display-calendar-numbers-in-calendar-mode"><span class="section-num">8.6</span> Display Calendar numbers in calendar-mode</h3>

<p>Define a function to display week numbers in <code>calender-mode</code>. The snippet
is from <a href="http://www.emacswiki.org/emacs/CalendarWeekNumbers">EmacsWiki</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">calendar-show-week</span> <span class="p">(</span><span class="nv">arg</span><span class="p">)</span>
  <span class="s">&#34;Displaying week number in calendar-mode.&#34;</span>
  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;P&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">copy-face</span> <span class="nv">font-lock-constant-face</span> <span class="ss">&#39;calendar-iso-week-face</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">set-face-attribute</span>
   <span class="ss">&#39;calendar-iso-week-face</span> <span class="no">nil</span> <span class="nb">:height</span> <span class="mf">0.7</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">calendar-intermonth-text</span>
        <span class="p">(</span><span class="nb">and</span> <span class="nv">arg</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="nf">propertize</span>
               <span class="p">(</span><span class="nf">format</span>
                <span class="s">&#34;%2d&#34;</span>
                <span class="p">(</span><span class="nf">car</span> <span class="p">(</span><span class="nv">calendar-iso-from-absolute</span>
                      <span class="p">(</span><span class="nv">calendar-absolute-from-gregorian</span>
                       <span class="p">(</span><span class="nf">list</span> <span class="nv">month</span> <span class="nv">day</span> <span class="nv">year</span><span class="p">)))))</span>
               <span class="ss">&#39;font-lock-face</span> <span class="ss">&#39;calendar-iso-week-face</span><span class="p">))))</span></code></pre></td></tr></table>
</div>
</div>
<p>Evaluate the <code>calendar-show-week</code> function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">calendar-show-week</span> <span class="no">t</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>Set Monday as the first day of the week, and set my location.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">setq</span> <span class="nv">calendar-week-start-day</span> <span class="mi">1</span>
      <span class="nv">calendar-latitude</span> <span class="mf">39.92</span>
      <span class="nv">calendar-longitude</span> <span class="mf">116.46</span>
      <span class="nv">calendar-location-name</span> <span class="s">&#34;Beijing, China&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="end-of-configuration"><span class="section-num">8.7</span> End of configuration</h3>

<p>Oh YA!! We finish loading emacs configuration :)</p>

<p>However, since we use <code>req-package</code> for loading and installing packages, be sure
to execute following line to send <code>req-package</code> on its merry way.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nv">req-package-finish</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="reference"><span class="section-num">9</span> Reference</h2>

<p>Following link is refrence for my emac config.</p>

<p><code>[1]</code> <a href="https://github.com/r0man/.emacs.d/blob/master/init.el.org">https://github.com/r0man/.emacs.d/blob/master/init.el.org</a></p>

<p><code>[2]</code> <a href="https://github.com/bodil/emacs.d">https://github.com/bodil/emacs.d</a></p>

<p><code>[3]</code> <a href="https://github.com/mgalgs/.emacs.d">https://github.com/mgalgs/.emacs.d</a></p>

<p><code>[4]</code> <a href="https://raw.githubusercontent.com/sbisaacson/literate-emacs/master/README.org">https://raw.githubusercontent.com/sbisaacson/literate-emacs/master/README.org</a></p>

<p><code>[5]</code> <a href="https://github.com/jhenahan/emacs.d/blob/master/emacs-init.org">https://github.com/jhenahan/emacs.d/blob/master/emacs-init.org</a></p>

<p><code>[6]</code> <a href="https://ryuslash.org/dotfiles/emacs/init.html">https://ryuslash.org/dotfiles/emacs/init.html</a></p>

<p><code>[7]</code> <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.org%5F.txt">http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.org%5F.txt</a></p>

<p><code>[8]</code> <a href="https://github.com/howardabrams/dot-files">https://github.com/howardabrams/dot-files</a></p>

<p><code>[9]</code> <a href="https://github.com/coldnew/coldnew-spacemacs">https://github.com/coldnew/coldnew-spacemacs</a></p>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">lengyueyang</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2019-07-07
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/wechat-qr-code.png">
        <span>微信打赏</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/alipay-qr-code.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://lengyueyang.github.io/tags/spacemacs/">spacemacs</a>
          <a href="https://lengyueyang.github.io/tags/configuration/">configuration</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/tools/shadowsocks%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">Shadowsocks科学上网</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/tools/org-mode/%E7%94%A8org-mode-hexo%E5%9C%A8github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">
            <span class="next-text nav-default">用Org-mode, hexo在github搭建博客</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "lengyueyang/blog_comment"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  <div class="disqus-comment">
  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
    显示 Disqus 评论
  </div>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = "https://lengyueyang.github.io/post/tools/spacemacs/lengyueyang/";
    };
    function load_disqus() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'lengyueyang';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      $('#load_disqus').remove();
    };
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  </div>

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:maoxiaowei1988@foxmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="http://localhost:1313" rel="me noopener" class="iconfont"
      title="linkedin"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="33" height="33">
  <path d="M872.405333 872.618667h-151.637333v-237.610667c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333 0-91.136 61.653333-91.136 125.397334v241.792H398.976V384h145.664v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667 0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667 0 0 1-88.021333-88.106666 88.064 88.064 0 1 1 88.021333 88.106666z m76.032 555.477334H151.68V384h152.064v488.618667zM948.266667 0H75.562667C33.792 0 0 33.024 0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667 0 948.138667 0h0.128z"></path>
</svg>

    </a>
  
    <a href="http://localhost:1313" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="https://lengyueyang.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2015 -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        use ox-hugo and org-mode for blog
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  







  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script type="text/javascript">
    AV.initialize("pNCzoJ8bHsF9aNglc4RfYcfo-gzGzoHsz", "Bvxlb5rmnSeOJkrVais6uRwr");
  </script>

  <script>
    function showHitCount(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push($(this).attr("id").trim());
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var hits = item.get('hits');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(hits);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function (results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("hits");
            counter.save(null, {
              success: function (counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('hits'));
              },
              error: function (counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
             
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
             
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("hits", 1);
            newcounter.save(null, {
              success: function (newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('hits'));
              },
              error: function (newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function (error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function () {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        
        addCount(Counter);
      } else if ($('.post-link').length > 1) {
        
        showHitCount(Counter);
      }
    });
  </script>



  <script id="dsq-count-scr" src="//lengyueyang.disqus.com/count.js" async></script>







</body>
</html>
